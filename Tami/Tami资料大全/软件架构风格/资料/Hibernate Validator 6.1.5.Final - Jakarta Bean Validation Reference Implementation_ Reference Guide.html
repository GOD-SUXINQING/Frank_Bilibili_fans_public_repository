<!DOCTYPE html>
<!-- saved from url=(0078)https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Hardy Ferentschik, Gunnar Morling, Guillaume Smet">
<title>Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation: Reference Guide</title>
<link rel="stylesheet" href="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/css">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/font-awesome.min.css">
<!-- HibernateDoc.Meta -->
<meta name="description" content="Hibernate Validator, Annotation based constraints for your domain model - Reference Documentation">
<meta name="keywords" content="hibernate, validator, hibernate validator, validation, jakarta bean validation, bean validation">
<link rel="canonical" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/">
<!-- /HibernateDoc.Meta -->

<link rel="stylesheet" href="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/hibernate.css" type="text/css">

<!-- Dynamic TOC -->
<!-- Source: https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006 -->
<style>
  /* Tocbot dynamic TOC, works with tocbot 3.0.2 */
  #tocbot a.toc-link.node-name--H1{ font-style: italic }
  @media screen{
    #tocbot > ul.toc-list{ margin-bottom: 0.5em; margin-left: 0.125em }
    #tocbot ul.sectlevel0, #tocbot a.toc-link.node-name--H1 + ul{
      padding-left: 0 }
    #tocbot a.toc-link{ height:100% }
    .is-collapsible{ max-height:3000px; overflow:hidden; }
    .is-collapsed{ max-height:0 }
    .is-active-link{ font-weight:700 }
  }
  @media print{
    #tocbot a.toc-link.node-name--H4{ display:none }
  }
</style>
<!-- /Dynamic TOC -->
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation: Reference Guide</h1>
<div class="details">
<span id="author" class="author">Hardy Ferentschik</span><br>
<span id="author2" class="author">Gunnar Morling</span><br>
<span id="author3" class="author">Guillaume Smet</span><br>
<span id="revdate">2020-05-06</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<div id="tocbot" class="js-toc"><ul class="toc-list "><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#preface" class="toc-link node-name--H2  is-active-link">Preface</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted" class="toc-link node-name--H2 ">1. Getting started</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-createproject" class="toc-link node-name--H3 ">1.1. Project set up</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-uel" class="toc-link node-name--H4 ">1.1.1. Unified EL</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getting-started-cdi" class="toc-link node-name--H4 ">1.1.2. CDI</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getting-started-security-manager" class="toc-link node-name--H4 ">1.1.3. Running with a security manager</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_updating_hibernate_validator_in_wildfly" class="toc-link node-name--H4 ">1.1.4. Updating Hibernate Validator in WildFly</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-java9" class="toc-link node-name--H4 ">1.1.5. Running on Java 9</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-createmodel" class="toc-link node-name--H3 ">1.2. Applying constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_validating_constraints" class="toc-link node-name--H3 ">1.3. Validating constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-whatsnext" class="toc-link node-name--H3 ">1.4. Where to go next?</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bean-constraints" class="toc-link node-name--H2 ">2. Declaring and validating bean constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-declaring-bean-constraints" class="toc-link node-name--H3 ">2.1. Declaring bean constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_field_level_constraints" class="toc-link node-name--H4 ">2.1.1. Field-level constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_property_level_constraints" class="toc-link node-name--H4 ">2.1.2. Property-level constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#container-element-constraints" class="toc-link node-name--H4 ">2.1.3. Container element constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-usingvalidator-classlevel" class="toc-link node-name--H4 ">2.1.4. Class-level constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-inheritance" class="toc-link node-name--H4 ">2.1.5. Constraint inheritance</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-object-graph-validation" class="toc-link node-name--H4 ">2.1.6. Object graphs</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validating-bean-constraints" class="toc-link node-name--H3 ">2.2. Validating bean constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-obtaining-validator" class="toc-link node-name--H4 ">2.2.1. Obtaining a Validator instance</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_validator_methods" class="toc-link node-name--H4 ">2.2.2. Validator methods</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-violation-methods" class="toc-link node-name--H4 ">2.2.3. ConstraintViolation</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints" class="toc-link node-name--H3 ">2.3. Built-in constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-spec" class="toc-link node-name--H4 ">2.3.1. Jakarta Bean Validation constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints" class="toc-link node-name--H4 ">2.3.2. Additional constraints</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-method-constraints" class="toc-link node-name--H2 ">3. Declaring and validating method constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-declaring-method-constraints" class="toc-link node-name--H3 ">3.1. Declaring method constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_parameter_constraints" class="toc-link node-name--H4 ">3.1.1. Parameter constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_return_value_constraints" class="toc-link node-name--H4 ">3.1.2. Return value constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_cascaded_validation" class="toc-link node-name--H4 ">3.1.3. Cascaded validation</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-constraints-inheritance-hierarchies" class="toc-link node-name--H4 ">3.1.4. Method constraints in inheritance hierarchies</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validating-executable-constraints" class="toc-link node-name--H3 ">3.2. Validating method constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-obtaining-executable-validator" class="toc-link node-name--H4 ">3.2.1. Obtaining an ExecutableValidator instance</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-executable-validator-methods" class="toc-link node-name--H4 ">3.2.2. ExecutableValidator methods</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_constraintviolation_code_methods_for_method_validation" class="toc-link node-name--H4 ">3.2.3. ConstraintViolation methods for method validation</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-method-constraints" class="toc-link node-name--H3 ">3.3. Built-in method constraints</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-message-interpolation" class="toc-link node-name--H2 ">4. Interpolating constraint error messages</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-message-interpolation" class="toc-link node-name--H3 ">4.1. Default message interpolation</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-special-characters" class="toc-link node-name--H4 ">4.1.1. Special characters</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-interpolation-with-message-expressions" class="toc-link node-name--H4 ">4.1.2. Interpolation with message expressions</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_examples" class="toc-link node-name--H4 ">4.1.3. Examples</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-custom-message-interpolation" class="toc-link node-name--H3 ">4.2. Custom message interpolation</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-resource-bundle-locator" class="toc-link node-name--H4 ">4.2.1. ResourceBundleLocator</a></li></ul></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-groups" class="toc-link node-name--H2 ">5. Grouping constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_requesting_groups" class="toc-link node-name--H3 ">5.1. Requesting groups</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-inheritance" class="toc-link node-name--H3 ">5.2. Group inheritance</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-defining-group-sequences" class="toc-link node-name--H3 ">5.3. Defining group sequences</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-default-group-class" class="toc-link node-name--H3 ">5.4. Redefining the default group sequence</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_groupsequence_code" class="toc-link node-name--H4 ">5.4.1. @GroupSequence</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_groupsequenceprovider_code" class="toc-link node-name--H4 ">5.4.2. @GroupSequenceProvider</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-conversion" class="toc-link node-name--H3 ">5.5. Group conversion</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints" class="toc-link node-name--H2 ">6. Creating custom constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-simple" class="toc-link node-name--H3 ">6.1. Creating a simple constraint</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-constraintannotation" class="toc-link node-name--H4 ">6.1.1. The constraint annotation</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-validator" class="toc-link node-name--H4 ">6.1.2. The constraint validator</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-errormessage" class="toc-link node-name--H4 ">6.1.3. The error message</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-using" class="toc-link node-name--H4 ">6.1.4. Using the constraint</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-class-level-constraints" class="toc-link node-name--H3 ">6.2. Class-level constraints</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-custom-property-paths" class="toc-link node-name--H4 ">6.2.1. Custom property paths</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-cross-parameter-constraints" class="toc-link node-name--H3 ">6.3. Cross-parameter constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-composition" class="toc-link node-name--H3 ">6.4. Constraint composition</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-valueextraction" class="toc-link node-name--H2 ">7. Value extraction</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-builtinvalueextractors" class="toc-link node-name--H3 ">7.1. Built-in value extractors</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_implementing_a_code_valueextractor_code" class="toc-link node-name--H3 ">7.2. Implementing a ValueExtractor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_non_generic_containers" class="toc-link node-name--H3 ">7.3. Non generic containers</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-javafx" class="toc-link node-name--H3 ">7.4. JavaFX value extractors</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-registeringvalueextractor" class="toc-link node-name--H3 ">7.5. Registering a ValueExtractor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_resolution_algorithms" class="toc-link node-name--H3 ">7.6. Resolution algorithms</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration" class="toc-link node-name--H2 ">8. Configuring via XML</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuration-validation-xml" class="toc-link node-name--H3 ">8.1. Configuring the validator factory in validation.xml</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-mapping-xml-constraints" class="toc-link node-name--H3 ">8.2. Mapping constraints via constraint-mappings</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bootstrapping" class="toc-link node-name--H2 ">9. Bootstrapping</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-retrieving-validator-factory-validator" class="toc-link node-name--H3 ">9.1. Retrieving ValidatorFactory and Validator</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validation-provider-resolver" class="toc-link node-name--H4 ">9.1.1. ValidationProviderResolver</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuring-validator-factory" class="toc-link node-name--H3 ">9.2. Configuring a ValidatorFactory</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validator-factory-message-interpolator" class="toc-link node-name--H4 ">9.2.1. MessageInterpolator</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validator-factory-traversable-resolver" class="toc-link node-name--H4 ">9.2.2. TraversableResolver</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_constraintvalidatorfactory_code" class="toc-link node-name--H4 ">9.2.3. ConstraintValidatorFactory</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-parameter-name-provider" class="toc-link node-name--H4 ">9.2.4. ParameterNameProvider</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-clock-provider" class="toc-link node-name--H4 ">9.2.5. ClockProvider and temporal validation tolerance</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-bootstrapping-valueextractors" class="toc-link node-name--H4 ">9.2.6. Registering ValueExtractors</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_adding_mapping_streams" class="toc-link node-name--H4 ">9.2.7. Adding mapping streams</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-provider-specific-settings" class="toc-link node-name--H4 ">9.2.8. Provider-specific settings</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-script-evaluator-factory" class="toc-link node-name--H4 ">9.2.9. Configuring the ScriptEvaluatorFactory</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuring-validator" class="toc-link node-name--H3 ">9.3. Configuring a Validator</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-metadata-api" class="toc-link node-name--H2 ">10. Using constraint metadata</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_beandescriptor_code" class="toc-link node-name--H3 ">10.1. BeanDescriptor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-property-descriptor" class="toc-link node-name--H3 ">10.2. PropertyDescriptor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_methoddescriptor_code_and_code_constructordescriptor_code" class="toc-link node-name--H3 ">10.3. MethodDescriptor and ConstructorDescriptor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-metadata-api-elementdescriptor" class="toc-link node-name--H3 ">10.4. ElementDescriptor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_containerdescriptor_code_and_code_containerelementtypedescriptor_code" class="toc-link node-name--H3 ">10.5. ContainerDescriptor and ContainerElementTypeDescriptor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-conversion-descriptor" class="toc-link node-name--H3 ">10.6. GroupConversionDescriptor</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-descriptor" class="toc-link node-name--H3 ">10.7. ConstraintDescriptor</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-integration" class="toc-link node-name--H2 ">11. Integrating with other frameworks</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-checkconstraints-orm" class="toc-link node-name--H3 ">11.1. ORM integration</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-checkconstraints-db" class="toc-link node-name--H4 ">11.1.1. Database schema-level validation</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-checkconstraints-orm-hibernateevent" class="toc-link node-name--H4 ">11.1.2. Hibernate ORM event-based validation</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_jpa" class="toc-link node-name--H4 ">11.1.3. JPA</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-presentation-layer" class="toc-link node-name--H3 ">11.2. JSF &amp; Seam</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-integration-with-cdi" class="toc-link node-name--H3 ">11.3. CDI</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_dependency_injection" class="toc-link node-name--H4 ">11.3.1. Dependency injection</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_method_validation" class="toc-link node-name--H4 ">11.3.2. Method validation</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_java_ee" class="toc-link node-name--H3 ">11.4. Java EE</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_javafx" class="toc-link node-name--H3 ">11.5. JavaFX</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-specifics" class="toc-link node-name--H2 ">12. Hibernate Validator Specifics</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_public_api" class="toc-link node-name--H3 ">12.1. Public API</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-fail-fast" class="toc-link node-name--H3 ">12.2. Fail fast mode</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-validation-prerequisite-relaxation" class="toc-link node-name--H3 ">12.3. Relaxation of requirements for method validation in class hierarchies</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api" class="toc-link node-name--H3 ">12.4. Programmatic constraint definition and declaration</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api-contributor" class="toc-link node-name--H3 ">12.5. Applying programmatic constraint declarations to the default validator factory</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-advanced-constraint-composition" class="toc-link node-name--H3 ">12.6. Advanced constraint composition features</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_validation_target_specification_for_purely_composed_constraints" class="toc-link node-name--H4 ">12.6.1. Validation target specification for purely composed constraints</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-boolean-constraint-composition" class="toc-link node-name--H4 ">12.6.2. Boolean composition of constraints</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-extensions-path-api" class="toc-link node-name--H3 ">12.7. Extensions of the Path API</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-dynamic-payload" class="toc-link node-name--H3 ">12.8. Dynamic payload as part of ConstraintViolation</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#non-el-message-interpolator" class="toc-link node-name--H3 ">12.9. ParameterMessageInterpolator</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_resourcebundlelocator_code" class="toc-link node-name--H3 ">12.10. ResourceBundleLocator</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-locale-resolver" class="toc-link node-name--H3 ">12.11. Customizing the locale resolution</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_custom_contexts" class="toc-link node-name--H3 ">12.12. Custom contexts</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-hibernateconstraintvalidatorcontext" class="toc-link node-name--H4 ">12.12.1. HibernateConstraintValidatorContext</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_hibernatemessageinterpolatorcontext_code" class="toc-link node-name--H4 ">12.12.2. HibernateMessageInterpolatorContext</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-paranamer-parameternameprovider" class="toc-link node-name--H3 ">12.13. Paranamer based ParameterNameProvider</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-definition-contribution" class="toc-link node-name--H3 ">12.14. Providing constraint definitions</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_constraint_definitions_via_code_serviceloader_code" class="toc-link node-name--H4 ">12.14.1. Constraint definitions via ServiceLoader</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-constraint-definition" class="toc-link node-name--H4 ">12.14.2. Adding constraint definitions programmatically</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-customizing-class-loading" class="toc-link node-name--H3 ">12.15. Customizing class-loading</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getter-property-selection-strategy" class="toc-link node-name--H3 ">12.16. Customizing the getter property selection strategy</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-property-node-name-provider" class="toc-link node-name--H3 ">12.17. Customizing the property name resolution for constraint violations</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotation-processor" class="toc-link node-name--H2 ">13. Annotation Processor</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-prerequisites" class="toc-link node-name--H3 ">13.1. Prerequisites</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-features" class="toc-link node-name--H3 ">13.2. Features</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-options" class="toc-link node-name--H3 ">13.3. Options</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-usage" class="toc-link node-name--H3 ">13.4. Using the Annotation Processor</a><ul class="toc-list  is-collapsible is-collapsed"><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-commandline" class="toc-link node-name--H4 ">13.4.1. Command line builds</a></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-ide" class="toc-link node-name--H4 ">13.4.2. IDE builds</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-known-issues" class="toc-link node-name--H3 ">13.5. Known issues</a></li></ul></li><li class="toc-list-item"><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-further-reading" class="toc-link node-name--H2 ">14. Further reading</a></li></ul></div>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="preface"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#preface"></a>Preface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Validating data is a common task that occurs throughout all application layers, from the
presentation to the persistence layer. Often the same validation logic is implemented in each layer
which is time consuming and error-prone. To avoid duplication of these validations, developers often
bundle validation logic directly into the domain model, cluttering domain classes with validation
code which is really metadata about the class itself.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/application-layers.png" alt="application layers">
</div>
</div>
<div class="paragraph">
<p>Jakarta Bean Validation 2.0 - defines a metadata model and API for entity and method validation.
The default metadata source are annotations, with the ability to override and extend the meta-data
through the use of XML. The API is not tied to a specific application tier nor programming model. It
is specifically not tied to either web or persistence tier, and is available for both server-side
application programming, as well as rich client Swing application developers.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/application-layers2.png" alt="application layers2">
</div>
</div>
<div class="paragraph">
<p>Hibernate Validator is the reference implementation of Jakarta Bean Validation. The implementation itself as
well as the Jakarta Bean Validation API and TCK are all provided and distributed under the
<a href="http://www.apache.org/licenses/LICENSE-2.0">Apache Software License 2.0</a>.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator 6 and Jakarta Bean Validation 2.0 require Java 8 or later.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validator-gettingstarted"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted"></a>1. Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter will show you how to get started with Hibernate Validator, the reference implementation (RI) of Jakarta Bean Validation. For the following quick-start you need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A JDK 8</p>
</li>
<li>
<p><a href="http://maven.apache.org/">Apache Maven</a></p>
</li>
<li>
<p>An Internet connection (Maven has to download all required libraries)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="validator-gettingstarted-createproject"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-createproject"></a>1.1. Project set up</h3>
<div class="paragraph">
<p>In order to use Hibernate Validator within a Maven project, simply add the following dependency to
your <em>pom.xml</em>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.1: Hibernate Validator Maven dependency</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;dependency&gt;</span><span class="pln">
    </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.hibernate.validator</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
    </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">hibernate-validator</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
    </span><span class="tag">&lt;version&gt;</span><span class="pln">6.1.5.Final</span><span class="tag">&lt;/version&gt;</span><span class="pln">
</span><span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This transitively pulls in the dependency to the Jakarta Bean Validation API
(<code>jakarta.validation:jakarta.validation-api:2.0.2</code>).</p>
</div>
<div class="sect3">
<h4 id="validator-gettingstarted-uel"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-uel"></a>1.1.1. Unified EL</h4>
<div class="paragraph">
<p>Hibernate Validator requires an implementation of <a href="https://projects.eclipse.org/projects/ee4j.el">Jakarta Expression Language</a>
for evaluating dynamic expressions in constraint
violation messages (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-message-interpolation">Section 4.1, “Default message interpolation”</a>). When your application runs in a Java EE
container such as JBoss AS, an EL implementation is already provided by the container. In a Java SE
environment, however, you have to add an implementation as dependency to your POM file. For instance
you can add the following dependency to use the Jakarta EL <a href="https://github.com/eclipse-ee4j/el-ri">reference
implementation</a>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.2: Maven dependencies for Unified EL reference implementation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;dependency&gt;</span><span class="pln">
    </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.glassfish</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
    </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">jakarta.el</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
    </span><span class="tag">&lt;version&gt;</span><span class="pln">3.0.3</span><span class="tag">&lt;/version&gt;</span><span class="pln">
</span><span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For environments where one cannot provide a EL implementation Hibernate Validator is offering a
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#non-el-message-interpolator">Section 12.9, “<code>ParameterMessageInterpolator</code>”</a>. However, the use of this interpolator
is not Jakarta Bean Validation specification compliant.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="section-getting-started-cdi"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getting-started-cdi"></a>1.1.2. CDI</h4>
<div class="paragraph">
<p>Jakarta Bean Validation defines integration points with CDI
(<a href="https://projects.eclipse.org/projects/ee4j.cdi">Contexts and Dependency Injection for Jakarta EE</a>).
If your application runs in an
environment which does not provide this integration out of the box, you may use the Hibernate
Validator CDI portable extension by adding the following Maven dependency to your POM:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.3: Hibernate Validator CDI portable extension Maven dependency</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;dependency&gt;</span><span class="pln">
    </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.hibernate.validator</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
    </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">hibernate-validator-cdi</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
    </span><span class="tag">&lt;version&gt;</span><span class="pln">6.1.5.Final</span><span class="tag">&lt;/version&gt;</span><span class="pln">
</span><span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that adding this dependency is usually not required for applications running on a Java EE
application server. You can learn more about the integration of Jakarta Bean Validation and CDI in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-integration-with-cdi">Section 11.3, “CDI”</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-getting-started-security-manager"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getting-started-security-manager"></a>1.1.3. Running with a security manager</h4>
<div class="paragraph">
<p>Hibernate Validator supports running with a <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/index.html">security manager</a> being enabled.
To do so, you must assign several permissions to the code bases of Hibernate Validator, the Jakarta Bean Validation API, Classmate and JBoss Logging and also to the code base calling Jakarta Bean Validation.
The following shows how to do this via a <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html">policy file</a> as processed by the Java default policy implementation:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.4: Policy file for using Hibernate Validator with a security manager</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="pln">grant codeBase </span><span class="str">"file:path/to/hibernate-validator-6.1.5.Final.jar"</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">reflect</span><span class="pun">.</span><span class="typ">ReflectPermission</span><span class="pln"> </span><span class="str">"suppressAccessChecks"</span><span class="pun">;</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="typ">RuntimePermission</span><span class="pln"> </span><span class="str">"accessDeclaredMembers"</span><span class="pun">;</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="typ">RuntimePermission</span><span class="pln"> </span><span class="str">"setContextClassLoader"</span><span class="pun">;</span><span class="pln">

    permission org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="typ">HibernateValidatorPermission</span><span class="pln"> </span><span class="str">"accessPrivateMembers"</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// Only needed when working with XML descriptors (validation.xml or XML constraint mappings)</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">PropertyPermission</span><span class="pln"> </span><span class="str">"mapAnyUriToUri"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"read"</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

grant codeBase </span><span class="str">"file:path/to/jakarta.validation-api-2.0.2.jar"</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">FilePermission</span><span class="pln"> </span><span class="str">"path/to/hibernate-validator-6.1.5.Final.jar"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"read"</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

grant codeBase </span><span class="str">"file:path/to/jboss-logging-3.3.2.Final.jar"</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">PropertyPermission</span><span class="pln"> </span><span class="str">"org.jboss.logging.provider"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"read"</span><span class="pun">;</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">PropertyPermission</span><span class="pln"> </span><span class="str">"org.jboss.logging.locale"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"read"</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

grant codeBase </span><span class="str">"file:path/to/classmate-1.3.4.jar"</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    permission java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="typ">RuntimePermission</span><span class="pln"> </span><span class="str">"accessDeclaredMembers"</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

grant codeBase </span><span class="str">"file:path/to/validation-caller-x.y.z.jar"</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    permission org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="typ">HibernateValidatorPermission</span><span class="pln"> </span><span class="str">"accessPrivateMembers"</span><span class="pun">;</span><span class="pln">
</span><span class="pun">};</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_updating_hibernate_validator_in_wildfly"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_updating_hibernate_validator_in_wildfly"></a>1.1.4. Updating Hibernate Validator in WildFly</h4>
<div class="paragraph">
<p>The <a href="http://wildfly.org/">WildFly application server</a> contains Hibernate Validator out of the box.
In order to update the server modules for Jakarta Bean Validation API and Hibernate Validator to the latest and greatest, the patch mechanism of WildFly can be used.</p>
</div>
<div class="paragraph">
<p>You can download the patch file from <a href="http://sourceforge.net/projects/hibernate/files/hibernate-validator">SourceForge</a> or from Maven Central using the following dependency:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.5: Maven dependency for WildFly 19.0.0.Final patch file</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;dependency&gt;</span><span class="pln">
    </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.hibernate.validator</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
    </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">hibernate-validator-modules</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
    </span><span class="tag">&lt;version&gt;</span><span class="pln">6.1.5.Final</span><span class="tag">&lt;/version&gt;</span><span class="pln">
    </span><span class="tag">&lt;classifier&gt;</span><span class="pln">wildfly-19.0.0.Final-patch</span><span class="tag">&lt;/classifier&gt;</span><span class="pln">
    </span><span class="tag">&lt;type&gt;</span><span class="pln">zip</span><span class="tag">&lt;/type&gt;</span><span class="pln">
</span><span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>We also provide a patch for WildFly 18.0.1.Final:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.6: Maven dependency for WildFly 18.0.1.Final patch file</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;dependency&gt;</span><span class="pln">
    </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.hibernate.validator</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
    </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">hibernate-validator-modules</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
    </span><span class="tag">&lt;version&gt;</span><span class="pln">6.1.5.Final</span><span class="tag">&lt;/version&gt;</span><span class="pln">
    </span><span class="tag">&lt;classifier&gt;</span><span class="pln">wildfly-18.0.1.Final-patch</span><span class="tag">&lt;/classifier&gt;</span><span class="pln">
    </span><span class="tag">&lt;type&gt;</span><span class="pln">zip</span><span class="tag">&lt;/type&gt;</span><span class="pln">
</span><span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Having downloaded the patch file, you can apply it to WildFly by running this command:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.7: Applying the WildFly patch</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code><span class="pln">$JBOSS_HOME</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">jboss</span><span class="pun">-</span><span class="pln">cli</span><span class="pun">.</span><span class="pln">sh patch apply hibernate</span><span class="pun">-</span><span class="pln">validator</span><span class="pun">-</span><span class="pln">modules</span><span class="pun">-</span><span class="lit">6.1</span><span class="pun">.</span><span class="lit">5.Final</span><span class="pun">-</span><span class="pln">wildfly</span><span class="pun">-</span><span class="lit">19.0</span><span class="pun">.</span><span class="lit">0.Final</span><span class="pun">-</span><span class="pln">patch</span><span class="pun">.</span><span class="pln">zip</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In case you want to undo the patch and go back to the version of Hibernate Validator originally coming with the server, run the following command:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.8: Rolling back the WildFly patch</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code><span class="pln">$JBOSS_HOME</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">jboss</span><span class="pun">-</span><span class="pln">cli</span><span class="pun">.</span><span class="pln">sh patch rollback </span><span class="pun">--</span><span class="pln">reset</span><span class="pun">-</span><span class="pln">configuration</span><span class="pun">=</span><span class="kwd">true</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can learn more about the WildFly patching infrastructure in general <a href="https://developer.jboss.org/wiki/SingleInstallationPatching/">here</a> and <a href="http://www.mastertheboss.com/jboss-server/jboss-configuration/managing-wildfly-and-eap-patches">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="validator-gettingstarted-java9"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-java9"></a>1.1.5. Running on Java 9</h4>
<div class="paragraph">
<p>As of Hibernate Validator 6.1.5.Final, support for Java 9 and the Java Platform Module System (JPMS) is experimental.
There are no JPMS module descriptors provided yet, but Hibernate Validator is usable as automatic modules.</p>
</div>
<div class="paragraph">
<p>These are the module names as declared using the <code>Automatic-Module-Name</code> header:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jakarta Bean Validation API: <code>java.validation</code></p>
</li>
<li>
<p>Hibernate Validator core: <code>org.hibernate.validator</code></p>
</li>
<li>
<p>Hibernate Validator CDI extension: <code>org.hibernate.validator.cdi</code></p>
</li>
<li>
<p>Hibernate Validator test utilities: <code>org.hibernate.validator.testutils</code></p>
</li>
<li>
<p>Hibernate Validator annotation processor: <code>org.hibernate.validator.annotationprocessor</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These module names are preliminary and may be changed when providing real module descriptors in a future release.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using Hibernate Validator with CDI, be careful to not enable the <code>java.xml.ws.annotation</code> module of the JDK.
This module contains a subset of Jakarta Annotations, but some annotations such as <code>javax.annotation.Priority</code> are missing.
This causes the method validation interceptor of Hibernate Validator to not be registered, i.e. method validation won’t work.</p>
</div>
<div class="paragraph">
<p>Instead, add the full Jakarta Annotations API to the unnamed module (i.e. the classpath), e.g. by pulling in the <em>jakarta.annotation:jakarta.annotation-api</em> dependency
(there already is a transitive dependency to the Jakarta Annotations API when depending on <em>org.hibernate.validator:hibernate-validator-cdi</em>).</p>
</div>
<div class="paragraph">
<p>If you need to enable the <code>java.xml.ws.annotation</code> module for some reason, you should patch it with the contents of the full API
by appending <code>--patch-module java.xml.ws.annotation=/path/to/complete-jakarta.annotation-api.jar</code> to your <em>java</em> invocation.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validator-gettingstarted-createmodel"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-createmodel"></a>1.2. Applying constraints</h3>
<div class="paragraph">
<p>Let’s dive directly into an example to see how to apply constraints.</p>
</div>
<div id="example-class-car" class="exampleblock">
<div class="title">Example 1.9: Class Car annotated with constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter01</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">constraints</span><span class="pun">.</span><span class="typ">Min</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">constraints</span><span class="pun">.</span><span class="typ">NotNull</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">constraints</span><span class="pun">.</span><span class="typ">Size</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">licensePlate </span><span class="pun">=</span><span class="pln"> licencePlate</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">seatCount </span><span class="pun">=</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>@NotNull</code>, <code>@Size</code> and <code>@Min</code> annotations are used to declare the constraints which should be applied
to the fields of a Car instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>manufacturer</code> must never be <code>null</code></p>
</li>
<li>
<p><code>licensePlate</code> must never be <code>null</code> and must be between 2 and 14 characters long</p>
</li>
<li>
<p><code>seatCount</code> must be at least 2</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can find the complete source code of all examples used in this reference guide in the Hibernate
Validator
<a href="https://github.com/hibernate/hibernate-validator/tree/master/documentation/src/test">source repository</a>
on GitHub.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_validating_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_validating_constraints"></a>1.3. Validating constraints</h3>
<div class="paragraph">
<p>To perform a validation of these constraints, you use a <code>Validator</code> instance. Let’s have a look at a
unit test for <code>Car</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1.10: Class CarTest showing validation examples</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter01</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Set</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ConstraintViolation</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">Validation</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">Validator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ValidatorFactory</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">junit</span><span class="pun">.</span><span class="typ">BeforeClass</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">junit</span><span class="pun">.</span><span class="typ">Test</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">junit</span><span class="pun">.</span><span class="typ">Assert</span><span class="pun">.</span><span class="pln">assertEquals</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CarTest</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="typ">Validator</span><span class="pln"> validator</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@BeforeClass</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setUpValidator</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">ValidatorFactory</span><span class="pln"> factory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">buildDefaultValidatorFactory</span><span class="pun">();</span><span class="pln">
        validator </span><span class="pun">=</span><span class="pln"> factory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Test</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> manufacturerIsNull</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln">
                validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

        assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"must not be null"</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Test</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> licensePlateTooShort</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"D"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln">
                validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

        assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        assertEquals</span><span class="pun">(</span><span class="pln">
                </span><span class="str">"size must be between 2 and 14"</span><span class="pun">,</span><span class="pln">
                constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Test</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> seatCountTooLow</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln">
                validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

        assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        assertEquals</span><span class="pun">(</span><span class="pln">
                </span><span class="str">"must be greater than or equal to 2"</span><span class="pun">,</span><span class="pln">
                constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Test</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> carIsValid</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln">
                validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

        assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the <code>setUp()</code> method a <code>Validator</code> object is retrieved from the <code>ValidatorFactory</code>. A <code>Validator</code>
instance is thread-safe and may be reused multiple times. It thus can safely be stored in a static
field and be used in the test methods to validate the different <code>Car</code> instances.</p>
</div>
<div class="paragraph">
<p>The <code>validate()</code> method returns a set of <code>ConstraintViolation</code> instances, which you can iterate over in
order to see which validation errors occurred. The first three test methods show some expected
constraint violations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>@NotNull</code> constraint on <code>manufacturer</code> is violated in <code>manufacturerIsNull()</code></p>
</li>
<li>
<p>The <code>@Size</code> constraint on <code>licensePlate</code> is violated in <code>licensePlateTooShort()</code></p>
</li>
<li>
<p>The <code>@Min</code> constraint on <code>seatCount</code> is violated in <code>seatCountTooLow()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the object validates successfully, <code>validate()</code> returns an empty set as you can see in <code>carIsValid()</code>.</p>
</div>
<div class="paragraph">
<p>Note that only classes from the package <code>javax.validation</code> are used. These are provided from the Bean
Validation API. No classes from Hibernate Validator are directly referenced, resulting in portable
code.</p>
</div>
</div>
<div class="sect2">
<h3 id="validator-gettingstarted-whatsnext"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-whatsnext"></a>1.4. Where to go next?</h3>
<div class="paragraph">
<p>That concludes the 5 minutes tour through the world of Hibernate Validator and Jakarta Bean Validation.
Continue exploring the code examples or look at further examples referenced in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-further-reading">Chapter 14, <em>Further reading</em></a>.</p>
</div>
<div class="paragraph">
<p>To learn more about the validation of beans and properties, just continue reading
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bean-constraints">Chapter 2, <em>Declaring and validating bean constraints</em></a>. If you are interested in using Jakarta Bean Validation for the validation of
method pre- and postcondition refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-method-constraints">Chapter 3, <em>Declaring and validating method constraints</em></a>. In case your application has
specific validation requirements have a look at <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints">Chapter 6, <em>Creating custom constraints</em></a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter-bean-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bean-constraints"></a>2. Declaring and validating bean constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter you will learn how to declare (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-declaring-bean-constraints">Section 2.1, “Declaring bean constraints”</a>) and
validate (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validating-bean-constraints">Section 2.2, “Validating bean constraints”</a>) bean constraints.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints">Section 2.3, “Built-in constraints”</a> provides an overview of all built-in constraints coming with
Hibernate Validator.</p>
</div>
<div class="paragraph">
<p>If you are interested in applying constraints to method parameters and return values, refer to
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-method-constraints">Chapter 3, <em>Declaring and validating method constraints</em></a>.</p>
</div>
<div class="sect2">
<h3 id="section-declaring-bean-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-declaring-bean-constraints"></a>2.1. Declaring bean constraints</h3>
<div class="paragraph">
<p>Constraints in Jakarta Bean Validation are expressed via Java annotations. In this section you will learn
how to enhance an object model with these annotations. There are four types of bean constraints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>field constraints</p>
</li>
<li>
<p>property constraints</p>
</li>
<li>
<p>container element constraints</p>
</li>
<li>
<p>class constraints</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Not all constraints can be placed on all of these levels. In fact, none of the default constraints
defined by Jakarta Bean Validation can be placed at class level. The <code>java.lang.annotation.Target</code> annotation
in the constraint annotation itself determines on which elements a constraint can be placed. See
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints">Chapter 6, <em>Creating custom constraints</em></a> for more information.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_field_level_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_field_level_constraints"></a>2.1.1. Field-level constraints</h4>
<div class="paragraph">
<p>Constraints can be expressed by annotating a field of a class. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-field-level">Example 2.1, “Field-level constraints”</a> shows a field
level configuration example:</p>
</div>
<div id="example-field-level" class="exampleblock">
<div class="title">Example 2.1: Field-level constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">fieldlevel</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isRegistered </span><span class="pun">=</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//getters and setters...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When using field-level constraints field access strategy is used to access the value to be
validated. This means the validation engine directly accesses the instance variable and does not
invoke the property accessor method even if such an accessor exists.</p>
</div>
<div class="paragraph">
<p>Constraints can be applied to fields of any access type (public, private etc.). Constraints on
static fields are not supported, though.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When validating byte code enhanced objects, property level constraints should be used, because the
byte code enhancing library won’t be able to determine a field access via reflection.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_property_level_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_property_level_constraints"></a>2.1.2. Property-level constraints</h4>
<div class="paragraph">
<p>If your model class adheres to the
<a href="http://www.oracle.com/technetwork/articles/javaee/spec-136004.html">JavaBeans</a> standard, it
is also possible to annotate the properties of a bean class instead of its fields.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-property-level">Example 2.2, “Property-level constraints”</a> uses the same entity as in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-field-level">Example 2.1, “Field-level constraints”</a>, however, property level
constraints are used.</p>
</div>
<div id="example-property-level" class="exampleblock">
<div class="title">Example 2.2: Property-level constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">propertylevel</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isRegistered </span><span class="pun">=</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getManufacturer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setManufacturer</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setRegistered</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isRegistered </span><span class="pun">=</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The property’s getter method has to be annotated, not its setter. That way also read-only properties
can be constrained which have no setter method.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When using property level constraints property access strategy is used to access the value to be
validated, i.e. the validation engine accesses the state via the property accessor method.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is recommended to stick either to field <em>or</em> property annotations within one class. It is not
recommended to annotate a field <em>and</em> the accompanying getter method as this would cause the field
to be validated twice.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="container-element-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#container-element-constraints"></a>2.1.3. Container element constraints</h4>
<div class="paragraph">
<p>It is possible to specify constraints directly on the type argument of a
parameterized type: these constraints are called container element constraints.</p>
</div>
<div class="paragraph">
<p>This requires that <code>ElementType.TYPE_USE</code> is specified via <code>@Target</code>
in the constraint definition. As of Jakarta Bean Validation 2.0, built-in Jakarta Bean Validation as well as
Hibernate Validator specific constraints specify <code>ElementType.TYPE_USE</code> and can be used
directly in this context.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator validates container element constraints specified on the following standard
Java containers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>implementations of <code>java.util.Iterable</code> (e.g. <code>List</code>s, <code>Set</code>s),</p>
</li>
<li>
<p>implementations of <code>java.util.Map</code>, with support for keys and values,</p>
</li>
<li>
<p><code>java.util.Optional</code>, <code>java.util.OptionalInt</code>, <code>java.util.OptionalDouble</code>, <code>java.util.OptionalLong</code>,</p>
</li>
<li>
<p>the various implementations of JavaFX’s <code>javafx.beans.observable.ObservableValue</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It also supports container element constraints on custom container types (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-valueextraction">Chapter 7, <em>Value extraction</em></a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In versions prior to 6, a subset of container element constraints were supported. A <code>@Valid</code> annotation
was required at the container level to enable them.
This is not required anymore as of Hibernate Validator 6.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>We present below a couple of examples illustrating container element constraints on various Java types.</p>
</div>
<div class="paragraph">
<p>In these examples, <code>@ValidPart</code> is a custom constraint allowed to be used in the <code>TYPE_USE</code> context.</p>
</div>
<div class="sect4">
<h5 id="_with_code_iterable_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_with_code_iterable_code"></a>2.1.3.1. With <code>Iterable</code></h5>
<div class="paragraph">
<p>When applying constraints on an <code>Iterable</code> type argument, Hibernate Validator will validate each
element. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-container-element-constraints-iterable">Example 2.3, “Container element constraint on <code>Set</code>”</a> shows an example of a
<code>Set</code> with a container element constraint.</p>
</div>
<div id="example-container-element-constraints-iterable" class="exampleblock">
<div class="title">Example 2.3: Container element constraint on <code>Set</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">HashSet</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Set</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="lit">@ValidPart</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> parts </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashSet</span><span class="pun">&lt;&gt;();</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addPart</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> part</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        parts</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> part </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">();</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">addPart</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Wheel"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">addPart</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constraintViolation </span><span class="pun">=</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"'null' is not a valid car part."</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"parts[].&lt;iterable element&gt;"</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note how the property path clearly states that the violation comes from an element of the iterable.</p>
</div>
</div>
<div class="sect4">
<h5 id="_with_code_list_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_with_code_list_code"></a>2.1.3.2. With <code>List</code></h5>
<div class="paragraph">
<p>When applying constraints on a <code>List</code> type argument, Hibernate Validator will validate each
element. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-container-element-constraints-list">Example 2.4, “Container element constraint on <code>List</code>”</a> shows an example of a
<code>List</code> with a container element constraint.</p>
</div>
<div id="example-container-element-constraints-list" class="exampleblock">
<div class="title">Example 2.4: Container element constraint on <code>List</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">list</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="lit">@ValidPart</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> parts </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> addPart</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> part</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        parts</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> part </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">();</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">addPart</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Wheel"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">addPart</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constraintViolation </span><span class="pun">=</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"'null' is not a valid car part."</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"parts[1].&lt;list element&gt;"</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here, the property path also contains the index of the invalid element.</p>
</div>
</div>
<div class="sect4">
<h5 id="_with_code_map_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_with_code_map_code"></a>2.1.3.3. With <code>Map</code></h5>
<div class="paragraph">
<p>Container element constraints are also validated on map keys and values.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-container-element-constraints-map">Example 2.5, “Container element constraint on map keys and values”</a> shows an example of a <code>Map</code> with a constraint on the key
and a constraint on the value.</p>
</div>
<div id="example-container-element-constraints-map" class="exampleblock">
<div class="title">Example 2.5: Container element constraint on map keys and values</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">map</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">HashMap</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">constraints</span><span class="pun">.</span><span class="typ">NotNull</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">enum</span><span class="pln"> </span><span class="typ">FuelConsumption</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        CITY</span><span class="pun">,</span><span class="pln">
        HIGHWAY
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">FuelConsumption</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@MaxAllowedFuelConsumption</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> fuelConsumption </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashMap</span><span class="pun">&lt;&gt;();</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setFuelConsumption</span><span class="pun">(</span><span class="typ">FuelConsumption</span><span class="pln"> consumption</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        fuelConsumption</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln"> consumption</span><span class="pun">,</span><span class="pln"> value </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">();</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setFuelConsumption</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="typ">FuelConsumption</span><span class="pun">.</span><span class="pln">HIGHWAY</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constraintViolation </span><span class="pun">=</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"20 is outside the max fuel consumption."</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"fuelConsumption[HIGHWAY].&lt;map value&gt;"</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">();</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setFuelConsumption</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constraintViolation </span><span class="pun">=</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"must not be null"</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"fuelConsumption&lt;K&gt;[].&lt;map key&gt;"</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The property paths of the violations are particularly interesting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The key of the invalid element is included in the property path (in the second example, the key is <code>null</code>).</p>
</li>
<li>
<p>In the first example, the violation concerns the <code>&lt;map value&gt;</code>, in the second one, the <code>&lt;map key&gt;</code>.</p>
</li>
<li>
<p>In the second example, you might have noticed the presence of the type argument <code>&lt;K&gt;</code>, more on this later.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_with_code_java_util_optional_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_with_code_java_util_optional_code"></a>2.1.3.4. With <code>java.util.Optional</code></h5>
<div class="paragraph">
<p>When applying a constraint on the type argument of <code>Optional</code>, Hibernate Validator will automatically
unwrap the type and validate the internal value. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-container-element-constraints-optional">Example 2.6, “Container element constraint on Optional”</a> shows
an example of an <code>Optional</code> with a container element constraint.</p>
</div>
<div id="example-container-element-constraints-optional" class="exampleblock">
<div class="title">Example 2.6: Container element constraint on Optional</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">optional</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Optional</span><span class="pun">&lt;</span><span class="lit">@MinTowingCapacity</span><span class="pun">(</span><span class="lit">1000</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> towingCapacity </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Optional</span><span class="pun">.</span><span class="pln">empty</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setTowingCapacity</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> </span><span class="kwd">alias</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        towingCapacity </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Optional</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">alias</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">();</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setTowingCapacity</span><span class="pun">(</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constraintViolation </span><span class="pun">=</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"Not enough towing capacity."</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"towingCapacity"</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here, the property path only contains the name of the property as we are considering <code>Optional</code> as a "transparent"
container.</p>
</div>
</div>
<div class="sect4">
<h5 id="_with_custom_container_types"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_with_custom_container_types"></a>2.1.3.5. With custom container types</h5>
<div class="paragraph">
<p>Container element constraints can also be used with custom containers.</p>
</div>
<div class="paragraph">
<p>A <code>ValueExtractor</code> must be registered for the custom type allowing to retrieve
the value(s) to validate (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-valueextraction">Chapter 7, <em>Value extraction</em></a> for more information about how to implement
your own <code>ValueExtractor</code> and how to register it).</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-container-element-constraints-custom-container-type">Example 2.7, “Container element constraint on custom container type”</a> shows an example of a custom
parameterized type with a type argument constraint.</p>
</div>
<div id="example-container-element-constraints-custom-container-type" class="exampleblock">
<div class="title">Example 2.7: Container element constraint on custom container type</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">custom</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">GearBox</span><span class="pun">&lt;</span><span class="lit">@MinTorque</span><span class="pun">(</span><span class="lit">100</span><span class="pun">)</span><span class="pln"> </span><span class="typ">Gear</span><span class="pun">&gt;</span><span class="pln"> gearBox</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setGearBox</span><span class="pun">(</span><span class="typ">GearBox</span><span class="pun">&lt;</span><span class="typ">Gear</span><span class="pun">&gt;</span><span class="pln"> gearBox</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">gearBox </span><span class="pun">=</span><span class="pln"> gearBox</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">custom</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GearBox</span><span class="pun">&lt;</span><span class="pln">T </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Gear</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> T gear</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">GearBox</span><span class="pun">(</span><span class="pln">T gear</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">gear </span><span class="pun">=</span><span class="pln"> gear</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Gear</span><span class="pln"> getGear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">gear</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">custom</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Gear</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> torque</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Gear</span><span class="pun">(</span><span class="typ">Integer</span><span class="pln"> torque</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">torque </span><span class="pun">=</span><span class="pln"> torque</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Integer</span><span class="pln"> getTorque</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> torque</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">AcmeGear</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Gear</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">AcmeGear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">super</span><span class="pun">(</span><span class="pln"> </span><span class="lit">60</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">custom</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">GearBoxValueExtractor</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ValueExtractor</span><span class="pun">&lt;</span><span class="typ">GearBox</span><span class="pun">&lt;</span><span class="lit">@ExtractedValue</span><span class="pln"> </span><span class="pun">?&gt;&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> extractValues</span><span class="pun">(</span><span class="typ">GearBox</span><span class="pun">&lt;</span><span class="lit">@ExtractedValue</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln"> originalValue</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ValueExtractor</span><span class="pun">.</span><span class="typ">ValueReceiver</span><span class="pln"> receiver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        receiver</span><span class="pun">.</span><span class="pln">value</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">getGear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">();</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setGearBox</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GearBox</span><span class="pun">&lt;&gt;(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Gear</span><span class="pun">.</span><span class="typ">AcmeGear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constraintViolation </span><span class="pun">=</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"Gear is not providing enough torque."</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"gearBox"</span><span class="pun">,</span><span class="pln">
        constraintViolation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_nested_container_elements"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_nested_container_elements"></a>2.1.3.6. Nested container elements</h5>
<div class="paragraph">
<p>Constraints are also supported on nested container elements.</p>
</div>
<div class="paragraph">
<p>When validating a <code>Car</code> object as presented in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-container-element-nested">Example 2.8, “Constraints on nested container elements”</a>, both the <code>@NotNull</code>
constraints on <code>Part</code> and <code>Manufacturer</code> will be enforced.</p>
</div>
<div id="example-container-element-nested" class="exampleblock">
<div class="title">Example 2.8: Constraints on nested container elements</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">.</span><span class="pln">nested</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">HashMap</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">constraints</span><span class="pun">.</span><span class="typ">NotNull</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Part</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Manufacturer</span><span class="pun">&gt;&gt;</span><span class="pln"> partManufacturers </span><span class="pun">=</span><span class="pln">
            </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashMap</span><span class="pun">&lt;&gt;();</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="validator-usingvalidator-classlevel"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-usingvalidator-classlevel"></a>2.1.4. Class-level constraints</h4>
<div class="paragraph">
<p>Last but not least, a constraint can also be placed on the class level. In this case not a single
property is subject of the validation but the complete object. Class-level constraints are useful if
the validation depends on a correlation between several properties of an object.</p>
</div>
<div class="paragraph">
<p>The <code>Car</code> class in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-class-level">Example 2.9, “Class-level constraint”</a> has the two attributes <code>seatCount</code> and <code>passengers</code> and it
should be ensured that the list of passengers does not have more entries than available seats. For
that purpose the <code>@ValidPassengerCount</code> constraint is added on the class level. The validator of that
constraint has access to the complete <code>Car</code> object, allowing to compare the numbers of seats and
passengers.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-class-level-constraints">Section 6.2, “Class-level constraints”</a> to learn in detail how to implement this custom
constraint.</p>
</div>
<div id="example-class-level" class="exampleblock">
<div class="title">Example 2.9: Class-level constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">classlevel</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ValidPassengerCount</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> passengers</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="section-constraint-inheritance"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-inheritance"></a>2.1.5. Constraint inheritance</h4>
<div class="paragraph">
<p>When a class implements an interface or extends another class, all constraint annotations declared
on the super-type apply in the same manner as the constraints specified on the class itself. To make
things clearer let’s have a look at the following example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 2.10: Constraint inheritance</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getManufacturer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> rentalStation</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getRentalStation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> rentalStation</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here the class <code>RentalCar</code> is a subclass of <code>Car</code> and adds the property <code>rentalStation</code>. If an instance of
<code>RentalCar</code> is validated, not only the <code>@NotNull</code> constraint on <code>rentalStation</code> is evaluated, but also the
constraint on <code>manufacturer</code> from the parent class.</p>
</div>
<div class="paragraph">
<p>The same would be true, if <code>Car</code> was not a superclass but an interface implemented by <code>RentalCar</code>.</p>
</div>
<div class="paragraph">
<p>Constraint annotations are aggregated if methods are overridden. So if <code>RentalCar</code> overrode the
<code>getManufacturer()</code> method from <code>Car</code>, any constraints annotated at the overriding method would be
evaluated in addition to the <code>@NotNull</code> constraint from the superclass.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-object-graph-validation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-object-graph-validation"></a>2.1.6. Object graphs</h4>
<div class="paragraph">
<p>The Jakarta Bean Validation API does not only allow to validate single class instances but also complete
object graphs (cascaded validation). To do so, just annotate a field or property representing a
reference to another object with <code>@Valid</code> as demonstrated in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cascaded-validation">Example 2.11, “Cascaded validation”</a>.</p>
</div>
<div id="example-cascaded-validation" class="exampleblock">
<div class="title">Example 2.11: Cascaded validation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">objectgraph</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">objectgraph</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If an instance of <code>Car</code> is validated, the referenced <code>Person</code> object will be validated as well, as the
<code>driver</code> field is annotated with <code>@Valid</code>. Therefore the validation of a <code>Car</code> will fail if the <code>name</code> field
of the referenced <code>Person</code> instance is <code>null</code>.</p>
</div>
<div class="paragraph">
<p>The validation of object graphs is recursive, i.e. if a reference marked for cascaded validation
points to an object which itself has properties annotated with <code>@Valid</code>, these references will be
followed up by the validation engine as well. The validation engine will ensure that no infinite
loops occur during cascaded validation, for example if two objects hold references to each other.</p>
</div>
<div class="paragraph">
<p>Note that <code>null</code> values are getting ignored during cascaded validation.</p>
</div>
<div class="paragraph">
<p>As constraints, object graph validation also works for container elements. That means any type argument
of a container can be annotated with <code>@Valid</code>, which will cause each contained element to be validated when the
parent object is validated.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cascaded validation is also supported for nested container elements.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="example-cascaded-validation-list" class="exampleblock">
<div class="title">Example 2.12: Cascaded validation of containers</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">objectgraph</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="lit">@Valid</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> passengers </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;();</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="lit">@Valid</span><span class="pln"> </span><span class="typ">Part</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="lit">@Valid</span><span class="pln"> </span><span class="typ">Manufacturer</span><span class="pun">&gt;&gt;</span><span class="pln"> partManufacturers </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">HashMap</span><span class="pun">&lt;&gt;();</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">objectgraph</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Part</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter02</span><span class="pun">.</span><span class="pln">objectgraph</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Manufacturer</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When validating an instance of the <code>Car</code> class shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cascaded-validation-list">Example 2.12, “Cascaded validation of containers”</a>, a
<code>ConstraintViolation</code> will be created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if any of the <code>Person</code> objects contained in the passengers list has a <code>null</code> name;</p>
</li>
<li>
<p>if any of the <code>Part</code> objects contained in the map keys has a <code>null</code> name;</p>
</li>
<li>
<p>if any of the <code>Manufacturer</code> objects contained in the list nested in the map values
has a <code>null</code> name.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In versions prior to 6, Hibernate Validator supported cascaded validation for a subset of container elements
and it was implemented at the container level (e.g. you would use <code>@Valid private List&lt;Person&gt;</code> to enable
cascaded validation for <code>Person</code>).</p>
</div>
<div class="paragraph">
<p>This is still supported but is not recommended. Please use container element level <code>@Valid</code> annotations instead
as it is more expressive.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-validating-bean-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validating-bean-constraints"></a>2.2. Validating bean constraints</h3>
<div class="paragraph">
<p>The <code>Validator</code> interface is the most important object in Jakarta Bean Validation. The next section shows how
to obtain a <code>Validator</code> instance. Afterwards you’ll learn how to use the different methods of the
<code>Validator</code> interface.</p>
</div>
<div class="sect3">
<h4 id="section-obtaining-validator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-obtaining-validator"></a>2.2.1. Obtaining a <code>Validator</code> instance</h4>
<div class="paragraph">
<p>The first step towards validating an entity instance is to get hold of a <code>Validator</code> instance. The
road to this instance leads via the <code>Validation</code> class and a <code>ValidatorFactory</code>. The easiest way is to
use the static method <code>Validation#buildDefaultValidatorFactory()</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 2.13: <code>Validation#buildDefaultValidatorFactory()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> factory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">buildDefaultValidatorFactory</span><span class="pun">();</span><span class="pln">
validator </span><span class="pun">=</span><span class="pln"> factory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This bootstraps a validator in the default configuration. Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bootstrapping">Chapter 9, <em>Bootstrapping</em></a> to
learn more about the different bootstrapping methods and how to obtain a specifically configured
<code>Validator</code> instance.</p>
</div>
</div>
<div class="sect3">
<h4 id="_validator_methods"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_validator_methods"></a>2.2.2. Validator methods</h4>
<div class="paragraph">
<p>The <code>Validator</code> interface contains three methods that can be used to either validate entire entities
or just single properties of the entity.</p>
</div>
<div class="paragraph">
<p>All three methods return a <code>Set&lt;ConstraintViolation&gt;</code>. The set is empty, if the validation succeeds.
Otherwise a <code>ConstraintViolation</code> instance is added for each violated constraint.</p>
</div>
<div class="paragraph">
<p>All the validation methods have a var-args parameter which can be used to specify which validation
groups shall be considered when performing the validation. If the parameter is not specified, the
default validation group (<code>javax.validation.groups.Default</code>) is used. The topic of validation groups
is discussed in detail in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-groups">Chapter 5, <em>Grouping constraints</em></a>.</p>
</div>
<div class="sect4">
<h5 id="_code_validator_validate_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_validator_validate_code"></a>2.2.2.1. <code>Validator#validate()</code></h5>
<div class="paragraph">
<p>Use the <code>validate()</code> method to perform validation of all constraints of a given bean.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-validator-validate">Example 2.14, “Using <code>Validator#validate()</code>”</a> shows the validation of an instance of the <code>Car</code> class from
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-property-level">Example 2.2, “Property-level constraints”</a> which fails to satisfy the <code>@NotNull</code> constraint on the <code>manufacturer</code>
property. The validation call therefore returns one <code>ConstraintViolation</code> object.</p>
</div>
<div id="example-validator-validate" class="exampleblock">
<div class="title">Example 2.14: Using <code>Validator#validate()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"must not be null"</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_code_validator_validateproperty_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_validator_validateproperty_code"></a>2.2.2.2. <code>Validator#validateProperty()</code></h5>
<div class="paragraph">
<p>With help of the <code>validateProperty()</code> you can validate a single named property of a given object. The
property name is the JavaBeans property name.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2.15: Using <code>Validator#validateProperty()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validateProperty</span><span class="pun">(</span><span class="pln">
        car</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"manufacturer"</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"must not be null"</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_code_validator_validatevalue_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_validator_validatevalue_code"></a>2.2.2.3. <code>Validator#validateValue()</code></h5>
<div class="paragraph">
<p>By using the <code>validateValue()</code> method you can check whether a single property of a given class can be
validated successfully, if the property had the specified value:</p>
</div>
<div class="exampleblock">
<div class="title">Example 2.16: Using <code>Validator#validateValue()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validateValue</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"manufacturer"</span><span class="pun">,</span><span class="pln">
        </span><span class="kwd">null</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"must not be null"</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>@Valid</code> is not honored by <code>validateProperty()</code> or <code>validateValue()</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><code>Validator#validateProperty()</code> is for example used in the integration of Jakarta Bean Validation into JSF 2
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-presentation-layer">Section 11.2, “JSF &amp; Seam”</a>) to perform a validation of the values entered into a form
before they are propagated to the model.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="section-constraint-violation-methods"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-violation-methods"></a>2.2.3. <code>ConstraintViolation</code></h4>
<div class="sect4">
<h5 id="_code_constraintviolation_code_methods"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_constraintviolation_code_methods"></a>2.2.3.1. <code>ConstraintViolation</code> methods</h5>
<div class="paragraph">
<p>Now it is time to have a closer look at what a <code>ConstraintViolation</code> is.
Using the different methods of <code>ConstraintViolation</code> a lot of useful information about the cause of the validation failure can be determined.
The following gives an overview of these methods.
The values under "Example" column refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-validator-validate">Example 2.14, “Using <code>Validator#validate()</code>”</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>getMessage()</code></dt>
<dd>
<p>The interpolated error message</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p>"must not be null"</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>getMessageTemplate()</code></dt>
<dd>
<p>The non-interpolated error message</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p>"{…​ NotNull.message}"</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>getRootBean()</code></dt>
<dd>
<p>The root bean being validated</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p>car</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>getRootBeanClass()</code></dt>
<dd>
<p>The class of the root bean being validated</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>Car.class</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>getLeafBean()</code></dt>
<dd>
<p>If a bean constraint, the bean instance the constraint is
applied on; if a property constraint, the bean instance hosting
the property the constraint is applied on</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>car</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>getPropertyPath()</code></dt>
<dd>
<p>The property path to the validated value from root bean</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p>contains one node with kind <code>PROPERTY</code> and name "manufacturer"</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>getInvalidValue()</code></dt>
<dd>
<p>The value failing to pass the constraint</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>null</code></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>getConstraintDescriptor()</code></dt>
<dd>
<p>Constraint metadata reported to fail</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p>descriptor for <code>@NotNull</code></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_exploiting_the_property_path"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_exploiting_the_property_path"></a>2.2.3.2. Exploiting the property path</h5>
<div class="paragraph">
<p>To determine the element that triggered the violation, you need to exploit the result of the <code>getPropertyPath()</code>
method.</p>
</div>
<div class="paragraph">
<p>The returned <code>Path</code> is composed of <code>Node</code>s describing the path to the element.</p>
</div>
<div class="paragraph">
<p>More information about the structure of the <code>Path</code> and the various types of <code>Node</code>s can be found in
<a href="http://beanvalidation.org/2.0/spec/#validationapi-constraintviolation">the <code>ConstraintViolation</code> section</a> of the
Jakarta Bean Validation specification.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-builtin-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints"></a>2.3. Built-in constraints</h3>
<div class="paragraph">
<p>Hibernate Validator comprises a basic set of commonly used constraints. These are foremost the
constraints defined by the Jakarta Bean Validation specification (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-spec">Section 2.3.1, “Jakarta Bean Validation constraints”</a>).
Additionally, Hibernate Validator provides useful custom constraints (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints">Section 2.3.2, “Additional constraints”</a>).</p>
</div>
<div class="sect3">
<h4 id="validator-defineconstraints-spec"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-spec"></a>2.3.1. Jakarta Bean Validation constraints</h4>
<div class="paragraph">
<p>Below you can find a list of all constraints specified in the Jakarta Bean Validation API.
All these constraints apply to the field/property level, there are no class-level constraints defined in the Jakarta Bean Validation specification.
If you are using the Hibernate object-relational mapper, some of the constraints are taken into account when creating the DDL for your model (see "Hibernate metadata impact").</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Hibernate Validator allows some constraints to be applied to more data types than required by the
Jakarta Bean Validation specification (e.g. <code>@Max</code> can be applied to strings). Relying on this feature can
impact portability of your application between Jakarta Bean Validation providers.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>@AssertFalse</code></dt>
<dd>
<p>Checks that the annotated element is false</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>Boolean</code>, <code>boolean</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@AssertTrue</code></dt>
<dd>
<p>Checks that the annotated element is true</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>Boolean</code>, <code>boolean</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@DecimalMax(value=, inclusive=)</code></dt>
<dd>
<p>Checks whether the annotated value is less than the specified maximum, when <code>inclusive</code>=false. Otherwise whether the value is less than or equal to the specified maximum. The parameter value is the string representation of the max value according to the <code>BigDecimal</code> string representation.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>CharSequence</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code> (if the <a href="https://jcp.org/en/jsr/detail?id=354">JSR 354 API</a> and an implementation is on the class path)</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@DecimalMin(value=, inclusive=)</code></dt>
<dd>
<p>Checks whether the annotated value is larger than the specified minimum, when <code>inclusive</code>=false. Otherwise whether the value is larger than or equal to the specified minimum. The parameter value is the string representation of the min value according to the <code>BigDecimal</code> string representation.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>CharSequence</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Digits(integer=, fraction=)</code></dt>
<dd>
<p>Checks whether the annotated value is a number having up to <code>integer</code> digits and <code>fraction</code> fractional digits</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p>BigDecimal, <code>BigInteger</code>, <code>CharSequence</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>Defines column precision and scale</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Email</code></dt>
<dd>
<p>Checks whether the specified character sequence is a valid email address. The optional parameters <code>regexp</code> and <code>flags</code> allow to specify an additional regular expression (including regular expression flags) which the email must match.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Future</code></dt>
<dd>
<p>Checks whether the annotated date is in the future</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>java.util.Date</code>, <code>java.util.Calendar</code>, <code>java.time.Instant</code>, <code>java.time.LocalDate</code>, <code>java.time.LocalDateTime</code>, <code>java.time.LocalTime</code>, <code>java.time.MonthDay</code>, <code>java.time.OffsetDateTime</code>, <code>java.time.OffsetTime</code>, <code>java.time.Year</code>, <code>java.time.YearMonth</code>, <code>java.time.ZonedDateTime</code>, <code>java.time.chrono.HijrahDate</code>, <code>java.time.chrono.JapaneseDate</code>, <code>java.time.chrono.MinguoDate</code>, <code>java.time.chrono.ThaiBuddhistDate</code>; additionally supported by HV, if the <a href="http://www.joda.org/joda-time/">Joda Time</a> date/time API is on the classpath: any implementations of <code>ReadablePartial</code> and <code>ReadableInstant</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@FutureOrPresent</code></dt>
<dd>
<p>Checks whether the annotated date is in the present or in the future</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>java.util.Date</code>, <code>java.util.Calendar</code>, <code>java.time.Instant</code>, <code>java.time.LocalDate</code>, <code>java.time.LocalDateTime</code>, <code>java.time.LocalTime</code>, <code>java.time.MonthDay</code>, <code>java.time.OffsetDateTime</code>, <code>java.time.OffsetTime</code>, <code>java.time.Year</code>, <code>java.time.YearMonth</code>, <code>java.time.ZonedDateTime</code>, <code>java.time.chrono.HijrahDate</code>, <code>java.time.chrono.JapaneseDate</code>, <code>java.time.chrono.MinguoDate</code>, <code>java.time.chrono.ThaiBuddhistDate</code>; additionally supported by HV, if the <a href="http://www.joda.org/joda-time/">Joda Time</a> date/time API is on the classpath: any implementations of <code>ReadablePartial</code> and <code>ReadableInstant</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Max(value=)</code></dt>
<dd>
<p>Checks whether the annotated value is less than or equal to the specified maximum</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>CharSequence</code> (the numeric value represented by the character sequence is evaluated), any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>Adds a check constraint on the column</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Min(value=)</code></dt>
<dd>
<p>Checks whether the annotated value is higher than or equal to the specified minimum</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>CharSequence</code> (the numeric value represented by the character sequence is evaluated), any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>Adds a check constraint on the column</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@NotBlank</code></dt>
<dd>
<p>Checks that the annotated character sequence is not null and the trimmed length is greater than 0. The difference to <code>@NotEmpty</code> is that this constraint can only be applied on character sequences and that trailing white-spaces are ignored.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@NotEmpty</code></dt>
<dd>
<p>Checks whether the annotated element is not null nor empty</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code>, <code>Collection</code>, <code>Map</code> and arrays</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@NotNull</code></dt>
<dd>
<p>Checks that the annotated value is not <code>null</code></p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p>Any type</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>Column(s) are not nullable</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Negative</code></dt>
<dd>
<p>Checks if the element is strictly negative. Zero values are considered invalid.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>CharSequence</code> (the numeric value represented by the character sequence is evaluated), any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@NegativeOrZero</code></dt>
<dd>
<p>Checks if the element is negative or zero.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>CharSequence</code> (the numeric value represented by the character sequence is evaluated), any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Null</code></dt>
<dd>
<p>Checks that the annotated value is <code>null</code></p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p>Any type</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Past</code></dt>
<dd>
<p>Checks whether the annotated date is in the past</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>java.util.Date</code>,<code>java.util.Calendar</code>, <code>java.time.Instant</code>, <code>java.time.LocalDate</code>, <code>java.time.LocalDateTime</code>, <code>java.time.LocalTime</code>, <code>java.time.MonthDay</code>, <code>java.time.OffsetDateTime</code>, <code>java.time.OffsetTime</code>, <code>java.time.Year</code>, <code>java.time.YearMonth</code>, <code>java.time.ZonedDateTime</code>, <code>java.time.chrono.HijrahDate</code>, <code>java.time.chrono.JapaneseDate</code>, <code>java.time.chrono.MinguoDate</code>, <code>java.time.chrono.ThaiBuddhistDate</code>; Additionally supported by HV, if the <a href="http://www.joda.org/joda-time/">Joda Time</a> date/time API is on the classpath: any implementations of <code>ReadablePartial</code> and <code>ReadableInstant</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@PastOrPresent</code></dt>
<dd>
<p>Checks whether the annotated date is in the past or in the present</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>java.util.Date</code>,<code>java.util.Calendar</code>, <code>java.time.Instant</code>, <code>java.time.LocalDate</code>, <code>java.time.LocalDateTime</code>, <code>java.time.LocalTime</code>, <code>java.time.MonthDay</code>, <code>java.time.OffsetDateTime</code>, <code>java.time.OffsetTime</code>, <code>java.time.Year</code>, <code>java.time.YearMonth</code>, <code>java.time.ZonedDateTime</code>, <code>java.time.chrono.HijrahDate</code>, <code>java.time.chrono.JapaneseDate</code>, <code>java.time.chrono.MinguoDate</code>, <code>java.time.chrono.ThaiBuddhistDate</code>; Additionally supported by HV, if the <a href="http://www.joda.org/joda-time/">Joda Time</a> date/time API is on the classpath: any implementations of <code>ReadablePartial</code> and <code>ReadableInstant</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Pattern(regex=, flags=)</code></dt>
<dd>
<p>Checks if the annotated string matches the regular expression <code>regex</code> considering the given flag <code>match</code></p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Positive</code></dt>
<dd>
<p>Checks if the element is strictly positive. Zero values are considered invalid.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>CharSequence</code> (the numeric value represented by the character sequence is evaluated), any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@PositiveOrZero</code></dt>
<dd>
<p>Checks if the element is positive or zero.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types; additionally supported by HV: any sub-type of <code>CharSequence</code> (the numeric value represented by the character sequence is evaluated), any sub-type of <code>Number</code> and <code>javax.money.MonetaryAmount</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Size(min=, max=)</code></dt>
<dd>
<p>Checks if the annotated element’s size is between <code>min</code> and <code>max</code> (inclusive)</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code>, <code>Collection</code>, <code>Map</code> and arrays</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>Column length will be set to <code>max</code></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On top of the parameters listed above each constraint has the parameters
message, groups and payload. This is a requirement of the Jakarta Bean Validation specification.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="validator-defineconstraints-hv-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints"></a>2.3.2. Additional constraints</h4>
<div class="paragraph">
<p>In addition to the constraints defined by the Jakarta Bean Validation API, Hibernate Validator provides several useful custom constraints which are listed below.
With one exception also these constraints apply to the field/property level, only <code>@ScriptAssert</code> is a class-level constraint.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>@CreditCardNumber(ignoreNonDigitCharacters=)</code></dt>
<dd>
<p>Checks that the annotated character sequence passes the Luhn checksum test. Note, this validation aims to check for user mistakes, not credit card validity! See also <a href="http://www.dirigodev.com/blog/ecommerce/anatomy-of-a-credit-card-number/">Anatomy of a credit card number</a>. <code>ignoreNonDigitCharacters</code> allows to ignore non digit characters. The default is <code>false</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Currency(value=)</code></dt>
<dd>
<p>Checks that the currency unit of the annotated <code>javax.money.MonetaryAmount</code> is part of the specified currency units.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p>any sub-type of <code>javax.money.MonetaryAmount</code> (if the <a href="https://jcp.org/en/jsr/detail?id=354">JSR 354 API</a> and an implementation is on the class path)</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@DurationMax(days=, hours=, minutes=, seconds=, millis=, nanos=, inclusive=)</code></dt>
<dd>
<p>Checks that annotated <code>java.time.Duration</code> element is not greater than the one constructed from annotation parameters. Equality is allowed if <code>inclusive</code> flag is set to <code>true</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>java.time.Duration</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@DurationMin(days=, hours=, minutes=, seconds=, millis=, nanos=, inclusive=)</code></dt>
<dd>
<p>Checks that annotated <code>java.time.Duration</code> element is not less than the one constructed from annotation parameters. Equality is allowed if <code>inclusive</code> flag is set to <code>true</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>java.time.Duration</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@EAN</code></dt>
<dd>
<p>Checks that the annotated character sequence is a valid <a href="http://en.wikipedia.org/wiki/International_Article_Number_%28EAN%29">EAN</a> barcode. type determines the type of barcode. The default is EAN-13.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@ISBN</code></dt>
<dd>
<p>Checks that the annotated character sequence is a valid <a href="https://en.wikipedia.org/wiki/International_Standard_Book_Number">ISBN</a>. <code>type</code> determines the type of ISBN. The default is ISBN-13.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Length(min=, max=)</code></dt>
<dd>
<p>Validates that the annotated character sequence is between <code>min</code> and <code>max</code> included</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>Column length will be set to max</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@CodePointLength(min=, max=, normalizationStrategy=)</code></dt>
<dd>
<p>Validates that code point length of the annotated character sequence is between <code>min</code> and <code>max</code> included. Validates normalized value if <code>normalizationStrategy</code> is set.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@LuhnCheck(startIndex= , endIndex=, checkDigitIndex=, ignoreNonDigitCharacters=)</code></dt>
<dd>
<p>Checks that the digits within the annotated character sequence pass the Luhn checksum algorithm (see also <a href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn algorithm</a>). <code>startIndex</code> and <code>endIndex</code> allow to only run the algorithm on the specified sub-string. <code>checkDigitIndex</code> allows to use an arbitrary digit within the character sequence as the check digit. If not specified it is assumed that the check digit is part of the specified range. Last but not least, <code>ignoreNonDigitCharacters</code> allows to ignore non digit characters.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Mod10Check(multiplier=, weight=, startIndex=, endIndex=, checkDigitIndex=, ignoreNonDigitCharacters=)</code></dt>
<dd>
<p>Checks that the digits within the annotated character sequence pass the generic mod 10 checksum algorithm. <code>multiplier</code> determines the multiplier for odd numbers (defaults to 3), <code>weight</code> the weight for even numbers (defaults to 1). <code>startIndex</code> and <code>endIndex</code> allow to only run the algorithm on the specified sub-string. <code>checkDigitIndex</code> allows to use an arbitrary digit within the character sequence as the check digit. If not specified it is assumed that the check digit is part of the specified range. Last but not least, <code>ignoreNonDigitCharacters</code> allows to ignore non digit characters.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Mod11Check(threshold=, startIndex=, endIndex=, checkDigitIndex=, ignoreNonDigitCharacters=, treatCheck10As=, treatCheck11As=)</code></dt>
<dd>
<p>Checks that the digits within the annotated character sequence pass the mod 11 checksum algorithm. <code>threshold</code> specifies the threshold for the mod11 multiplier growth; if no value is specified the multiplier will grow indefinitely. <code>treatCheck10As</code> and <code>treatCheck11As</code> specify the check digits to be used when the mod 11 checksum equals 10 or 11, respectively. Default to X and 0, respectively. <code>startIndex</code>, <code>endIndex</code> <code>checkDigitIndex</code> and <code>ignoreNonDigitCharacters</code> carry the same semantics as in <code>@Mod10Check</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@Range(min=, max=)</code></dt>
<dd>
<p>Checks whether the annotated value lies between (inclusive) the specified minimum and maximum</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>BigDecimal</code>, <code>BigInteger</code>, <code>CharSequence</code>, <code>byte</code>, <code>short</code>, <code>int</code>, <code>long</code> and the respective wrappers of the primitive types</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@SafeHtml(whitelistType= , additionalTags=, additionalTagsWithAttributes=, baseURI=)</code></dt>
<dd>
<p>Checks whether the annotated value contains potentially malicious fragments such as <code>&lt;script/&gt;</code>. In order to use this constraint, the <a href="http://jsoup.org/">jsoup</a> library must be part of the class path. With the <code>whitelistType</code> attribute a predefined whitelist type can be chosen which can be refined via <code>additionalTags</code> or <code>additionalTagsWithAttributes</code>. The former allows to add tags without any attributes, whereas the latter allows to specify tags and optionally allowed attributes as well as accepted protocols for the attributes using the annotation <code>@SafeHtml.Tag</code>.
In addition, <code>baseURI</code> allows to specify the base URI used to resolve relative URIs.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@ScriptAssert(lang=, script=, alias=, reportOn=)</code></dt>
<dd>
<p>Checks whether the given script can successfully be evaluated against the annotated element. In order to use this constraint, an implementation of the Java Scripting API as defined by JSR 223 ("Scripting for the Java<sup>TM</sup> Platform") must be a part of the class path. The expressions to be evaluated can be written in any scripting or expression language, for which a JSR 223 compatible engine can be found in the class path. Even though this is a class-level constraint, one can use the <code>reportOn</code> attribute to report a constraint violation on a specific property rather than the whole object.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p>Any type</p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@UniqueElements</code></dt>
<dd>
<p>Checks that the annotated collection only contains unique elements. The equality is determined using the <code>equals()</code> method. The default message does not include the list of duplicate elements but you can include it by overriding the message and using the <code>{duplicates}</code> message parameter. The list of duplicate elements is also included in the dynamic payload of the constraint violation.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>Collection</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@URL(protocol=, host=, port=, regexp=, flags=)</code></dt>
<dd>
<p>Checks if the annotated character sequence is a valid URL according to RFC2396. If any of the optional parameters <code>protocol</code>, <code>host</code> or <code>port</code> are specified, the corresponding URL fragments must match the specified values. The optional parameters <code>regexp</code> and <code>flags</code> allow to specify an additional regular expression (including regular expression flags) which the URL must match. Per default this constraint used the <code>java.net.URL</code> constructor to verify whether a given string represents a valid URL. A regular expression based version is also available - <code>RegexpURLValidator</code> - which can be configured via XML (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-mapping-xml-constraints">Section 8.2, “Mapping constraints via <code>constraint-mappings</code>”</a>) or the programmatic API (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-constraint-definition">Section 12.14.2, “Adding constraint definitions programmatically”</a>).</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_country_specific_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_country_specific_constraints"></a>2.3.2.1. Country specific constraints</h5>
<div class="paragraph">
<p>Hibernate Validator offers also some country specific constraints, e.g. for the validation of social
security numbers.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you have to implement a country specific constraint, consider making it a contribution to
Hibernate Validator!</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>@CNPJ</code></dt>
<dd>
<p>Checks that the annotated character sequence represents a Brazilian corporate tax payer registry number (Cadastro de Pessoa Jurídica)</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
<dt class="hdlist1">Country</dt>
<dd>
<p>Brazil</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@CPF</code></dt>
<dd>
<p>Checks that the annotated character sequence represents a Brazilian individual taxpayer registry number (Cadastro de Pessoa Física)</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
<dt class="hdlist1">Country</dt>
<dd>
<p>Brazil</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@TituloEleitoral</code></dt>
<dd>
<p>Checks that the annotated character sequence represents a Brazilian voter ID card number (<a href="http://www.exceldoseujeito.com.br/2008/12/19/validar-cpf-cnpj-e-titulo-de-eleitor-parte-ii/">Título Eleitoral</a>)</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
<dt class="hdlist1">Country</dt>
<dd>
<p>Brazil</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@NIP</code></dt>
<dd>
<p>Checks that the annotated character sequence represents a Polish VAT identification number (<a href="https://pl.wikipedia.org/wiki/NIP">NIP</a>)</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
<dt class="hdlist1">Country</dt>
<dd>
<p>Poland</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@PESEL</code></dt>
<dd>
<p>Checks that the annotated character sequence represents a Polish national identification number (<a href="https://pl.wikipedia.org/wiki/PESEL">PESEL</a>)</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
<dt class="hdlist1">Country</dt>
<dd>
<p>Poland</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>@REGON</code></dt>
<dd>
<p>Checks that the annotated character sequence represents a Polish taxpayer identification number (<a href="https://pl.wikipedia.org/wiki/REGON">REGON</a>). Can be applied to both 9 and 14 digits versions of REGON</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported data types</dt>
<dd>
<p><code>CharSequence</code></p>
</dd>
<dt class="hdlist1">Hibernate metadata impact</dt>
<dd>
<p>None</p>
</dd>
<dt class="hdlist1">Country</dt>
<dd>
<p>Poland</p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In some cases neither the Jakarta Bean Validation constraints nor the custom constraints provided by
Hibernate Validator will fulfill your requirements. In this case you can easily write your own
constraint. You can find more information in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints">Chapter 6, <em>Creating custom constraints</em></a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter-method-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-method-constraints"></a>3. Declaring and validating method constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As of Bean Validation 1.1, constraints can not only be applied to JavaBeans and their properties,
but also to the parameters and return values of the methods and constructors of any Java type. That
way Jakarta Bean Validation constraints can be used to specify</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the preconditions that must be satisfied by the caller before a method or constructor may be
invoked (by applying constraints to the parameters of an executable)</p>
</li>
<li>
<p>the postconditions that are guaranteed to the caller after a method or constructor invocation
returns (by applying constraints to the return value of an executable)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For the purpose of this reference guide, the term <em>method constraint</em> refers to both, method and
constructor constraints, if not stated otherwise. Occasionally, the term <em>executable</em> is used when
referring to methods and constructors.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>This approach has several advantages over traditional ways of checking the correctness of parameters
and return values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the checks don’t have to be performed manually (e.g. by throwing <code>IllegalArgumentException</code> or
similar), resulting in less code to write and maintain</p>
</li>
<li>
<p>an executable’s pre- and postconditions don’t have to be expressed again in its documentation,
since the constraint annotations will automatically be included in the generated JavaDoc. This
avoids redundancies and reduces the chance of inconsistencies between implementation and
documentation</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In order to make annotations show up in the JavaDoc of annotated elements, the annotation types
themselves must be annotated with the meta annotation @Documented. This is the case for all built-in
constraints and is considered a best practice for any custom constraints.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In the remainder of this chapter you will learn how to declare parameter and return value
constraints and how to validate them using the <code>ExecutableValidator</code> API.</p>
</div>
<div class="sect2">
<h3 id="section-declaring-method-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-declaring-method-constraints"></a>3.1. Declaring method constraints</h3>
<div class="sect3">
<h4 id="_parameter_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_parameter_constraints"></a>3.1.1. Parameter constraints</h4>
<div class="paragraph">
<p>You specify the preconditions of a method or constructor by adding constraint annotations to its
parameters as demonstrated in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-declaring-parameter-constraints">Example 3.1, “Declaring method and constructor parameter constraints”</a>.</p>
</div>
<div id="example-declaring-parameter-constraints" class="exampleblock">
<div class="title">Example 3.1: Declaring method and constructor parameter constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">parameter</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pun">(</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> rentCar</span><span class="pun">(</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Customer</span><span class="pln"> customer</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="lit">@Future</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> startDate</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> durationInDays</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following preconditions are declared here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>name</code> passed to the <code>RentalCar</code> constructor must not be <code>null</code></p>
</li>
<li>
<p>When invoking the <code>rentCar()</code> method, the given <code>customer</code> must not be <code>null</code>, the rental’s start
date must not be <code>null</code> as well as be in the future and finally the rental duration must be at least
one day</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that declaring method or constructor constraints itself does not automatically cause their
validation upon invocation of the executable. Instead, the <code>ExecutableValidator</code> API (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validating-executable-constraints">Section 3.2, “Validating method constraints”</a>) must be used to perform the validation, which is
often done using a method interception facility such as AOP, proxy objects etc.</p>
</div>
<div class="paragraph">
<p>Constraints may only be applied to instance methods, i.e. declaring constraints on static methods is
not supported. Depending on the interception facility you use for triggering method validation,
additional restrictions may apply, e.g. with respect to the visibility of methods supported as
target of interception. Refer to the documentation of the interception technology to find out
whether any such limitations exist.</p>
</div>
<div class="sect4">
<h5 id="_cross_parameter_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_cross_parameter_constraints"></a>3.1.1.1. Cross-parameter constraints</h5>
<div class="paragraph">
<p>Sometimes validation does not only depend on a single parameter but on several or even all
parameters of a method or constructor. This kind of requirement can be fulfilled with help of a
cross-parameter constraint.</p>
</div>
<div class="paragraph">
<p>Cross-parameter constraints can be considered as the method validation equivalent to class-level
constraints. Both can be used to implement validation requirements which are based on several
elements. While class-level constraints apply to several properties of a bean, cross-parameter
constraints apply to several parameters of an executable.</p>
</div>
<div class="paragraph">
<p>In contrast to single-parameter constraints, cross-parameter constraints are declared on the method
or constructor as you can see in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-cross-parameter-constraint">Example 3.2, “Declaring a cross-parameter constraint”</a>. Here the cross-
parameter constraint <code>@LuggageCountMatchesPassengerCount</code> declared on the <code>load()</code> method is used to
ensure that no passenger has more than two pieces of luggage.</p>
</div>
<div id="example-using-cross-parameter-constraint" class="exampleblock">
<div class="title">Example 3.2: Declaring a cross-parameter constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">crossparameter</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@LuggageCountMatchesPassengerCount</span><span class="pun">(</span><span class="pln">piecesOfLuggagePerPassenger </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> load</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> passengers</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">PieceOfLuggage</span><span class="pun">&gt;</span><span class="pln"> luggage</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As you will learn in the next section, return value constraints are also declared on the method
level. In order to distinguish cross-parameter constraints from return value constraints, the
constraint target is configured in the <code>ConstraintValidator</code> implementation using the
<code>@SupportedValidationTarget</code> annotation. You can find out about the details in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-cross-parameter-constraints">Section 6.3, “Cross-parameter constraints”</a> which shows how to implement your own cross-parameter constraint.</p>
</div>
<div class="paragraph">
<p>In some cases a constraint can be applied to an executable’s parameters (i.e. it is a cross-
parameter constraint), but also to the return value. One example for this are custom constraints
which allow to specify validation rules using expression or script languages.</p>
</div>
<div class="paragraph">
<p>Such constraints must define a member <code>validationAppliesTo()</code> which can be used at declaration time to
specify the constraint target. As shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-specifying-constraint-target">Example 3.3, “Specifying a constraint’s target”</a> you apply the
constraint to an executable’s parameters by specifying
<code>validationAppliesTo = ConstraintTarget.PARAMETERS</code>, while <code>ConstraintTarget.RETURN_VALUE</code> is used
to apply the constraint to the executable return value.</p>
</div>
<div id="example-specifying-constraint-target" class="exampleblock">
<div class="title">Example 3.3: Specifying a constraint’s target</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">crossparameter</span><span class="pun">.</span><span class="pln">constrainttarget</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Garage</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@ELAssert</span><span class="pun">(</span><span class="pln">expression </span><span class="pun">=</span><span class="pln"> </span><span class="str">"..."</span><span class="pun">,</span><span class="pln"> validationAppliesTo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ConstraintTarget</span><span class="pun">.</span><span class="pln">PARAMETERS</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> buildCar</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Part</span><span class="pun">&gt;</span><span class="pln"> parts</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@ELAssert</span><span class="pun">(</span><span class="pln">expression </span><span class="pun">=</span><span class="pln"> </span><span class="str">"..."</span><span class="pun">,</span><span class="pln"> validationAppliesTo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ConstraintTarget</span><span class="pun">.</span><span class="pln">RETURN_VALUE</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> paintCar</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> color</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Although such a constraint is applicable to the parameters and return value of an executable, the
target can often be inferred automatically. This is the case, if the constraint is declared on</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a void method with parameters (the constraint applies to the parameters)</p>
</li>
<li>
<p>an executable with return value but no parameters (the constraint applies to the return value)</p>
</li>
<li>
<p>neither a method nor a constructor, but a field, parameter etc. (the constraint applies to the
annotated element)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In these situations you don’t have to specify the constraint target. It is still recommended to do
so if it increases readability of the source code. If the constraint target is not specified in
situations where it can’t be determined automatically, a <code>ConstraintDeclarationException</code> is raised.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_return_value_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_return_value_constraints"></a>3.1.2. Return value constraints</h4>
<div class="paragraph">
<p>The postconditions of a method or constructor are declared by adding constraint annotations to the
executable as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-declaring-return-value-constraints">Example 3.4, “Declaring method and constructor return value constraints”</a>.</p>
</div>
<div id="example-declaring-return-value-constraints" class="exampleblock">
<div class="title">Example 3.4: Declaring method and constructor return value constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">returnvalue</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@ValidRentalStation</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Customer</span><span class="pun">&gt;</span><span class="pln"> getCustomers</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following constraints apply to the executables of <code>RentalStation</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Any newly created <code>RentalStation</code> object must satisfy the <code>@ValidRentalStation</code> constraint</p>
</li>
<li>
<p>The customer list returned by <code>getCustomers()</code> must not be <code>null</code> and must contain at least on element</p>
</li>
<li>
<p>The customer list returned by <code>getCustomers()</code> must no contain <code>null</code> objects</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As you can see in the above example, container element constraints are supported on method return value.
They are also supported on method parameters.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="_cascaded_validation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_cascaded_validation"></a>3.1.3. Cascaded validation</h4>
<div class="paragraph">
<p>Similar to the cascaded validation of JavaBeans properties (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-object-graph-validation">Section 2.1.6, “Object graphs”</a>), the <code>@Valid</code> annotation can be used to mark executable
parameters and return values for cascaded validation. When validating a parameter or return value
annotated with <code>@Valid</code>, the constraints declared on the parameter or return value object are
validated as well.</p>
</div>
<div class="paragraph">
<p>In <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cascaded-executable-validation">Example 3.5, “Marking executable parameters and return values for cascaded validation”</a>, the <code>car</code> parameter of the method <code>Garage#checkCar()</code> as
well as the return value of the <code>Garage</code> constructor are marked for cascaded validation.</p>
</div>
<div id="example-cascaded-executable-validation" class="exampleblock">
<div class="title">Example 3.5: Marking executable parameters and return values for cascaded validation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">cascaded</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Garage</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Garage</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> checkCar</span><span class="pun">(</span><span class="lit">@Valid</span><span class="pln"> </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> car</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">cascaded</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">licensePlate </span><span class="pun">=</span><span class="pln"> licencePlate</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When validating the arguments of the <code>checkCar()</code> method, the constraints on the properties of the
passed <code>Car</code> object are evaluated as well. Similarly, the <code>@NotNull</code> constraint on the name field of
<code>Garage</code> is checked when validating the return value of the <code>Garage</code> constructor.</p>
</div>
<div class="paragraph">
<p>Generally, the cascaded validation works for executables in exactly the same way as it does for
JavaBeans properties.</p>
</div>
<div class="paragraph">
<p>In particular, <code>null</code> values are ignored during cascaded validation (naturally this can’t happen
during constructor return value validation) and cascaded validation is performed recursively, i.e.
if a parameter or return value object which is marked for cascaded validation itself has properties
marked with <code>@Valid</code>, the constraints declared on the referenced elements will be validated as well.</p>
</div>
<div class="paragraph">
<p>Same as for fields and properties, cascaded validation can also be declared on container
elements (e.g. elements of collections, maps or custom containers) of return values and parameters.</p>
</div>
<div class="paragraph">
<p>In this case, each element contained by the container gets validated.
So when validating the arguments of the <code>checkCars()</code> method in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cascaded-executable-validation-container-elements">Example 3.6, “Container elements of method parameter marked for cascaded validation”</a>, each element instance of the passed list
will be validated and a <code>ConstraintViolation</code> created when any of the contained <code>Car</code> instances is invalid.</p>
</div>
<div id="example-cascaded-executable-validation-container-elements" class="exampleblock">
<div class="title">Example 3.6: Container elements of method parameter marked for cascaded validation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">cascaded</span><span class="pun">.</span><span class="pln">containerelement</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Garage</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> checkCars</span><span class="pun">(</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="lit">@Valid</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> cars</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="section-method-constraints-inheritance-hierarchies"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-constraints-inheritance-hierarchies"></a>3.1.4. Method constraints in inheritance hierarchies</h4>
<div class="paragraph">
<p>When declaring method constraints in inheritance hierarchies, it is important to be aware of the
following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The preconditions to be satisfied by the caller of a method may not be strengthened in subtypes</p>
</li>
<li>
<p>The postconditions guaranteed to the caller of a method may not be weakened in subtypes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These rules are motivated by the concept of <em>behavioral subtyping</em> which requires that wherever a
type <code>T</code> is used, also a subtype <code>S</code> of <code>T</code> may be used without altering the program’s behavior.</p>
</div>
<div class="paragraph">
<p>As an example, consider a class invoking a method on an object with the static type <code>T</code>. If the
runtime type of that object was <code>S</code> and <code>S</code> imposed additional preconditions, the client class might
fail to satisfy these preconditions as is not aware of them. The rules of behavioral subtyping are
also known as the <a href="http://en.wikipedia.org/wiki/Liskov_substitution_principle">Liskov
substitution principle</a>.</p>
</div>
<div class="paragraph">
<p>The Jakarta Bean Validation specification implements the first rule by disallowing parameter constraints on
methods which override or implement a method declared in a supertype (superclass or interface).
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-illegal-parameter-constraints">Example 3.7, “Illegal method parameter constraint in subtype”</a> shows a violation of this rule.</p>
</div>
<div id="example-illegal-parameter-constraints" class="exampleblock">
<div class="title">Example 3.7: Illegal method parameter constraint in subtype</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">.</span><span class="pln">parameter</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> drive</span><span class="pun">(</span><span class="lit">@Max</span><span class="pun">(</span><span class="lit">75</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> speedInMph</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">.</span><span class="pln">parameter</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> drive</span><span class="pun">(</span><span class="lit">@Max</span><span class="pun">(</span><span class="lit">55</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> speedInMph</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>@Max</code> constraint on <code>Car#drive()</code> is illegal since this method implements the interface method
<code>Vehicle#drive()</code>. Note that parameter constraints on overriding methods are also disallowed, if the
supertype method itself doesn’t declare any parameter constraints.</p>
</div>
<div class="paragraph">
<p>Furthermore, if a method overrides or implements a method declared in several parallel supertypes
(e.g. two interfaces not extending each other or a class and an interface not implemented by that
class), no parameter constraints may be specified for the method in any of the involved types. The
types in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-illegal-parameter-constraints-parallel-types">Example 3.8, “Illegal method parameter constraint in parallel types of a hierarchy”</a> demonstrate a violation of that
rule. The method <code>RacingCar#drive()</code> overrides <code>Vehicle#drive()</code> as well as <code>Car#drive()</code>.
Therefore the constraint on <code>Vehicle#drive()</code> is illegal.</p>
</div>
<div id="example-illegal-parameter-constraints-parallel-types" class="exampleblock">
<div class="title">Example 3.8: Illegal method parameter constraint in parallel types of a hierarchy</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">.</span><span class="pln">parallel</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> drive</span><span class="pun">(</span><span class="lit">@Max</span><span class="pun">(</span><span class="lit">75</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> speedInMph</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">.</span><span class="pln">parallel</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">void</span><span class="pln"> drive</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> speedInMph</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">.</span><span class="pln">parallel</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RacingCar</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> drive</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> speedInMph</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The previously described restrictions only apply to parameter constraints. In contrast, return value
constraints may be added in methods overriding or implementing any supertype methods.</p>
</div>
<div class="paragraph">
<p>In this case, all the method’s return value constraints apply for the subtype method, i.e. the
constraints declared on the subtype method itself as well as any return value constraints on
overridden/implemented supertype methods. This is legal as putting additional return value
constraints in place may never represent a weakening of the postconditions guaranteed to the caller
of a method.</p>
</div>
<div class="paragraph">
<p>So when validating the return value of the method <code>Car#getPassengers()</code> shown in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-return-value-constraints-in-hierarchy">Example 3.9, “Return value constraints on supertype and subtype method”</a>, the <code>@Size</code> constraint on the method itself as well
as the <code>@NotNull</code> constraint on the implemented interface method <code>Vehicle#getPassengers()</code> apply.</p>
</div>
<div id="example-return-value-constraints-in-hierarchy" class="exampleblock">
<div class="title">Example 3.9: Return value constraints on supertype and subtype method</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">.</span><span class="pln">returnvalue</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> getPassengers</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">inheritance</span><span class="pun">.</span><span class="pln">returnvalue</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> getPassengers</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If the validation engine detects a violation of any of the aforementioned rules, a
<code>ConstraintDeclarationException</code> will be raised.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The rules described in this section only apply to methods but not constructors. By definition,
constructors never override supertype constructors. Therefore, when validating the parameters or the
return value of a constructor invocation only the constraints declared on the constructor itself
apply, but never any constraints declared on supertype constructors.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Enforcement of these rules may be relaxed by setting the configuration parameters contained in
the <code>MethodValidationConfiguration</code> property of the <code>HibernateValidatorConfiguration</code> before creating
the <code>Validator</code> instance. See also <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-validation-prerequisite-relaxation">Section 12.3, “Relaxation of requirements for method validation in class hierarchies”</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-validating-executable-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validating-executable-constraints"></a>3.2. Validating method constraints</h3>
<div class="paragraph">
<p>The validation of method constraints is done using the <code>ExecutableValidator</code> interface.</p>
</div>
<div class="paragraph">
<p>In <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-obtaining-executable-validator">Section 3.2.1, “Obtaining an <code>ExecutableValidator</code> instance”</a> you will learn how to obtain an <code>ExecutableValidator</code>
instance while <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-executable-validator-methods">Section 3.2.2, “<code>ExecutableValidator</code> methods”</a> shows how to use the different methods
offered by this interface.</p>
</div>
<div class="paragraph">
<p>Instead of calling the <code>ExecutableValidator</code> methods directly from within application code, they are
usually invoked via a method interception technology such as AOP, proxy objects, etc. This causes
executable constraints to be validated automatically and transparently upon method or constructor
invocation. Typically a <code>ConstraintViolationException</code> is raised by the integration layer in case any
of the constraints is violated.</p>
</div>
<div class="sect3">
<h4 id="section-obtaining-executable-validator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-obtaining-executable-validator"></a>3.2.1. Obtaining an <code>ExecutableValidator</code> instance</h4>
<div class="paragraph">
<p>You can retrieve an <code>ExecutableValidator</code> instance via <code>Validator#forExecutables()</code> as shown in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-obtaining-executable-validator">Example 3.10, “Obtaining an <code>ExecutableValidator</code> instance”</a>.</p>
</div>
<div id="example-obtaining-executable-validator" class="exampleblock">
<div class="title">Example 3.10: Obtaining an <code>ExecutableValidator</code> instance</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> factory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">buildDefaultValidatorFactory</span><span class="pun">();</span><span class="pln">
executableValidator </span><span class="pun">=</span><span class="pln"> factory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">().</span><span class="pln">forExecutables</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the example the executable validator is retrieved from the default validator factory, but if
required you could also bootstrap a specifically configured factory as described in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bootstrapping">Chapter 9, <em>Bootstrapping</em></a>, for instance in order to use a specific parameter name provider
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-parameter-name-provider">Section 9.2.4, “<code>ParameterNameProvider</code>”</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="section-executable-validator-methods"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-executable-validator-methods"></a>3.2.2. <code>ExecutableValidator</code> methods</h4>
<div class="paragraph">
<p>The <code>ExecutableValidator</code> interface offers altogether four methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>validateParameters()</code> and <code>validateReturnValue()</code> for method validation</p>
</li>
<li>
<p><code>validateConstructorParameters()</code> and <code>validateConstructorReturnValue()</code> for constructor validation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Just as the methods on <code>Validator</code>, all these methods return a <code>Set&lt;ConstraintViolation&gt;</code> which contains
a <code>ConstraintViolation</code> instance for each violated constraint and which is empty if the validation
succeeds. Also all the methods have a var-args groups parameter by which you can pass the validation
groups to be considered for validation.</p>
</div>
<div class="paragraph">
<p>The examples in the following sections are based on the methods on constructors of the <code>Car</code> class
shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-executable-validator-class-car">Example 3.11, “Class <code>Car</code> with constrained methods and constructors”</a>.</p>
</div>
<div id="example-executable-validator-class-car" class="exampleblock">
<div class="title">Example 3.11: Class <code>Car</code> with constrained methods and constructors</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@ValidRacingCar</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> team</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> drive</span><span class="pun">(</span><span class="lit">@Max</span><span class="pun">(</span><span class="lit">75</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> speedInMph</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Passenger</span><span class="pun">&gt;</span><span class="pln"> getPassengers</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">emptyList</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_code_executablevalidator_validateparameters_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_executablevalidator_validateparameters_code"></a>3.2.2.1. <code>ExecutableValidator#validateParameters()</code></h5>
<div class="paragraph">
<p>The method <code>validateParameters()</code> is used to validate the arguments of a method invocation.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-executable-validator-validate-parameters">Example 3.12, “Using <code>ExecutableValidator#validateParameters()</code>”</a> shows an example. The validation results in a
violation of the <code>@Max</code> constraint on the parameter of the <code>drive()</code> method.</p>
</div>
<div id="example-executable-validator-validate-parameters" class="exampleblock">
<div class="title">Example 3.12: Using <code>ExecutableValidator#validateParameters()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Method</span><span class="pln"> method </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getMethod</span><span class="pun">(</span><span class="pln"> </span><span class="str">"drive"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> parameterValues </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">80</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> executableValidator</span><span class="pun">.</span><span class="pln">validateParameters</span><span class="pun">(</span><span class="pln">
        </span><span class="kwd">object</span><span class="pun">,</span><span class="pln">
        method</span><span class="pun">,</span><span class="pln">
        parameterValues
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Annotation</span><span class="pun">&gt;</span><span class="pln"> constraintType </span><span class="pun">=</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getConstraintDescriptor</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">annotationType</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Max</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> constraintType </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that <code>validateParameters()</code> validates all the parameter constraints of a method, i.e. constraints
on individual parameters as well as cross-parameter constraints.</p>
</div>
</div>
<div class="sect4">
<h5 id="_code_executablevalidator_validatereturnvalue_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_executablevalidator_validatereturnvalue_code"></a>3.2.2.2. <code>ExecutableValidator#validateReturnValue()</code></h5>
<div class="paragraph">
<p>Using <code>validateReturnValue()</code> the return value of a method can be validated. The validation in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-executable-validator-validate-return-value">Example 3.13, “Using <code>ExecutableValidator#validateReturnValue()</code>”</a> yields one constraint violation since the
<code>getPassengers()</code> method is expected to return at least one <code>Passenger</code> instance.</p>
</div>
<div id="example-executable-validator-validate-return-value" class="exampleblock">
<div class="title">Example 3.13: Using <code>ExecutableValidator#validateReturnValue()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Method</span><span class="pln"> method </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getMethod</span><span class="pun">(</span><span class="pln"> </span><span class="str">"getPassengers"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Object</span><span class="pln"> returnValue </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.&lt;</span><span class="typ">Passenger</span><span class="pun">&gt;</span><span class="pln">emptyList</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> executableValidator</span><span class="pun">.</span><span class="pln">validateReturnValue</span><span class="pun">(</span><span class="pln">
        </span><span class="kwd">object</span><span class="pun">,</span><span class="pln">
        method</span><span class="pun">,</span><span class="pln">
        returnValue
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Annotation</span><span class="pun">&gt;</span><span class="pln"> constraintType </span><span class="pun">=</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getConstraintDescriptor</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">annotationType</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Size</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> constraintType </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_code_executablevalidator_validateconstructorparameters_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_executablevalidator_validateconstructorparameters_code"></a>3.2.2.3. <code>ExecutableValidator#validateConstructorParameters()</code></h5>
<div class="paragraph">
<p>The arguments of constructor invocations can be validated with <code>validateConstructorParameters()</code> as
shown in method <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-executable-validator-validate-constructor-parameters">Example 3.14, “Using <code>ExecutableValidator#validateConstructorParameters()</code>”</a>. Due to the
<code>@NotNull</code> constraint on the <code>manufacturer</code> parameter, the validation call returns one constraint
violation.</p>
</div>
<div id="example-executable-validator-validate-constructor-parameters" class="exampleblock">
<div class="title">Example 3.14: Using <code>ExecutableValidator#validateConstructorParameters()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Constructor</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constructor </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getConstructor</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> parameterValues </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> executableValidator</span><span class="pun">.</span><span class="pln">validateConstructorParameters</span><span class="pun">(</span><span class="pln">
        constructor</span><span class="pun">,</span><span class="pln">
        parameterValues
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Annotation</span><span class="pun">&gt;</span><span class="pln"> constraintType </span><span class="pun">=</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getConstraintDescriptor</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">annotationType</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">NotNull</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> constraintType </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_code_executablevalidator_validateconstructorreturnvalue_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_executablevalidator_validateconstructorreturnvalue_code"></a>3.2.2.4. <code>ExecutableValidator#validateConstructorReturnValue()</code></h5>
<div class="paragraph">
<p>Finally, by using <code>validateConstructorReturnValue()</code> you can validate a constructor’s return value. In
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-executable-validator-validate-constructor-return-value">Example 3.15, “Using <code>ExecutableValidator#validateConstructorReturnValue()</code>”</a>, <code>validateConstructorReturnValue()</code>
returns one constraint violation, since the <code>Car</code> instance returned by the constructor doesn’t satisfy
the <code>@ValidRacingCar</code> constraint (not shown).</p>
</div>
<div id="example-executable-validator-validate-constructor-return-value" class="exampleblock">
<div class="title">Example 3.15: Using <code>ExecutableValidator#validateConstructorReturnValue()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">//constructor for creating racing cars</span><span class="pln">
</span><span class="typ">Constructor</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constructor </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getConstructor</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Car</span><span class="pln"> createdObject </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> executableValidator</span><span class="pun">.</span><span class="pln">validateConstructorReturnValue</span><span class="pun">(</span><span class="pln">
        constructor</span><span class="pun">,</span><span class="pln">
        createdObject
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Annotation</span><span class="pun">&gt;</span><span class="pln"> constraintType </span><span class="pun">=</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getConstraintDescriptor</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">annotationType</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ValidRacingCar</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> constraintType </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_constraintviolation_code_methods_for_method_validation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_constraintviolation_code_methods_for_method_validation"></a>3.2.3. <code>ConstraintViolation</code> methods for method validation</h4>
<div class="paragraph">
<p>In addition to the methods introduced in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-violation-methods">Section 2.2.3, “<code>ConstraintViolation</code>”</a>,
<code>ConstraintViolation</code> provides two more methods specific to the validation of executable parameters
and return values.</p>
</div>
<div class="paragraph">
<p><code>ConstraintViolation#getExecutableParameters()</code> returns the validated parameter array in case of
method or constructor parameter validation, while <code>ConstraintViolation#getExecutableReturnValue()</code>
provides access to the validated object in case of return value validation.</p>
</div>
<div class="paragraph">
<p>All the other <code>ConstraintViolation</code> methods generally work for method validation in the same way as
for validation of beans. Refer to the
<a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/BeanDescriptor.html">JavaDoc</a>
to learn more about the behavior of the individual methods and their return values during bean and
method validation.</p>
</div>
<div class="paragraph">
<p>Note that <code>getPropertyPath()</code> can be very useful in order to obtain detailed information about the
validated parameter or return value, e.g. for logging purposes. In particular, you can retrieve name
and argument types of the concerned method as well as the index of the concerned parameter from the
path nodes. How this can be done is shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-executable-validation-property-path">Example 3.16, “Retrieving method and parameter information”</a>.</p>
</div>
<div id="example-executable-validation-property-path" class="exampleblock">
<div class="title">Example 3.16: Retrieving method and parameter information</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Method</span><span class="pln"> method </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getMethod</span><span class="pun">(</span><span class="pln"> </span><span class="str">"drive"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> parameterValues </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="lit">80</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> executableValidator</span><span class="pun">.</span><span class="pln">validateParameters</span><span class="pun">(</span><span class="pln">
        </span><span class="kwd">object</span><span class="pun">,</span><span class="pln">
        method</span><span class="pun">,</span><span class="pln">
        parameterValues
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Iterator</span><span class="pun">&lt;</span><span class="typ">Node</span><span class="pun">&gt;</span><span class="pln"> propertyPath </span><span class="pun">=</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">();</span><span class="pln">

</span><span class="typ">MethodNode</span><span class="pln"> methodNode </span><span class="pun">=</span><span class="pln"> propertyPath</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">().</span><span class="kwd">as</span><span class="pun">(</span><span class="pln"> </span><span class="typ">MethodNode</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"drive"</span><span class="pun">,</span><span class="pln"> methodNode</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Arrays</span><span class="pun">.&lt;</span><span class="typ">Class</span><span class="pun">&lt;?&gt;&gt;</span><span class="pln">asList</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">),</span><span class="pln"> methodNode</span><span class="pun">.</span><span class="pln">getParameterTypes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ParameterNode</span><span class="pln"> parameterNode </span><span class="pun">=</span><span class="pln"> propertyPath</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">().</span><span class="kwd">as</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ParameterNode</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"speedInMph"</span><span class="pun">,</span><span class="pln"> parameterNode</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> parameterNode</span><span class="pun">.</span><span class="pln">getParameterIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The parameter name is determined using the current <code>ParameterNameProvider</code> (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-parameter-name-provider">Section 9.2.4, “<code>ParameterNameProvider</code>”</a>).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-builtin-method-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-method-constraints"></a>3.3. Built-in method constraints</h3>
<div class="paragraph">
<p>In addition to the built-in bean and property-level constraints discussed in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-builtin-constraints">Section 2.3, “Built-in constraints”</a>, Hibernate Validator currently provides one method-level constraint,
<code>@ParameterScriptAssert</code>. This is a generic cross-parameter constraint which allows to implement
validation routines using any JSR 223 compatible ("Scripting for the Java<sup>TM</sup> Platform") scripting
language, provided an engine for this language is available on the classpath.</p>
</div>
<div class="paragraph">
<p>To refer to the executable’s parameters from within the expression, use their name as obtained from
the active parameter name provider (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-parameter-name-provider">Section 9.2.4, “<code>ParameterNameProvider</code>”</a>).
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-parameterscriptassert">Example 3.17, “Using <code>@ParameterScriptAssert</code>”</a> shows how the validation logic of the <code>@LuggageCountMatchesPassengerCount</code>
constraint from <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-cross-parameter-constraint">Example 3.2, “Declaring a cross-parameter constraint”</a> could be expressed with the help of
<code>@ParameterScriptAssert</code>.</p>
</div>
<div id="example-parameterscriptassert" class="exampleblock">
<div class="title">Example 3.17: Using <code>@ParameterScriptAssert</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter03</span><span class="pun">.</span><span class="pln">parameterscriptassert</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@ParameterScriptAssert</span><span class="pun">(</span><span class="pln">lang </span><span class="pun">=</span><span class="pln"> </span><span class="str">"javascript"</span><span class="pun">,</span><span class="pln"> script </span><span class="pun">=</span><span class="pln"> </span><span class="str">"luggage.size() &lt;= passengers.size() * 2"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> load</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> passengers</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">PieceOfLuggage</span><span class="pun">&gt;</span><span class="pln"> luggage</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter-message-interpolation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-message-interpolation"></a>4. Interpolating constraint error messages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Message interpolation is the process of creating error messages for violated Jakarta Bean Validation
constraints. In this chapter you will learn how such messages are defined and resolved and how you
can plug in custom message interpolators in case the default algorithm is not sufficient for your
requirements.</p>
</div>
<div class="sect2">
<h3 id="section-message-interpolation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-message-interpolation"></a>4.1. Default message interpolation</h3>
<div class="paragraph">
<p>Constraint violation messages are retrieved from so called message descriptors. Each constraint
defines its default message descriptor using the message attribute. At declaration time, the default
descriptor can be overridden with a specific value as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-overriding-message">Example 4.1, “Specifying a message descriptor using the message attribute”</a>.</p>
</div>
<div id="example-overriding-message" class="exampleblock">
<div class="title">Example 4.1: Specifying a message descriptor using the message attribute</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter04</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pun">(</span><span class="pln">message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The manufacturer name must not be null"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//constructor, getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If a constraint is violated, its descriptor will be interpolated by the validation engine using the
currently configured <code>MessageInterpolator</code>. The interpolated error message can then be retrieved from
the resulting constraint violation by calling <code>ConstraintViolation#getMessage()</code>.</p>
</div>
<div class="paragraph">
<p>Message descriptors can contain <em>message parameters</em> as well as <em>message expressions</em> which will be
resolved during interpolation. Message parameters are string literals enclosed in <code>{}</code>, while
message expressions are string literals enclosed in <code>${}</code>. The following algorithm is applied during
method interpolation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Resolve any message parameters by using them as key for the resource bundle <em>ValidationMessages</em>. If
this bundle contains an entry for a given message parameter, that parameter will be replaced in the
message with the corresponding value from the bundle. This step will be executed recursively in case
the replaced value again contains message parameters. The resource bundle is expected to be provided
by the application developer, e.g. by adding a file named <em>ValidationMessages.properties</em> to the
classpath. You can also create localized error messages by providing locale specific variations of
this bundle, such as <em>ValidationMessages_en_US.properties</em>. By default, the JVM’s default locale
(<code>Locale#getDefault()</code>) will be used when looking up messages in the bundle.</p>
</li>
<li>
<p>Resolve any message parameters by using them as key for a resource bundle containing the standard
error messages for the built-in constraints as defined in Appendix B of the Jakarta Bean Validation
specification. In the case of Hibernate Validator, this bundle is named
<code>org.hibernate.validator.ValidationMessages</code>. If this step triggers a replacement, step 1 is executed
again, otherwise step 3 is applied.</p>
</li>
<li>
<p>Resolve any message parameters by replacing them with the value of the constraint annotation member
of the same name. This allows to refer to attribute values of the constraint (e.g. <code>Size#min()</code>) in
the error message (e.g. "must be at least ${min}").</p>
</li>
<li>
<p>Resolve any message expressions by evaluating them as expressions of the Unified Expression
Language. See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-interpolation-with-message-expressions">Section 4.1.2, “Interpolation with message expressions”</a> to learn more about the usage of
Unified EL in error messages.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can find the formal definition of the interpolation algorithm in section
<a href="http://beanvalidation.org/2.0/spec/#validationapi-message-defaultmessageinterpolation-resolutionalgorithm">6.3.1.1</a>
of the Jakarta Bean Validation specification.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="section-special-characters"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-special-characters"></a>4.1.1. Special characters</h4>
<div class="paragraph">
<p>Since the characters <code>{</code>, <code>}</code> and <code>$</code> have a special meaning in message descriptors, they need to be
escaped if you want to use them literally. The following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\{</code> is considered as the literal <code>{</code></p>
</li>
<li>
<p><code>\}</code> is considered as the literal <code>}</code></p>
</li>
<li>
<p><code>\$</code> is considered as the literal <code>$</code></p>
</li>
<li>
<p><code>\\</code> is considered as the literal <code>\</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="section-interpolation-with-message-expressions"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-interpolation-with-message-expressions"></a>4.1.2. Interpolation with message expressions</h4>
<div class="paragraph">
<p>As of Hibernate Validator 5 (Bean Validation 1.1) it is possible to use the
<a href="https://projects.eclipse.org/projects/ee4j.el">Jakarta Expression Language</a> in constraint
violation messages. This allows to define error messages based on conditional logic and also enables
advanced formatting options. The validation engine makes the following objects available in the EL
context:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the attribute values of the constraint mapped to the attribute names</p>
</li>
<li>
<p>the currently validated value (property, bean, method parameter etc.) under the name <em>validatedValue</em></p>
</li>
<li>
<p>a bean mapped to the name formatter exposing the var-arg method
<code>format(String format, Object…​ args)</code> which behaves like
<code>java.util.Formatter.format(String format, Object…​ args)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following section provides several examples for using EL expressions in error messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_examples"></a>4.1.3. Examples</h4>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-message-descriptors">Example 4.2, “Specifying message descriptors”</a> shows how to make use of the different options for specifying
message descriptors.</p>
</div>
<div id="example-message-descriptors" class="exampleblock">
<div class="title">Example 4.2: Specifying message descriptors</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter04</span><span class="pun">.</span><span class="pln">complete</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">
            min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln">
            max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">,</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The license plate '${validatedValue}' must be between {min} and {max} characters long"</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Min</span><span class="pun">(</span><span class="pln">
            value </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"There must be at least {value} seat${value &gt; 1 ? 's' : ''}"</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@DecimalMax</span><span class="pun">(</span><span class="pln">
            value </span><span class="pun">=</span><span class="pln"> </span><span class="str">"350"</span><span class="pun">,</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The top speed ${formatter.format('%1$.2f', validatedValue)} is higher "</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
                    </span><span class="str">"than {value}"</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> topSpeed</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@DecimalMax</span><span class="pun">(</span><span class="pln">value </span><span class="pun">=</span><span class="pln"> </span><span class="str">"100000"</span><span class="pun">,</span><span class="pln"> message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Price must not be higher than ${value}"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">BigDecimal</span><span class="pln"> price</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">
            </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">,</span><span class="pln">
            </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">,</span><span class="pln">
            </span><span class="kwd">double</span><span class="pln"> topSpeed</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">BigDecimal</span><span class="pln"> price</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">licensePlate </span><span class="pun">=</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">seatCount </span><span class="pun">=</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">topSpeed </span><span class="pun">=</span><span class="pln"> topSpeed</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">price </span><span class="pun">=</span><span class="pln"> price</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Validating an invalid <code>Car</code> instance yields constraint violations with the messages shown by the
assertions in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-expected-error-messages">Example 4.3, “Expected error messages”</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>@NotNull</code> constraint on the <code>manufacturer</code> field causes the error message "must not be null", as
this is the default message defined by the Jakarta Bean Validation specification and no specific descriptor
is given in the message attribute</p>
</li>
<li>
<p>the <code>@Size</code> constraint on the <code>licensePlate</code> field shows the interpolation of message parameters
(<code>{min}</code>, <code>{max}</code>) and how to add the validated value to the error message using the EL
expression <code>${validatedValue}</code></p>
</li>
<li>
<p>the <code>@Min</code> constraint on <code>seatCount</code> demonstrates how to use an EL expression with a ternary expression to
dynamically choose singular or plural form, depending on an attribute of the constraint ("There must
be at least 1 seat" vs. "There must be at least 2 seats")</p>
</li>
<li>
<p>the message for the <code>@DecimalMax</code> constraint on <code>topSpeed</code> shows how to format the validated
value using the formatter instance</p>
</li>
<li>
<p>finally, the <code>@DecimalMax</code> constraint on <code>price</code> shows that parameter interpolation has precedence over
expression evaluation, causing the <code>$</code> sign to show up in front of the maximum price</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only actual constraint attributes can be interpolated using message parameters in the form
<code>{attributeName}</code>. When referring to the validated value or custom expression variables added to the
interpolation context (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-hibernateconstraintvalidatorcontext">Section 12.12.1, “<code>HibernateConstraintValidatorContext</code>”</a>), an EL expression in the
form <code>${attributeName}</code> must be used.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="example-expected-error-messages" class="exampleblock">
<div class="title">Example 4.3: Expected error messages</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="str">"A"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">400.123456</span><span class="pun">,</span><span class="pln"> </span><span class="typ">BigDecimal</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">(</span><span class="pln"> </span><span class="lit">200000</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">String</span><span class="pln"> message </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validateProperty</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="str">"manufacturer"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"must not be null"</span><span class="pun">,</span><span class="pln"> message </span><span class="pun">);</span><span class="pln">

message </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validateProperty</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="str">"licensePlate"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getMessage</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"The license plate 'A' must be between 2 and 14 characters long"</span><span class="pun">,</span><span class="pln">
        message
</span><span class="pun">);</span><span class="pln">

message </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validateProperty</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="str">"seatCount"</span><span class="pln"> </span><span class="pun">).</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"There must be at least 2 seats"</span><span class="pun">,</span><span class="pln"> message </span><span class="pun">);</span><span class="pln">

message </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validateProperty</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="str">"topSpeed"</span><span class="pln"> </span><span class="pun">).</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"The top speed 400.12 is higher than 350"</span><span class="pun">,</span><span class="pln"> message </span><span class="pun">);</span><span class="pln">

message </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validateProperty</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="str">"price"</span><span class="pln"> </span><span class="pun">).</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Price must not be higher than $100000"</span><span class="pun">,</span><span class="pln"> message </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-custom-message-interpolation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-custom-message-interpolation"></a>4.2. Custom message interpolation</h3>
<div class="paragraph">
<p>If the default message interpolation algorithm does not fit your requirements, it is also possible to
plug in a custom <code>MessageInterpolator</code> implementation.</p>
</div>
<div class="paragraph">
<p>Custom interpolators must implement the interface <code>javax.validation.MessageInterpolator</code>. Note that
implementations must be thread-safe. It is recommended that custom message interpolators delegate
final implementation to the default interpolator, which can be obtained via
<code>Configuration#getDefaultMessageInterpolator()</code>.</p>
</div>
<div class="paragraph">
<p>In order to use a custom message interpolator it must be registered either by configuring it in the
Jakarta Bean Validation XML descriptor <em>META-INF/validation.xml</em> (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuration-validation-xml">Section 8.1, “Configuring the validator factory in <em>validation.xml</em>”</a>) or by passing it when bootstrapping a <code>ValidatorFactory</code> or
<code>Validator</code> (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validator-factory-message-interpolator">Section 9.2.1, “<code>MessageInterpolator</code>”</a> and
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuring-validator">Section 9.3, “Configuring a Validator”</a>, respectively).</p>
</div>
<div class="sect3">
<h4 id="section-resource-bundle-locator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-resource-bundle-locator"></a>4.2.1. <code>ResourceBundleLocator</code></h4>
<div class="paragraph">
<p>In some use cases, you want to use the message interpolation algorithm as defined by the Bean
Validation specification, but retrieve error messages from other resource bundles than
<em>ValidationMessages</em>. In this situation Hibernate Validator’s <code>ResourceBundleLocator</code> SPI can help.</p>
</div>
<div class="paragraph">
<p>The default message interpolator in Hibernate Validator, <code>ResourceBundleMessageInterpolator</code>,
delegates retrieval of resource bundles to that SPI. Using an alternative bundle only requires
passing an instance of <code>PlatformResourceBundleLocator</code> with the bundle name when bootstrapping the
<code>ValidatorFactory</code> as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-specific-resource-bundle-locator">Example 4.4, “Using a specific resource bundle”</a>.</p>
</div>
<div id="example-using-specific-resource-bundle-locator" class="exampleblock">
<div class="title">Example 4.4: Using a specific resource bundle</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">messageInterpolator</span><span class="pun">(</span><span class="pln">
                </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ResourceBundleMessageInterpolator</span><span class="pun">(</span><span class="pln">
                        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">PlatformResourceBundleLocator</span><span class="pun">(</span><span class="pln"> </span><span class="str">"MyMessages"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Of course you also could implement a completely different <code>ResourceBundleLocator</code>, which for instance
returns bundles backed by records in a database. In this case, you can obtain the default locator via
<code>HibernateValidatorConfiguration#getDefaultResourceBundleLocator()</code>, which you e.g. could use as
fall-back for your custom locator.</p>
</div>
<div class="paragraph">
<p>Besides <code>PlatformResourceBundleLocator</code>, Hibernate Validator provides another resource bundle locator
implementation out of the box, namely <code>AggregateResourceBundleLocator</code>, which allows to retrieve error
messages from more than one resource bundle. You could for instance use this implementation in a
multi-module application where you want to have one message bundle per module.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-aggregate-resource-bundle-locator">Example 4.5, “Using <code>AggregateResourceBundleLocator</code>”</a> shows how to use <code>AggregateResourceBundleLocator</code>.</p>
</div>
<div id="example-using-aggregate-resource-bundle-locator" class="exampleblock">
<div class="title">Example 4.5: Using <code>AggregateResourceBundleLocator</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">messageInterpolator</span><span class="pun">(</span><span class="pln">
                </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ResourceBundleMessageInterpolator</span><span class="pun">(</span><span class="pln">
                        </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AggregateResourceBundleLocator</span><span class="pun">(</span><span class="pln">
                                </span><span class="typ">Arrays</span><span class="pun">.</span><span class="pln">asList</span><span class="pun">(</span><span class="pln">
                                        </span><span class="str">"MyMessages"</span><span class="pun">,</span><span class="pln">
                                        </span><span class="str">"MyOtherMessages"</span><span class="pln">
                                </span><span class="pun">)</span><span class="pln">
                        </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that the bundles are processed in the order as passed to the constructor. That means if several
bundles contain an entry for a given message key, the value will be taken from the first bundle in
the list containing the key.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter-groups"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-groups"></a>5. Grouping constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All validation methods on <code>Validator</code> and <code>ExecutableValidator</code> discussed in earlier chapters also take
a var-arg argument <code>groups</code>. So far we have been ignoring this parameter, but it is time to have a
closer look.</p>
</div>
<div class="sect2">
<h3 id="_requesting_groups"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_requesting_groups"></a>5.1. Requesting groups</h3>
<div class="paragraph">
<p>Groups allow you to restrict the set of constraints applied during validation. One use case for
validation groups are UI wizards where in each step only a specified subset of constraints should
get validated. The groups targeted are passed as var-arg parameters to the appropriate validate
method.</p>
</div>
<div class="paragraph">
<p>Let’s have a look at an example. The class <code>Person</code> in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-person">Example 5.1, “Example class <code>Person</code>”</a> has a <code>@NotNull</code>
constraint on <code>name</code>. Since no group is specified for this annotation the default group
<code>javax.validation.groups.Default</code> is assumed.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When more than one group is requested, the order in which the groups are evaluated is not
deterministic. If no group is specified the default group <code>javax.validation.groups.Default</code> is
assumed.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="example-person" class="exampleblock">
<div class="title">Example 5.1: Example class <code>Person</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The class <code>Driver</code> in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-driver">Example 5.2, “Driver”</a> extends <code>Person</code> and adds the properties <code>age</code> and
<code>hasDrivingLicense</code>. Drivers must be at least 18 years old (<code>@Min(18)</code>) and have a driving license
(<code>@AssertTrue</code>). Both constraints defined on these properties belong to the group <code>DriverChecks</code> which
is just a simple tagging interface.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using interfaces makes the usage of groups type-safe and allows for easy refactoring. It also means
that groups can inherit from each other via class inheritance. See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-inheritance">Section 5.2, “Group inheritance”</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="example-driver" class="exampleblock">
<div class="title">Example 5.2: Driver</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Driver</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Min</span><span class="pun">(</span><span class="pln">
            value </span><span class="pun">=</span><span class="pln"> </span><span class="lit">18</span><span class="pun">,</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"You have to be 18 to drive a car"</span><span class="pun">,</span><span class="pln">
            groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pun">(</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"You first have to pass the driving test"</span><span class="pun">,</span><span class="pln">
            groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> hasDrivingLicense</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Driver</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">super</span><span class="pun">(</span><span class="pln"> name </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> passedDrivingTest</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        hasDrivingLicense </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getAge</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setAge</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Finally the class <code>Car</code> (<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-car">Example 5.3, “Car”</a>) has some constraints which are part of the default group as
well as <code>@AssertTrue</code> in the group <code>CarChecks</code> on the property <code>passedVehicleInspection</code> which indicates
whether a car passed the road worthy tests.</p>
</div>
<div id="example-car" class="exampleblock">
<div class="title">Example 5.3: Car</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pun">(</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The car has to pass the vehicle inspection first"</span><span class="pun">,</span><span class="pln">
            groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> passedVehicleInspection</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Driver</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">licensePlate </span><span class="pun">=</span><span class="pln"> licencePlate</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">seatCount </span><span class="pun">=</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isPassedVehicleInspection</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> passedVehicleInspection</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPassedVehicleInspection</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> passedVehicleInspection</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">passedVehicleInspection </span><span class="pun">=</span><span class="pln"> passedVehicleInspection</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Driver</span><span class="pln"> getDriver</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setDriver</span><span class="pun">(</span><span class="typ">Driver</span><span class="pln"> driver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">driver </span><span class="pun">=</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Overall three different groups are used in the example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The constraints on <code>Person.name</code>, <code>Car.manufacturer</code>, <code>Car.licensePlate</code> and <code>Car.seatCount</code>
all belong to the <code>Default</code> group</p>
</li>
<li>
<p>The constraints on <code>Driver.age</code> and <code>Driver.hasDrivingLicense</code> belong to <code>DriverChecks</code></p>
</li>
<li>
<p>The constraint on <code>Car.passedVehicleInspection</code> belongs to the group <code>CarChecks</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-drive-away">Example 5.4, “Using validation groups”</a> shows how passing different group combinations to the <code>Validator#validate()</code>
method results in different validation results.</p>
</div>
<div id="example-drive-away" class="exampleblock">
<div class="title">Example 5.4: Using validation groups</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">// create a car and check that everything is ok with it.</span><span class="pln">
</span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// but has it passed the vehicle inspection?</span><span class="pln">
constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"The car has to pass the vehicle inspection first"</span><span class="pun">,</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">// let's go to the vehicle inspection</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setPassedVehicleInspection</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// now let's add a driver. He is 18, but has not passed the driving test yet</span><span class="pln">
</span><span class="typ">Driver</span><span class="pln"> john </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Driver</span><span class="pun">(</span><span class="pln"> </span><span class="str">"John Doe"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
john</span><span class="pun">.</span><span class="pln">setAge</span><span class="pun">(</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setDriver</span><span class="pun">(</span><span class="pln"> john </span><span class="pun">);</span><span class="pln">
constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"You first have to pass the driving test"</span><span class="pun">,</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">// ok, John passes the test</span><span class="pln">
john</span><span class="pun">.</span><span class="pln">passedDrivingTest</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// just checking that everything is in order now</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln">
        car</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">).</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The first <code>validate()</code> call in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-drive-away">Example 5.4, “Using validation groups”</a> is done using no explicit group. There are no
validation errors, even though the property <code>passedVehicleInspection</code> is per default <code>false</code> as
the constraint defined on this property does not belong to the default group.</p>
</div>
<div class="paragraph">
<p>The next validation using the <code>CarChecks</code> group fails until the car passes the vehicle inspection.
Adding a driver to the car and validating against <code>DriverChecks</code> again yields one constraint violation
due to the fact that the driver has not yet passed the driving test. Only after setting
<code>passedDrivingTest</code> to <code>true</code> the validation against <code>DriverChecks</code> passes.</p>
</div>
<div class="paragraph">
<p>The last <code>validate()</code> call finally shows that all constraints are passing by validating against all
defined groups.</p>
</div>
</div>
<div class="sect2">
<h3 id="section-group-inheritance"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-inheritance"></a>5.2. Group inheritance</h3>
<div class="paragraph">
<p>In <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-drive-away">Example 5.4, “Using validation groups”</a>, we need to call <code>validate()</code> for each validation group, or specify all of
them one by one.</p>
</div>
<div class="paragraph">
<p>In some situations, you may want to define a group of constraints which includes another group.
You can do that using group inheritance.</p>
</div>
<div class="paragraph">
<p>In <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-supercar">Example 5.5, “SuperCar”</a>, we define a <code>SuperCar</code> and a group <code>RaceCarChecks</code> that extends the <code>Default</code> group.
A <code>SuperCar</code> must have safety belts to be allowed to run in races.</p>
</div>
<div id="example-supercar" class="exampleblock">
<div class="title">Example 5.5: SuperCar</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">.</span><span class="pln">groupinheritance</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SuperCar</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pun">(</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Race car must have a safety belt"</span><span class="pun">,</span><span class="pln">
            groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">RaceCarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> safetyBelt</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// getters and setters ...</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">.</span><span class="pln">groupinheritance</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">groups</span><span class="pun">.</span><span class="typ">Default</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">RaceCarChecks</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Default</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the example below, we will check if a <code>SuperCar</code> with one seat and no security belts is a valid car
and if it is a valid race-car.</p>
</div>
<div id="example-group-inheritance" class="exampleblock">
<div class="title">Example 5.6: Using group inheritance</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">// create a supercar and check that it's valid as a generic Car</span><span class="pln">
</span><span class="typ">SuperCar</span><span class="pln"> superCar </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SuperCar</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pln">  </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"must be greater than or equal to 2"</span><span class="pun">,</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> superCar </span><span class="pun">).</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// check that this supercar is valid as generic car and also as race car</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">SuperCar</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> superCar</span><span class="pun">,</span><span class="pln"> </span><span class="typ">RaceCarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

assertThat</span><span class="pun">(</span><span class="pln"> constraintViolations </span><span class="pun">).</span><span class="pln">extracting</span><span class="pun">(</span><span class="pln"> </span><span class="str">"message"</span><span class="pln"> </span><span class="pun">).</span><span class="pln">containsOnly</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"Race car must have a safety belt"</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"must be greater than or equal to 2"</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>On the first call to <code>validate()</code>, we do not specify a group. There is one validation error because a
car must have at least one seat. It is the constraint from the <code>Default</code> group.</p>
</div>
<div class="paragraph">
<p>On the second call, we specify only the group <code>RaceCarChecks</code>. There are two validation errors: one
about the missing seat from the <code>Default</code> group, another one about the fact that there is no safety
belts coming from the <code>RaceCarChecks</code> group.</p>
</div>
</div>
<div class="sect2">
<h3 id="section-defining-group-sequences"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-defining-group-sequences"></a>5.3. Defining group sequences</h3>
<div class="paragraph">
<p>By default, constraints are evaluated in no particular order, regardless of which groups they belong
to. In some situations, however, it is useful to control the order in which constraints are evaluated.</p>
</div>
<div class="paragraph">
<p>In the example from <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-drive-away">Example 5.4, “Using validation groups”</a> it could for instance be required that first all default
car constraints are passing before checking the road worthiness of the car. Finally, before driving
away, the actual driver constraints should be checked.</p>
</div>
<div class="paragraph">
<p>In order to implement such a validation order you just need to define an interface and annotate it
with <code>@GroupSequence</code>, defining the order in which the groups have to be validated (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-defining-group-sequence">Example 5.7, “Defining a group sequence”</a>). If at least one constraint fails in a sequenced group, none of the
constraints of the following groups in the sequence get validated.</p>
</div>
<div id="example-defining-group-sequence" class="exampleblock">
<div class="title">Example 5.7: Defining a group sequence</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">GroupSequence</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">groups</span><span class="pun">.</span><span class="typ">Default</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@GroupSequence</span><span class="pun">({</span><span class="pln"> </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">})</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">OrderedChecks</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Groups defining a sequence and groups composing a sequence must not be involved in a cyclic
dependency either directly or indirectly, either through cascaded sequence definition or group
inheritance. If a group containing such a circularity is evaluated, a <code>GroupDefinitionException</code> is
raised.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You then can use the new sequence as shown in in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-group-sequence">Example 5.8, “Using a group sequence”</a>.</p>
</div>
<div id="example-group-sequence" class="exampleblock">
<div class="title">Example 5.8: Using a group sequence</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setPassedVehicleInspection</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Driver</span><span class="pln"> john </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Driver</span><span class="pun">(</span><span class="pln"> </span><span class="str">"John Doe"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
john</span><span class="pun">.</span><span class="pln">setAge</span><span class="pun">(</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
john</span><span class="pun">.</span><span class="pln">passedDrivingTest</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setDriver</span><span class="pun">(</span><span class="pln"> john </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">OrderedChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-default-group-class"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-default-group-class"></a>5.4. Redefining the default group sequence</h3>
<div class="sect3">
<h4 id="_code_groupsequence_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_groupsequence_code"></a>5.4.1. <code>@GroupSequence</code></h4>
<div class="paragraph">
<p>Besides defining group sequences, the <code>@GroupSequence</code> annotation also allows to redefine the default
group for a given class. To do so, just add the <code>@GroupSequence</code> annotation to the class and specify
the sequence of groups which substitute <code>Default</code> for this class within the annotation.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-rental-car">Example 5.9, “Class <code>RentalCar</code> with redefined default group”</a> introduces a new class <code>RentalCar</code> with a redefined default group.</p>
</div>
<div id="example-rental-car" class="exampleblock">
<div class="title">Example 5.9: Class <code>RentalCar</code> with redefined default group</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@GroupSequence</span><span class="pun">({</span><span class="pln"> </span><span class="typ">RentalChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">})</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@AssertFalse</span><span class="pun">(</span><span class="pln">message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The car is currently rented out"</span><span class="pun">,</span><span class="pln"> groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">RentalChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> rented</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">super</span><span class="pun">(</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> seatCount </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRented</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> rented</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setRented</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> rented</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">rented </span><span class="pun">=</span><span class="pln"> rented</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">RentalChecks</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>With this definition you can evaluate the constraints belonging to <code>RentalChecks</code>, <code>CarChecks</code> and
<code>RentalCar</code> by just requesting the <code>Default</code> group as seen in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-testCarIsRented">Example 5.10, “Validating an object with redefined default group”</a>.</p>
</div>
<div id="example-testCarIsRented" class="exampleblock">
<div class="title">Example 5.10: Validating an object with redefined default group</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">RentalCar</span><span class="pln"> rentalCar </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
rentalCar</span><span class="pun">.</span><span class="pln">setPassedVehicleInspection</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
rentalCar</span><span class="pun">.</span><span class="pln">setRented</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">RentalCar</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> rentalCar </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"Wrong message"</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"The car is currently rented out"</span><span class="pun">,</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

rentalCar</span><span class="pun">.</span><span class="pln">setRented</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> rentalCar </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since there must be no cyclic dependency in the group and group sequence definitions, one cannot just
add <code>Default</code> to the sequence redefining <code>Default</code> for a class. Instead the class itself has to be
added.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>Default</code> group sequence overriding is local to the class it is defined on and is not propagated
to associated objects. For the example, this means that adding <code>DriverChecks</code> to the default group
sequence of <code>RentalCar</code> would not have any effects. Only the group <code>Default</code> will be propagated to the
driver association.</p>
</div>
<div class="paragraph">
<p>Note that you can control the propagated group(s) by declaring a group conversion rule (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-conversion">Section 5.5, “Group conversion”</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_code_groupsequenceprovider_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_groupsequenceprovider_code"></a>5.4.2. <code>@GroupSequenceProvider</code></h4>
<div class="paragraph">
<p>In addition to statically redefining default group sequences via <code>@GroupSequence</code>, Hibernate Validator
also provides an SPI for the dynamic redefinition of default group sequences depending on the object
state.</p>
</div>
<div class="paragraph">
<p>For that purpose, you need to implement the interface <code>DefaultGroupSequenceProvider</code> and register this
implementation with the target class via the <code>@GroupSequenceProvider</code> annotation. In the rental car
scenario, you could for instance dynamically add the <code>CarChecks</code> as seen in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-implementing-using-default-group-sequence-provider">Example 5.11, “Implementing and using a default group sequence provider”</a>.</p>
</div>
<div id="example-implementing-using-default-group-sequence-provider" class="exampleblock">
<div class="title">Example 5.11: Implementing and using a default group sequence provider</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">.</span><span class="pln">groupsequenceprovider</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalCarGroupSequenceProvider</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">DefaultGroupSequenceProvider</span><span class="pun">&lt;</span><span class="typ">RentalCar</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Class</span><span class="pun">&lt;?&gt;&gt;</span><span class="pln"> getValidationGroups</span><span class="pun">(</span><span class="typ">RentalCar</span><span class="pln"> car</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Class</span><span class="pun">&lt;?&gt;&gt;</span><span class="pln"> defaultGroupSequence </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;</span><span class="typ">Class</span><span class="pun">&lt;?&gt;&gt;();</span><span class="pln">
        defaultGroupSequence</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> car </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">car</span><span class="pun">.</span><span class="pln">isRented</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            defaultGroupSequence</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> defaultGroupSequence</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">.</span><span class="pln">groupsequenceprovider</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@GroupSequenceProvider</span><span class="pun">(</span><span class="typ">RentalCarGroupSequenceProvider</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@AssertFalse</span><span class="pun">(</span><span class="pln">message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The car is currently rented out"</span><span class="pun">,</span><span class="pln"> groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">RentalChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> rented</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">super</span><span class="pun">(</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> seatCount </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRented</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> rented</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setRented</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> rented</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">rented </span><span class="pun">=</span><span class="pln"> rented</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-group-conversion"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-conversion"></a>5.5. Group conversion</h3>
<div class="paragraph">
<p>What if you wanted to validate the car related checks together with the driver checks? Of course you
could pass the required groups to the validate call explicitly, but what if you wanted to make these
validations occur as part of the <code>Default</code> group validation? Here <code>@ConvertGroup</code> comes into play which
allows you to use a different group than the originally requested one during cascaded validation.</p>
</div>
<div class="paragraph">
<p>Let’s have a look at <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-group-conversion-dedault-to-driver-checks">Example 5.12, “<code>@ConvertGroup</code> usage”</a>. Here <code>@GroupSequence({
CarChecks.class, Car.class })</code> is used to combine the car related constraints under the <code>Default</code> group
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-default-group-class">Section 5.4, “Redefining the default group sequence”</a>). There is also a <code>@ConvertGroup(from = Default.class, to =
DriverChecks.class)</code> which ensures the <code>Default</code> group gets converted to the <code>DriverChecks</code> group during
cascaded validation of the driver association.</p>
</div>
<div id="example-group-conversion-dedault-to-driver-checks" class="exampleblock">
<div class="title">Example 5.12: <code>@ConvertGroup</code> usage</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">.</span><span class="pln">groupconversion</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Driver</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Min</span><span class="pun">(</span><span class="pln">
            value </span><span class="pun">=</span><span class="pln"> </span><span class="lit">18</span><span class="pun">,</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"You have to be 18 to drive a car"</span><span class="pun">,</span><span class="pln">
            groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pun">(</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"You first have to pass the driving test"</span><span class="pun">,</span><span class="pln">
            groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> hasDrivingLicense</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Driver</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> passedDrivingTest</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        hasDrivingLicense </span><span class="pun">=</span><span class="pln"> b</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getAge</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setAge</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> age</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> age</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter05</span><span class="pun">.</span><span class="pln">groupconversion</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@GroupSequence</span><span class="pun">({</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">})</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pun">(</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"The car has to pass the vehicle inspection first"</span><span class="pun">,</span><span class="pln">
            groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> passedVehicleInspection</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="lit">@ConvertGroup</span><span class="pun">(</span><span class="kwd">from</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> to </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DriverChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Driver</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">licensePlate </span><span class="pun">=</span><span class="pln"> licencePlate</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">seatCount </span><span class="pun">=</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isPassedVehicleInspection</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> passedVehicleInspection</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setPassedVehicleInspection</span><span class="pun">(</span><span class="kwd">boolean</span><span class="pln"> passedVehicleInspection</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">passedVehicleInspection </span><span class="pun">=</span><span class="pln"> passedVehicleInspection</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Driver</span><span class="pln"> getDriver</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setDriver</span><span class="pun">(</span><span class="typ">Driver</span><span class="pln"> driver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">driver </span><span class="pun">=</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">// getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As a result the validation in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-group-conversion-test">Example 5.13, “Test case for <code>@ConvertGroup</code>”</a> succeeds, even though the constraint
on <code>hasDrivingLicense</code> belongs to the <code>DriverChecks</code> group and only the <code>Default</code> group is requested in
the <code>validate()</code> call.</p>
</div>
<div id="example-group-conversion-test" class="exampleblock">
<div class="title">Example 5.13: Test case for <code>@ConvertGroup</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">// create a car and validate. The Driver is still null and does not get validated</span><span class="pln">
</span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"VW"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"USD-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setPassedVehicleInspection</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// create a driver who has not passed the driving test</span><span class="pln">
</span><span class="typ">Driver</span><span class="pln"> john </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Driver</span><span class="pun">(</span><span class="pln"> </span><span class="str">"John Doe"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
john</span><span class="pun">.</span><span class="pln">setAge</span><span class="pun">(</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// now let's add a driver to the car</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">setDriver</span><span class="pun">(</span><span class="pln"> john </span><span class="pun">);</span><span class="pln">
constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"The driver constraint should also be validated as part of the default group"</span><span class="pun">,</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">(),</span><span class="pln">
        </span><span class="str">"You first have to pass the driving test"</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can define group conversions wherever <code>@Valid</code> can be used, namely associations as well as method
and constructor parameters and return values. Multiple conversions can be specified using
<code>@ConvertGroup.List</code>.</p>
</div>
<div class="paragraph">
<p>However, the following restrictions apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@ConvertGroup</code> must only be used in combination with <code>@Valid</code>. If used without, a
<code>ConstraintDeclarationException</code> is thrown.</p>
</li>
<li>
<p>It is not legal to have multiple conversion rules on the same element with the same from value.
In this case, a <code>ConstraintDeclarationException</code> is raised.</p>
</li>
<li>
<p>The <code>from</code> attribute must not refer to a group sequence. A <code>ConstraintDeclarationException</code> is
raised in this situation.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Rules are not executed recursively. The first matching conversion rule is used and subsequent rules
are ignored. For example if a set of <code>@ConvertGroup</code> declarations chains group <code>A</code> to <code>B</code> and
<code>B</code> to <code>C</code>, the group <code>A</code> will be converted to <code>B</code> and not to <code>C</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validator-customconstraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints"></a>6. Creating custom constraints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jakarta Bean Validation API defines a whole set of standard constraint annotations such as <code>@NotNull</code>,
<code>@Size</code> etc. In cases where these built-in constraints are not sufficient, you can easily create
custom constraints tailored to your specific validation requirements.</p>
</div>
<div class="sect2">
<h3 id="validator-customconstraints-simple"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-simple"></a>6.1. Creating a simple constraint</h3>
<div class="paragraph">
<p>To create a custom constraint, the following three steps are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a constraint annotation</p>
</li>
<li>
<p>Implement a validator</p>
</li>
<li>
<p>Define a default error message</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="validator-customconstraints-constraintannotation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-constraintannotation"></a>6.1.1. The constraint annotation</h4>
<div class="paragraph">
<p>This section shows how to write a constraint annotation which can be used to ensure that a given
string is either completely upper case or lower case. Later on, this constraint will be applied to
the <code>licensePlate</code> field of the <code>Car</code> class from <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted">Chapter 1, <em>Getting started</em></a> to ensure that
the field is always an upper-case string.</p>
</div>
<div class="paragraph">
<p>The first thing needed is a way to express the two case modes. While you could use <code>String</code> constants,
a better approach is using an enum for that purpose:</p>
</div>
<div class="exampleblock">
<div class="title">Example 6.1: Enum <code>CaseMode</code> to express upper vs. lower case</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">enum</span><span class="pln"> </span><span class="typ">CaseMode</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    UPPER</span><span class="pun">,</span><span class="pln">
    LOWER</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The next step is to define the actual constraint annotation. If you’ve never designed an annotation
before, this may look a bit scary, but actually it’s not that hard:</p>
</div>
<div id="example-defining-custom-constraint" class="exampleblock">
<div class="title">Example 6.2: Defining the <code>@CheckCase</code> constraint annotation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">ANNOTATION_TYPE</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">FIELD</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">METHOD</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">PARAMETER</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">TYPE_USE</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">lang</span><span class="pun">.</span><span class="pln">annotation</span><span class="pun">.</span><span class="typ">RetentionPolicy</span><span class="pun">.</span><span class="pln">RUNTIME</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> FIELD</span><span class="pun">,</span><span class="pln"> METHOD</span><span class="pun">,</span><span class="pln"> PARAMETER</span><span class="pun">,</span><span class="pln"> ANNOTATION_TYPE</span><span class="pun">,</span><span class="pln"> TYPE_USE </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Constraint</span><span class="pun">(</span><span class="pln">validatedBy </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CheckCaseValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Documented</span><span class="pln">
</span><span class="lit">@Repeatable</span><span class="pun">(</span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">CheckCase</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter06.CheckCase."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
            </span><span class="str">"message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">CaseMode</span><span class="pln"> value</span><span class="pun">();</span><span class="pln">

    </span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> FIELD</span><span class="pun">,</span><span class="pln"> METHOD</span><span class="pun">,</span><span class="pln"> PARAMETER</span><span class="pun">,</span><span class="pln"> ANNOTATION_TYPE </span><span class="pun">})</span><span class="pln">
    </span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
    </span><span class="lit">@Documented</span><span class="pln">
    </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">List</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">CheckCase</span><span class="pun">[]</span><span class="pln"> value</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>An annotation type is defined using the <code>@interface</code> keyword. All attributes of an annotation type are
declared in a method-like manner. The specification of the Jakarta Bean Validation API demands, that any
constraint annotation defines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an attribute <code>message</code> that returns the default key for creating error messages in case the
constraint is violated</p>
</li>
<li>
<p>an attribute <code>groups</code> that allows the specification of validation groups, to which this constraint
belongs (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-groups">Chapter 5, <em>Grouping constraints</em></a>). This must default to an empty array of type Class&lt;?&gt;.</p>
</li>
<li>
<p>an attribute <code>payload</code> that can be used by clients of the Jakarta Bean Validation API to assign custom
payload objects to a constraint. This attribute is not used by the API itself. An example for a
custom payload could be the definition of a severity:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Severity</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Info</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ContactDetails</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@NotNull</span><span class="pun">(</span><span class="pln">message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Name is mandatory"</span><span class="pun">,</span><span class="pln"> payload </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Severity</span><span class="pun">.</span><span class="typ">Error</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pun">(</span><span class="pln">message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Phone number not specified, but not mandatory"</span><span class="pun">,</span><span class="pln">
            payload </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Severity</span><span class="pun">.</span><span class="typ">Info</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> phoneNumber</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Now a client can after the validation of a <code>ContactDetails</code> instance access the severity of a
constraint using <code>ConstraintViolation.getConstraintDescriptor().getPayload()</code> and adjust its behavior
depending on the severity.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Besides these three mandatory attributes there is another one, <code>value</code>, allowing for the required case
mode to be specified. The name <code>value</code> is a special one, which can be omitted when using the
annotation, if it is the only attribute specified, as e.g. in <code>@CheckCase(CaseMode.UPPER)</code>.</p>
</div>
<div class="paragraph">
<p>In addition, the constraint annotation is decorated with a couple of meta annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Target({ FIELD, METHOD, PARAMETER, ANNOTATION_TYPE, TYPE_USE})</code>: Defines the supported target
element types for the constraint. <code>@CheckCase</code> may be used on fields (element type <code>FIELD</code>), JavaBeans properties
as well as method return values (<code>METHOD</code>), method/constructor parameters (<code>PARAMETER</code>) and type argument of
parameterized types (<code>TYPE_USE</code>). The element type <code>ANNOTATION_TYPE</code> allows for the creation of composed
constraints (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-composition">Section 6.4, “Constraint composition”</a>) based on <code>@CheckCase</code>.</p>
<div class="paragraph">
<p>When creating a class-level constraint (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-usingvalidator-classlevel">Section 2.1.4, “Class-level constraints”</a>), the element
type <code>TYPE</code> would have to be used. Constraints targeting the return value of a constructor need to
support the element type <code>CONSTRUCTOR</code>. Cross-parameter constraints (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-cross-parameter-constraints">Section 6.3, “Cross-parameter constraints”</a>) which are used to validate all the parameters of a method
or constructor together, must support <code>METHOD</code> or <code>CONSTRUCTOR</code>, respectively.</p>
</div>
</li>
<li>
<p><code>@Retention(RUNTIME)</code>: Specifies, that annotations of this type will be available at runtime by the
means of reflection</p>
</li>
<li>
<p><code>@Constraint(validatedBy = CheckCaseValidator.class)</code>: Marks the annotation type as constraint
annotation and specifies the validator to be used to validate elements annotated with <code>@CheckCase</code>.
If a constraint may be used on several data types, several validators may be specified, one for
each data type.</p>
</li>
<li>
<p><code>@Documented</code>: Says, that the use of <code>@CheckCase</code> will be contained in the JavaDoc of elements
annotated with it</p>
</li>
<li>
<p><code>@Repeatable(List.class)</code>: Indicates that the annotation can be repeated several times at the
same place, usually with a different configuration. <code>List</code> is the containing annotation type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This containing annotation type named <code>List</code> is also shown in the example. It allows to specify several
<code>@CheckCase</code> annotations on the same element, e.g. with different validation groups and messages.
While another name could be used, the Jakarta Bean Validation specification recommends to use the name
<code>List</code> and make the annotation an inner annotation of the corresponding constraint type.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-constraint-validator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-validator"></a>6.1.2. The constraint validator</h4>
<div class="paragraph">
<p>Having defined the annotation, you need to create a constraint validator, which is able to validate
elements with a <code>@CheckCase</code> annotation. To do so, implement the Jakarta Bean Validation interface <code>ConstraintValidator</code>
as shown below:</p>
</div>
<div id="example-constraint-validator" class="exampleblock">
<div class="title">Example 6.3: Implementing a constraint validator for the constraint <code>@CheckCase</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CheckCaseValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">CheckCase</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">CaseMode</span><span class="pln"> caseMode</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">CheckCase</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caseMode </span><span class="pun">=</span><span class="pln"> constraintAnnotation</span><span class="pun">.</span><span class="pln">value</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> constraintContext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> caseMode </span><span class="pun">==</span><span class="pln"> </span><span class="typ">CaseMode</span><span class="pun">.</span><span class="pln">UPPER </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>ConstraintValidator</code> interface defines two type parameters which are set in the implementation.
The first one specifies the annotation type to be validated (<code>CheckCase</code>), the second one the type of
elements, which the validator can handle (<code>String</code>). In case a constraint supports several data types,
a <code>ConstraintValidator</code> for each allowed type has to be implemented and registered at the constraint
annotation as shown above.</p>
</div>
<div class="paragraph">
<p>The implementation of the validator is straightforward. The <code>initialize()</code> method gives you access to
the attribute values of the validated constraint and allows you to store them in a field of the
validator as shown in the example.</p>
</div>
<div class="paragraph">
<p>The <code>isValid()</code> method contains the actual validation logic. For <code>@CheckCase</code> this is the check whether
a given string is either completely lower case or upper case, depending on the case mode retrieved
in <code>initialize()</code>. Note that the Jakarta Bean Validation specification recommends to consider null values as
being valid. If <code>null</code> is not a valid value for an element, it should be annotated with <code>@NotNull</code>
explicitly.</p>
</div>
<div class="sect4">
<h5 id="_the_code_constraintvalidatorcontext_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_the_code_constraintvalidatorcontext_code"></a>6.1.2.1. The <code>ConstraintValidatorContext</code></h5>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraint-validator">Example 6.3, “Implementing a constraint validator for the constraint <code>@CheckCase</code>”</a>
relies on the default error message generation by just returning <code>true</code> or <code>false</code> from the <code>isValid()</code>
method. Using the passed <code>ConstraintValidatorContext</code> object, it is possible to either add additional
error messages or completely disable the default error message generation and solely define custom
error messages. The <code>ConstraintValidatorContext</code> API is modeled as fluent interface and is best
demonstrated with an example:</p>
</div>
<div id="example-constraint-validator-context" class="exampleblock">
<div class="title">Example 6.4: Using <code>ConstraintValidatorContext</code> to define custom error messages</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">constraintvalidatorcontext</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">CheckCaseValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">CheckCase</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">CaseMode</span><span class="pln"> caseMode</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">CheckCase</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">caseMode </span><span class="pun">=</span><span class="pln"> constraintAnnotation</span><span class="pun">.</span><span class="pln">value</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> constraintContext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> caseMode </span><span class="pun">==</span><span class="pln"> </span><span class="typ">CaseMode</span><span class="pun">.</span><span class="pln">UPPER </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            isValid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            isValid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">!</span><span class="pln">isValid </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            constraintContext</span><span class="pun">.</span><span class="pln">disableDefaultConstraintViolation</span><span class="pun">();</span><span class="pln">
            constraintContext</span><span class="pun">.</span><span class="pln">buildConstraintViolationWithTemplate</span><span class="pun">(</span><span class="pln">
                    </span><span class="str">"{org.hibernate.validator.referenceguide.chapter06."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
                    </span><span class="str">"constraintvalidatorcontext.CheckCase.message}"</span><span class="pln">
            </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">addConstraintViolation</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> isValid</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraint-validator-context">Example 6.4, “Using <code>ConstraintValidatorContext</code> to define custom error messages”</a>
shows how you can disable the default error message generation and add a custom error message using
a specified message template. In this example the use of the <code>ConstraintValidatorContext</code> results in
the same error message as the default error message generation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is important to add each configured constraint violation by calling <code>addConstraintViolation()</code>.
Only after that the new constraint violation will be created.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="el-injection-caution" class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Be aware that the custom message template is passed directly to the Expression Language engine.</strong></p>
</div>
<div class="paragraph">
<p>Thus, you should be very careful when integrating user input in a custom message template as it will be interpreted
by the Expression Language engine, which is usually not the behavior you want and <strong>could allow malicious users to leak
sensitive data or even execute arbitrary code</strong>.</p>
</div>
<div class="paragraph">
<p>If you need to integrate user input in your message, you must <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-hibernateconstraintvalidatorcontext">pass it as an expression variable</a>
by unwrapping the context to <code>HibernateConstraintValidatorContext</code>.</p>
</div>
<div class="paragraph">
<p>The following validator is very unsafe as it includes user input in the violation message.
If the validated <code>value</code> contains EL expressions, they will be executed by the EL engine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">UnsafeValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ZipCode</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> value</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> value </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        context</span><span class="pun">.</span><span class="pln">disableDefaultConstraintViolation</span><span class="pun">();</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> isInvalid</span><span class="pun">(</span><span class="pln"> value </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            context
                    </span><span class="pun">.</span><span class="pln">buildConstraintViolationWithTemplate</span><span class="pun">(</span><span class="pln"> value </span><span class="pun">+</span><span class="pln"> </span><span class="str">" is not a valid ZIP code"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">addConstraintViolation</span><span class="pun">();</span><span class="pln">

            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isInvalid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// ...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following pattern must be used instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SafeValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ZipCode</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> value</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> value </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pln"> hibernateContext </span><span class="pun">=</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">unwrap</span><span class="pun">(</span><span class="pln">
                </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        hibernateContext</span><span class="pun">.</span><span class="pln">disableDefaultConstraintViolation</span><span class="pun">();</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> isInvalid</span><span class="pun">(</span><span class="pln"> value </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            hibernateContext
                    </span><span class="pun">.</span><span class="pln">addExpressionVariable</span><span class="pun">(</span><span class="pln"> </span><span class="str">"validatedValue"</span><span class="pun">,</span><span class="pln"> value </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">buildConstraintViolationWithTemplate</span><span class="pun">(</span><span class="pln"> </span><span class="str">"${validatedValue} is not a valid ZIP code"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">addConstraintViolation</span><span class="pun">();</span><span class="pln">

            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isInvalid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// ...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>By using expression variables, Hibernate Validator properly handles escaping and EL expressions won’t be executed.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-custom-property-paths">Section 6.2.1, “Custom property paths”</a> to learn how to use the <code>ConstraintValidatorContext</code> API to
control the property path of constraint violations for class-level constraints.</p>
</div>
</div>
<div class="sect4">
<h5 id="constraint-validator-hibernateconstraintvalidator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#constraint-validator-hibernateconstraintvalidator"></a>6.1.2.2. The <code>HibernateConstraintValidator</code> extension</h5>
<div class="paragraph">
<p>Hibernate Validator provides an extension to the <code>ConstraintValidator</code> contract: <code>HibernateConstraintValidator</code>.</p>
</div>
<div class="paragraph">
<p>The purpose of this extension is to provide more contextual information to the <code>initialize()</code> method
as, in the current <code>ConstraintValidator</code> contract, only the annotation is passed as parameter.</p>
</div>
<div class="paragraph">
<p>The <code>initialize()</code> method of <code>HibernateConstraintValidator</code> takes two parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>ConstraintDescriptor</code> of the constraint at hand.
You can get access to the annotation using <code>ConstraintDescriptor#getAnnotation()</code>.</p>
</li>
<li>
<p>The <code>HibernateConstraintValidatorInitializationContext</code> which provides useful helpers and contextual
information, such as the clock provider or the temporal validation tolerance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This extension is marked as incubating so it might be subject to change.
The plan is to standardize it and to include it in Jakarta Bean Validation in the future.</p>
</div>
<div class="paragraph">
<p>The example below shows how to base your validators on <code>HibernateConstraintValidator</code>:</p>
</div>
<div id="example-constraint-validator-hibernateconstraintvalidator" class="exampleblock">
<div class="title">Example 6.5: Using the <code>HibernateConstraintValidator</code> contract</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFutureValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">HibernateConstraintValidator</span><span class="pun">&lt;</span><span class="typ">MyFuture</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Instant</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Clock</span><span class="pln"> clock</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> orPresent</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">ConstraintDescriptor</span><span class="pun">&lt;</span><span class="typ">MyFuture</span><span class="pun">&gt;</span><span class="pln"> constraintDescriptor</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">HibernateConstraintValidatorInitializationContext</span><span class="pln"> initializationContext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">orPresent </span><span class="pun">=</span><span class="pln"> constraintDescriptor</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">().</span><span class="pln">orPresent</span><span class="pun">();</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clock </span><span class="pun">=</span><span class="pln"> initializationContext</span><span class="pun">.</span><span class="pln">getClockProvider</span><span class="pun">().</span><span class="pln">getClock</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">Instant</span><span class="pln"> instant</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> constraintContext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You should only implement one of the <code>initialize()</code> methods. Be aware that both are called when initializing the validator.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect4">
<h5 id="constraint-validator-payload"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#constraint-validator-payload"></a>6.1.2.3. Passing a payload to the constraint validator</h5>
<div class="paragraph">
<p>From time to time, you might want to condition the constraint validator behavior on some external parameters.</p>
</div>
<div class="paragraph">
<p>For instance, your zip code validator could vary depending on the locale of your application instance if you have one
instance per country.
Another requirement could be to have different behaviors on specific environments: the staging environment may not have
access to some external production resources necessary for the correct functioning of a validator.</p>
</div>
<div class="paragraph">
<p>The notion of constraint validator payload was introduced for all these use cases.
It is an object passed from the <code>Validator</code> instance to each constraint validator via the <code>HibernateConstraintValidatorContext</code>.</p>
</div>
<div class="paragraph">
<p>The example below shows how to set a constraint validator payload during the <code>ValidatorFactory</code> initialization.
Unless you override this default value, all the <code>Validator</code>s created by this <code>ValidatorFactory</code> will have this
constraint validator payload value set.</p>
</div>
<div id="example-constraint-validator-payload-definition-validatorfactory" class="exampleblock">
<div class="title">Example 6.6: Defining a constraint validator payload during the <code>ValidatorFactory</code> initialization</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">constraintValidatorPayload</span><span class="pun">(</span><span class="pln"> </span><span class="str">"US"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">

</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Another option is to set the constraint validator payload per <code>Validator</code> using a context:</p>
</div>
<div id="example-constraint-validator-payload-definition-validatorcontext" class="exampleblock">
<div class="title">Example 6.7: Defining a constraint validator payload using a <code>Validator</code> context</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">HibernateValidatorFactory</span><span class="pln"> hibernateValidatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">unwrap</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidatorFactory</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> hibernateValidatorFactory</span><span class="pun">.</span><span class="pln">usingContext</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">constraintValidatorPayload</span><span class="pun">(</span><span class="pln"> </span><span class="str">"US"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

</span><span class="com">// [...] US specific validation checks</span><span class="pln">

validator </span><span class="pun">=</span><span class="pln"> hibernateValidatorFactory</span><span class="pun">.</span><span class="pln">usingContext</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">constraintValidatorPayload</span><span class="pun">(</span><span class="pln"> </span><span class="str">"FR"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

</span><span class="com">// [...] France specific validation checks</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once you have set the constraint validator payload, it can be used in your constraint validators as shown in the example below:</p>
</div>
<div id="example-constraint-validator-payload-usage" class="exampleblock">
<div class="title">Example 6.8: Using the constraint validator payload in a constraint validator</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">constraintvalidatorpayload</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ZipCodeValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ZipCode</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> countryCode</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> </span><span class="kwd">object</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> constraintContext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">boolean</span><span class="pln"> isValid </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

        </span><span class="typ">String</span><span class="pln"> countryCode </span><span class="pun">=</span><span class="pln"> constraintContext
                </span><span class="pun">.</span><span class="pln">unwrap</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintValidatorPayload</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="str">"US"</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> countryCode </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// checks specific to the United States</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="str">"FR"</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> countryCode </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// checks specific to France</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="com">// ...</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> isValid</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><code>HibernateConstraintValidatorContext#getConstraintValidatorPayload()</code> has a type parameter
and returns the payload only if the payload is of the given type.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is important to note that the constraint validator payload is different from the dynamic payload you can include in
the constraint violation raised.</p>
</div>
<div class="paragraph">
<p>The whole purpose of this constraint validator payload is to be used to condition the behavior of your constraint validators.
It is not included in the constraint violations, unless a specific <code>ConstraintValidator</code> implementation passes on the
payload to emitted constraint violations by using the <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-dynamic-payload">constraint violation dynamic payload mechanism</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="validator-customconstraints-errormessage"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-errormessage"></a>6.1.3. The error message</h4>
<div class="paragraph">
<p>The last missing building block is an error message which should be used in case a <code>@CheckCase</code>
constraint is violated. To define this, create a file <em>ValidationMessages.properties</em> with the
following contents (see also <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-message-interpolation">Section 4.1, “Default message interpolation”</a>):</p>
</div>
<div class="exampleblock">
<div class="title">Example 6.9: Defining a custom error message for the <code>CheckCase</code> constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>org.hibernate.validator.referenceguide.chapter06.CheckCase.message=Case mode must be {value}.</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If a validation error occurs, the validation runtime will use the default value, that you specified
for the message attribute of the <code>@CheckCase</code> annotation to look up the error message in this resource
bundle.</p>
</div>
</div>
<div class="sect3">
<h4 id="validator-customconstraints-using"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints-using"></a>6.1.4. Using the constraint</h4>
<div class="paragraph">
<p>You can now use the constraint in the <code>Car</code> class from the <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted">Chapter 1, <em>Getting started</em></a> chapter to
specify that the <code>licensePlate</code> field should only contain upper-case strings:</p>
</div>
<div id="example-car-with-checkcase" class="exampleblock">
<div class="title">Example 6.10: Applying the <code>@CheckCase</code> constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
    </span><span class="lit">@CheckCase</span><span class="pun">(</span><span class="typ">CaseMode</span><span class="pun">.</span><span class="pln">UPPER</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">2</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">licensePlate </span><span class="pun">=</span><span class="pln"> licencePlate</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">seatCount </span><span class="pun">=</span><span class="pln"> seatCount</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Finally, <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-checkcase">Example 6.11, “Validating objects with the <code>@CheckCase</code> constraint”</a> demonstrates how validating a <code>Car</code> instance with an invalid
license plate causes the <code>@CheckCase</code> constraint to be violated.</p>
</div>
<div id="example-using-checkcase" class="exampleblock">
<div class="title">Example 6.11: Validating objects with the <code>@CheckCase</code> constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">//invalid license plate</span><span class="pln">
</span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"dd-ab-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln">
        validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"Case mode must be UPPER."</span><span class="pun">,</span><span class="pln">
        constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//valid license plate</span><span class="pln">
car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Morris"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"DD-AB-123"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-class-level-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-class-level-constraints"></a>6.2. Class-level constraints</h3>
<div class="paragraph">
<p>As discussed earlier, constraints can also be applied on the class level to validate the state of an
entire object. Class-level constraints are defined in the same way as are property constraints.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-implementing-classlevel-constraint">Example 6.12, “Implementing a class-level constraint”</a> shows constraint annotation and validator of the
<code>@ValidPassengerCount</code> constraint you already saw in use in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-class-level">Example 2.9, “Class-level constraint”</a>.</p>
</div>
<div id="example-implementing-classlevel-constraint" class="exampleblock">
<div class="title">Example 6.12: Implementing a class-level constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">classlevel</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> TYPE</span><span class="pun">,</span><span class="pln"> ANNOTATION_TYPE </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Constraint</span><span class="pun">(</span><span class="pln">validatedBy </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">ValidPassengerCountValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Documented</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">ValidPassengerCount</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter06.classlevel."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
            </span><span class="str">"ValidPassengerCount.message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">classlevel</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ValidPassengerCountValidator</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ValidPassengerCount</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">ValidPassengerCount</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">Car</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> car </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> car</span><span class="pun">.</span><span class="pln">getPassengers</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> car</span><span class="pun">.</span><span class="pln">getSeatCount</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As the example demonstrates, you need to use the element type <code>TYPE</code> in the <code>@Target</code> annotation. This
allows the constraint to be put on type definitions. The validator of the constraint in the example
receives a <code>Car</code> in the <code>isValid()</code> method and can access the complete object state to decide whether
the given instance is valid or not.</p>
</div>
<div class="sect3">
<h4 id="section-custom-property-paths"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-custom-property-paths"></a>6.2.1. Custom property paths</h4>
<div class="paragraph">
<p>By default the constraint violation for a class-level constraint is reported on the level of the
annotated type, e.g. <code>Car</code>.</p>
</div>
<div class="paragraph">
<p>In some cases it is preferable though that the violation’s property path refers to one of the
involved properties. For instance you might want to report the <code>@ValidPassengerCount</code> constraint
against the passengers property instead of the <code>Car</code> bean.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-custom-error">Example 6.13, “Adding a new <code>ConstraintViolation</code> with custom property path”</a>
shows how this can be done by using the constraint validator context passed to <code>isValid()</code> to build a
custom constraint violation with a property node for the property passengers. Note that you also
could add several property nodes, pointing to a sub-entity of the validated bean.</p>
</div>
<div id="example-custom-error" class="exampleblock">
<div class="title">Example 6.13: Adding a new <code>ConstraintViolation</code> with custom property path</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">custompath</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ValidPassengerCountValidator</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ValidPassengerCount</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">ValidPassengerCount</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">Car</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> constraintValidatorContext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> car </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">boolean</span><span class="pln"> isValid </span><span class="pun">=</span><span class="pln"> car</span><span class="pun">.</span><span class="pln">getPassengers</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> car</span><span class="pun">.</span><span class="pln">getSeatCount</span><span class="pun">();</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">!</span><span class="pln">isValid </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            constraintValidatorContext</span><span class="pun">.</span><span class="pln">disableDefaultConstraintViolation</span><span class="pun">();</span><span class="pln">
            constraintValidatorContext
                    </span><span class="pun">.</span><span class="pln">buildConstraintViolationWithTemplate</span><span class="pun">(</span><span class="pln"> </span><span class="str">"{my.custom.template}"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">addPropertyNode</span><span class="pun">(</span><span class="pln"> </span><span class="str">"passengers"</span><span class="pln"> </span><span class="pun">).</span><span class="pln">addConstraintViolation</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> isValid</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-cross-parameter-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-cross-parameter-constraints"></a>6.3. Cross-parameter constraints</h3>
<div class="paragraph">
<p>Jakarta Bean Validation distinguishes between two different kinds of constraints.</p>
</div>
<div class="paragraph">
<p>Generic constraints (which have been discussed so far) apply to the annotated element, e.g. a type,
field, container element, method parameter or return value etc.
Cross-parameter constraints, in contrast, apply to the array of parameters of a method or constructor
and can be used to express validation logic which depends on several parameter values.</p>
</div>
<div class="paragraph">
<p>In order to define a cross-parameter constraint, its validator class must be annotated with
<code>@SupportedValidationTarget(ValidationTarget.PARAMETERS)</code>. The type parameter <code>T</code> from the
<code>ConstraintValidator</code> interface must resolve to either <code>Object</code> or <code>Object[]</code> in order to receive the
array of method/constructor arguments in the <code>isValid()</code> method.</p>
</div>
<div class="paragraph">
<p>The following example shows the definition of a cross-parameter constraint which can be used to
check that two <code>Date</code> parameters of a method are in the correct order:</p>
</div>
<div class="exampleblock">
<div class="title">Example 6.14: Cross-parameter constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">crossparameter</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@Constraint</span><span class="pun">(</span><span class="pln">validatedBy </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ConsistentDateParametersValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> METHOD</span><span class="pun">,</span><span class="pln"> CONSTRUCTOR</span><span class="pun">,</span><span class="pln"> ANNOTATION_TYPE </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Documented</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">ConsistentDateParameters</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter04."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
            </span><span class="str">"crossparameter.ConsistentDateParameters.message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The definition of a cross-parameter constraint isn’t any different from defining a generic
constraint, i.e. it must specify the members <code>message()</code>, <code>groups()</code> and <code>payload()</code> and be annotated with
<code>@Constraint</code>. This meta annotation also specifies the corresponding validator, which is shown in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cross-parameter-validator">Example 6.15, “Generic and cross-parameter constraint”</a>. Note that besides the element types <code>METHOD</code> and <code>CONSTRUCTOR</code>
also <code>ANNOTATION_TYPE</code> is specified as target of the annotation, in order to enable the creation of
composed constraints based on <code>@ConsistentDateParameters</code> (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-composition">Section 6.4, “Constraint composition”</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Cross-parameter constraints are specified directly on the declaration of a method or constructor,
which is also the case for return value constraints. In order to improve code readability, it is
therefore recommended to choose constraint names - such as <code>@ConsistentDateParameters</code> - which make the
constraint target apparent.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="example-cross-parameter-validator" class="exampleblock">
<div class="title">Example 6.15: Generic and cross-parameter constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">crossparameter</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@SupportedValidationTarget</span><span class="pun">(</span><span class="typ">ValidationTarget</span><span class="pun">.</span><span class="pln">PARAMETERS</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ConsistentDateParametersValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln">
        </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ConsistentDateParameters</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[]&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">ConsistentDateParameters</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">Object</span><span class="pun">[]</span><span class="pln"> value</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> value</span><span class="pun">.</span><span class="pln">length </span><span class="pun">!=</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalArgumentException</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Illegal method signature"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="com">//leave null-checking to @NotNull on individual parameters</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> value</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> value</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">!(</span><span class="pln"> value</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!(</span><span class="pln"> value</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalArgumentException</span><span class="pun">(</span><span class="pln">
                    </span><span class="str">"Illegal method signature, expected two "</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
                            </span><span class="str">"parameters of type Date."</span><span class="pln">
            </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Date</span><span class="pun">)</span><span class="pln"> value</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">).</span><span class="pln">before</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Date</span><span class="pun">)</span><span class="pln"> value</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As discussed above, the validation target <code>PARAMETERS</code> must be configured for a cross-parameter
validator by using the <code>@SupportedValidationTarget</code> annotation. Since a cross-parameter constraint
could be applied to any method or constructor, it is considered a best practice to check for the
expected number and types of parameters in the validator implementation.</p>
</div>
<div class="paragraph">
<p>As with generic constraints, <code>null</code> parameters should be considered valid and <code>@NotNull</code> on the
individual parameters should be used to make sure that parameters are not <code>null</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Similar to class-level constraints, you can create custom constraint violations on single parameters
instead of all parameters when validating a cross-parameter constraint. Just obtain a node builder
from the <code>ConstraintValidatorContext</code> passed to <code>isValid()</code> and add a parameter node by calling
<code>addParameterNode()</code>. In the example you could use this to create a constraint violation on the end
date parameter of the validated method.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In rare situations a constraint is both, generic and cross-parameter. This is the case if a
constraint has a validator class which is annotated with
<code>@SupportedValidationTarget({ValidationTarget.PARAMETERS, ValidationTarget.ANNOTATED_ELEMENT})</code> or if
it has a generic and a cross-parameter validator class.</p>
</div>
<div class="paragraph">
<p>When declaring such a constraint on a method which has parameters and also a return value, the
intended constraint target can’t be determined. Constraints which are generic and cross-parameter at
the same time must therefore define a member <code>validationAppliesTo()</code> which allows the constraint user
to specify the constraint’s target as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-dual-cross-parameter-constraint">Example 6.16, “Generic and cross-parameter constraint”</a>.</p>
</div>
<div id="example-dual-cross-parameter-constraint" class="exampleblock">
<div class="title">Example 6.16: Generic and cross-parameter constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">crossparameter</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@Constraint</span><span class="pun">(</span><span class="pln">validatedBy </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">ScriptAssertObjectValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">ScriptAssertParametersValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> TYPE</span><span class="pun">,</span><span class="pln"> FIELD</span><span class="pun">,</span><span class="pln"> PARAMETER</span><span class="pun">,</span><span class="pln"> METHOD</span><span class="pun">,</span><span class="pln"> CONSTRUCTOR</span><span class="pun">,</span><span class="pln"> ANNOTATION_TYPE </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Documented</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">ScriptAssert</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter04."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
            </span><span class="str">"crossparameter.ScriptAssert.message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> script</span><span class="pun">();</span><span class="pln">

    </span><span class="typ">ConstraintTarget</span><span class="pln"> validationAppliesTo</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="typ">ConstraintTarget</span><span class="pun">.</span><span class="pln">IMPLICIT</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>@ScriptAssert</code> constraint has two validators (not shown), a generic and a cross-parameter one and
thus defines the member <code>validationAppliesTo()</code>. The default value <code>IMPLICIT</code> allows to derive the
target automatically in situations where this is possible (e.g. if the constraint is declared on a
field or on a method which has parameters but no return value).</p>
</div>
<div class="paragraph">
<p>If the target can not be determined implicitly, it must be set by the user to either <code>PARAMETERS</code> or
<code>RETURN_VALUE</code> as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-dual-cross-parameter-constraint-usage">Example 6.17, “Specifying the target for a generic and cross-parameter constraint”</a>.</p>
</div>
<div id="example-dual-cross-parameter-constraint-usage" class="exampleblock">
<div class="title">Example 6.17: Specifying the target for a generic and cross-parameter constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@ScriptAssert</span><span class="pun">(</span><span class="pln">script </span><span class="pun">=</span><span class="pln"> </span><span class="str">"arg1.size() &lt;= arg0"</span><span class="pun">,</span><span class="pln"> validationAppliesTo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ConstraintTarget</span><span class="pun">.</span><span class="pln">PARAMETERS</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> buildCar</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> seatCount</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Passenger</span><span class="pun">&gt;</span><span class="pln"> passengers</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">//...</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-constraint-composition"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-composition"></a>6.4. Constraint composition</h3>
<div class="paragraph">
<p>Looking at the <code>licensePlate</code> field of the <code>Car</code> class in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-car-with-checkcase">Example 6.10, “Applying the <code>@CheckCase</code> constraint”</a>, you see three
constraint annotations already. In more complex scenarios, where even more constraints could be applied
to one element, this might easily become a bit confusing. Furthermore, if there was a <code>licensePlate</code>
field in another class, you would have to copy all constraint declarations to the other class as
well, violating the DRY principle.</p>
</div>
<div class="paragraph">
<p>You can address this kind of problem by creating higher level constraints, composed from several
basic constraints. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-composed-constraint">Example 6.18, “Creating a composing constraint <code>@ValidLicensePlate</code>”</a> shows a composed constraint annotation which
comprises the constraints <code>@NotNull</code>, <code>@Size</code> and <code>@CheckCase</code>:</p>
</div>
<div id="example-composed-constraint" class="exampleblock">
<div class="title">Example 6.18: Creating a composing constraint <code>@ValidLicensePlate</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">constraintcomposition</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@NotNull</span><span class="pln">
</span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@CheckCase</span><span class="pun">(</span><span class="typ">CaseMode</span><span class="pun">.</span><span class="pln">UPPER</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> METHOD</span><span class="pun">,</span><span class="pln"> FIELD</span><span class="pun">,</span><span class="pln"> ANNOTATION_TYPE</span><span class="pun">,</span><span class="pln"> TYPE_USE </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Constraint</span><span class="pun">(</span><span class="pln">validatedBy </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Documented</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">ValidLicensePlate</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter06."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
            </span><span class="str">"constraintcomposition.ValidLicensePlate.message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To create a composed constraint, simply annotate the constraint declaration with its comprising
constraints. If the composed constraint itself requires a validator, this validator is to be
specified within the <code>@Constraint</code> annotation. For composed constraints which don’t need an additional
validator such as <code>@ValidLicensePlate</code>, just set <code>validatedBy()</code> to an empty array.</p>
</div>
<div class="paragraph">
<p>Using the new composed constraint at the <code>licensePlate</code> field is fully equivalent to the previous
version, where the three constraints were declared directly at the field itself:</p>
</div>
<div class="exampleblock">
<div class="title">Example 6.19: Application of composing constraint <code>ValidLicensePlate</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">constraintcomposition</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@ValidLicensePlate</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The set of <code>ConstraintViolation</code>s retrieved when validating a <code>Car</code> instance will contain an entry for
each violated composing constraint of the <code>@ValidLicensePlate</code> constraint. If you rather prefer a
single <code>ConstraintViolation</code> in case any of the composing constraints is violated, the
<code>@ReportAsSingleViolation</code> meta constraint can be used as follows:</p>
</div>
<div class="exampleblock">
<div class="title">Example 6.20: Using @ReportAsSingleViolation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter06</span><span class="pun">.</span><span class="pln">constraintcomposition</span><span class="pun">.</span><span class="pln">reportassingle</span><span class="pun">;</span><span class="pln">

</span><span class="com">//...</span><span class="pln">
</span><span class="lit">@ReportAsSingleViolation</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">ValidLicensePlate</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter06."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
            </span><span class="str">"constraintcomposition.reportassingle.ValidLicensePlate.message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter-valueextraction"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-valueextraction"></a>7. Value extraction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Value extraction is the process of extracting values from a container so that
they can be validated.</p>
</div>
<div class="paragraph">
<p>It is used when dealing with <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#container-element-constraints">container element
constraints</a> and <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cascaded-validation-list">cascaded validation inside
containers</a>.</p>
</div>
<div class="sect2">
<h3 id="section-valueextraction-builtinvalueextractors"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-builtinvalueextractors"></a>7.1. Built-in value extractors</h3>
<div class="paragraph">
<p>Hibernate Validator comes with built-in value extractors for the usual Java container
types so, except if you are using your own custom container types (or the ones
of external libraries such as <a href="https://github.com/google/guava">Guava</a>'s <code>Multimap</code>),
you should not have to add your own value extractors.</p>
</div>
<div class="paragraph">
<p>Built-in value extractors are present for all the following container types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.util.Iterable</code>;</p>
</li>
<li>
<p><code>java.util.List</code>;</p>
</li>
<li>
<p><code>java.util.Map</code>: for keys and values;</p>
</li>
<li>
<p><code>java.util.Optional</code>, <code>java.util.OptionalInt</code>, <code>java.util.OptionalLong</code> and <code>java.util.OptionalDouble</code>;</p>
</li>
<li>
<p><a href="http://docs.oracle.com/javase/8/javase-clienttechnologies.htm">JavaFX</a>'s <code>ObservableValue</code> (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-javafx">Section 7.4, “JavaFX value extractors”</a>
for more details).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The complete list of built-in value extractors with all the details on how they
behave can be found in the
<a href="http://beanvalidation.org/2.0/spec/#valueextractordefinition-builtinvalueextractors">Jakarta Bean Validation specification</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_a_code_valueextractor_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_implementing_a_code_valueextractor_code"></a>7.2. Implementing a <code>ValueExtractor</code></h3>
<div class="paragraph">
<p>To extract values from a custom container, one needs to implement a <code>ValueExtractor</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Implementing a <code>ValueExtractor</code> is not enough, you also need to register it.
See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-registeringvalueextractor">Section 7.5, “Registering a <code>ValueExtractor</code>”</a> for more details.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><code>ValueExtractor</code> is a very simple API as the only purpose of a value extractor is to provide
the extracted values to a <code>ValueReceiver</code>.</p>
</div>
<div class="paragraph">
<p>For instance, let’s consider the case of Guava’s <code>Optional</code>. It is an easy example
as we can shape its value extractor after the <code>java.util.Optional</code> one:</p>
</div>
<div id="example-valueextraction-guava-optional-valueextractor" class="exampleblock">
<div class="title">Example 7.1: A <code>ValueExtractor</code> for Guava’s <code>Optional</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter07</span><span class="pun">.</span><span class="pln">valueextractor</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">OptionalValueExtractor</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ValueExtractor</span><span class="pun">&lt;</span><span class="typ">Optional</span><span class="pun">&lt;</span><span class="lit">@ExtractedValue</span><span class="pln"> </span><span class="pun">?&gt;&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> extractValues</span><span class="pun">(</span><span class="typ">Optional</span><span class="pun">&lt;?&gt;</span><span class="pln"> originalValue</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ValueReceiver</span><span class="pln"> receiver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        receiver</span><span class="pun">.</span><span class="pln">value</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">orNull</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Some explanations are in order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>@ExtractedValue</code> annotation marks the type argument under consideration: it
is going to be used to resolve the type of the validated value;</p>
</li>
<li>
<p>We use the <code>value()</code> method of the receiver as <code>Optional</code> is a pure wrapper type;</p>
</li>
<li>
<p>We don’t want to add a node to the property path of the constraint violation
as we want the violation to be reported as if it were directly on the property
so we pass a <code>null</code> node name to <code>value()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A more interesting example is the case of Guava’s <code>Multimap</code>: we would like to be
able to validate both the keys and the values of this container type.</p>
</div>
<div class="paragraph">
<p>Let’s first consider the case of the values. A value extractor extracting them
is required:</p>
</div>
<div id="example-valueextraction-guava-multimap-value-valueextractor" class="exampleblock">
<div class="title">Example 7.2: A <code>ValueExtractor</code> for <code>Multimap</code> values</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter07</span><span class="pun">.</span><span class="pln">valueextractor</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MultimapValueValueExtractor</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ValueExtractor</span><span class="pun">&lt;</span><span class="typ">Multimap</span><span class="pun">&lt;?,</span><span class="pln"> </span><span class="lit">@ExtractedValue</span><span class="pln"> </span><span class="pun">?&gt;&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> extractValues</span><span class="pun">(</span><span class="typ">Multimap</span><span class="pun">&lt;?,</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln"> originalValue</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ValueReceiver</span><span class="pln"> receiver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="typ">Entry</span><span class="pun">&lt;?,</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln"> entry </span><span class="pun">:</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">entries</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            receiver</span><span class="pun">.</span><span class="pln">keyedValue</span><span class="pun">(</span><span class="pln"> </span><span class="str">"&lt;multimap value&gt;"</span><span class="pun">,</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">(),</span><span class="pln"> entry</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>It allows to validate constraints for the values of the <code>Multimap</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 7.3: Constraints on the values of a <code>Multimap</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">private</span><span class="pln"> </span><span class="typ">Multimap</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@NotBlank</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> map1</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Another value extractor is required to be able to put constraints on the keys
of a <code>Multimap</code>:</p>
</div>
<div id="example-valueextraction-guava-multimap-key-valueextractor" class="exampleblock">
<div class="title">Example 7.4: A <code>ValueExtractor</code> for <code>Multimap</code> keys</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter07</span><span class="pun">.</span><span class="pln">valueextractor</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MultimapKeyValueExtractor</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ValueExtractor</span><span class="pun">&lt;</span><span class="typ">Multimap</span><span class="pun">&lt;</span><span class="lit">@ExtractedValue</span><span class="pln"> </span><span class="pun">?,</span><span class="pln"> </span><span class="pun">?&gt;&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> extractValues</span><span class="pun">(</span><span class="typ">Multimap</span><span class="pun">&lt;?,</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln"> originalValue</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ValueReceiver</span><span class="pln"> receiver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> key </span><span class="pun">:</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">keySet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            receiver</span><span class="pun">.</span><span class="pln">keyedValue</span><span class="pun">(</span><span class="pln"> </span><span class="str">"&lt;multimap key&gt;"</span><span class="pun">,</span><span class="pln"> key</span><span class="pun">,</span><span class="pln"> key </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once these two value extractors are registered, you can declare constraints on the
keys and values of a <code>Multimap</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 7.5: Constraints on the keys and values of a <code>Multimap</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">private</span><span class="pln"> </span><span class="typ">Multimap</span><span class="pun">&lt;</span><span class="lit">@NotBlank</span><span class="pln"> </span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@NotBlank</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> map2</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The differences between the two value extractors may be a bit subtle at a first
glance so let’s shed some light on them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>@ExtractedValue</code> annotation marks the targeted type argument (either
<code>K</code> or <code>V</code> in this case).</p>
</li>
<li>
<p>We use different node names (<code>&lt;multimap key&gt;</code> vs. <code>&lt;multimap value&gt;</code>).</p>
</li>
<li>
<p>In one case, we pass the values to the receiver (third argument of the
<code>keyedValue()</code> call), in the other, we pass the keys.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Depending on your container type, you should choose the <code>ValueReceiver</code>
method fitting the best:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>value()</code></dt>
<dd>
<p>for a simple wrapping container - it is used for <code>Optional</code>s</p>
</dd>
<dt class="hdlist1"><code>iterableValue()</code></dt>
<dd>
<p>for an iterable container - it is used for <code>Set</code>s</p>
</dd>
<dt class="hdlist1"><code>indexedValue()</code></dt>
<dd>
<p>for a container containing indexed values - it is used for <code>List</code>s</p>
</dd>
<dt class="hdlist1"><code>keyedValue()</code></dt>
<dd>
<p>for a container containing keyed values - it is used for <code>Map</code>s.
It is used for both the keys and the values. In the case of keys,
the key is also passed as the validated value.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For all these methods, you need to pass a node name: it is the name included in
the node added to the property path of the constraint violation. As mentioned
earlier, if the node name is <code>null</code>, no node is added to the property path:
it is be useful for pure wrapper types similar to <code>Optional</code>.</p>
</div>
<div class="paragraph">
<p>The choice of the method used is important as it adds contextual information to the
property path of the constraint violation e.g. the index or the key of the
validated value.</p>
</div>
</div>
<div class="sect2">
<h3 id="_non_generic_containers"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_non_generic_containers"></a>7.3. Non generic containers</h3>
<div class="paragraph">
<p>You might have noticed that, until now, we only implemented value extractors
for generic containers.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator also supports value extraction for non generic containers.</p>
</div>
<div class="paragraph">
<p>Let’s take the case of <code>java.util.OptionalInt</code> which wraps a primitive <code>int</code>
into an <code>Optional</code>-like container.</p>
</div>
<div class="paragraph">
<p>A first attempt at a value extractor for <code>OptionalInt</code> would look like:</p>
</div>
<div id="example-valueextraction-optionalint-valueextractor" class="exampleblock">
<div class="title">Example 7.6: A <code>ValueExtractor</code> for <code>OptionalInt</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter07</span><span class="pun">.</span><span class="pln">nongeneric</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">OptionalIntValueExtractor</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ValueExtractor</span><span class="pun">&lt;</span><span class="lit">@ExtractedValue</span><span class="pun">(</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln"> </span><span class="typ">OptionalInt</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> extractValues</span><span class="pun">(</span><span class="typ">OptionalInt</span><span class="pln"> originalValue</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ValueReceiver</span><span class="pln"> receiver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        receiver</span><span class="pun">.</span><span class="pln">value</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">isPresent</span><span class="pun">()</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">getAsInt</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There is an obvious thing missing for a non generic container: we don’t have
a type parameter. It has two consequences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>we cannot determine the type of the validated value using the type argument;</p>
</li>
<li>
<p>we cannot add constraints on the type argument (e.g. <code>Container&lt;@NotNull String&gt;</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>First things first, we need a way to tell Hibernate Validator that the value
extracted from an <code>OptionalInt</code> is of type <code>Integer</code>.
As you can see in the above example, the <code>type</code> attribute of the <code>@ExtractedValue</code>
annotation allows to provide this information to the validation engine.</p>
</div>
<div class="paragraph">
<p>Then you have to tell the validation engine that the <code>Min</code> constraint you want to
add to the <code>OptionalInt</code> property relates to the wrapped value and not the wrapper.</p>
</div>
<div class="paragraph">
<p>Jakarta Bean Validation provides the <code>Unwrapping.Unwrap</code> payload for this situation:</p>
</div>
<div id="example-valueextraction-optionalint-unwrapping" class="exampleblock">
<div class="title">Example 7.7: Using <code>Unwrapping.Unwrap</code> payload</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@Min</span><span class="pun">(</span><span class="pln">value </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> payload </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Unwrapping</span><span class="pun">.</span><span class="typ">Unwrap</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">OptionalInt</span><span class="pln"> optionalInt1</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If we take a step back, most - if not all - the constraints we would like to add to an
<code>OptionalInt</code> property would be applied to the wrapped value so having a way to make it
the default would be nice.</p>
</div>
<div class="paragraph">
<p>This is exactly what the <code>@UnwrapByDefault</code> annotation is for:</p>
</div>
<div id="example-valueextraction-optionalint-unwrapbydefault-valueextractor" class="exampleblock">
<div class="title">Example 7.8: A <code>ValueExtractor</code> for <code>OptionalInt</code> marked with <code>@UnwrapByDefault</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter07</span><span class="pun">.</span><span class="pln">nongeneric</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@UnwrapByDefault</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">UnwrapByDefaultOptionalIntValueExtractor</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ValueExtractor</span><span class="pun">&lt;</span><span class="lit">@ExtractedValue</span><span class="pun">(</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Integer</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln"> </span><span class="typ">OptionalInt</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> extractValues</span><span class="pun">(</span><span class="typ">OptionalInt</span><span class="pln"> originalValue</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ValueReceiver</span><span class="pln"> receiver</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        receiver</span><span class="pun">.</span><span class="pln">value</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">isPresent</span><span class="pun">()</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> originalValue</span><span class="pun">.</span><span class="pln">getAsInt</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When declaring this value extractor for <code>OptionalInt</code>, constraint annotations will
by default be applied to the wrapped value:</p>
</div>
<div id="example-valueextraction-optionalint-implicitunwrapping" class="exampleblock">
<div class="title">Example 7.9: Implicit unwrapping thanks to <code>@UnwrapByDefault</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@Min</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">OptionalInt</span><span class="pln"> optionalInt2</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that you can still declare an annotation for the wrapper itself by using
the <code>Unwrapping.Skip</code> payload:</p>
</div>
<div id="example-valueextraction-optionalint-avoid-implicitunwrapping" class="exampleblock">
<div class="title">Example 7.10: Avoid implicit unwrapping with <code>Unwrapping.Skip</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@NotNull</span><span class="pun">(</span><span class="pln">payload </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Unwrapping</span><span class="pun">.</span><span class="typ">Skip</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">OptionalInt</span><span class="pln"> optionalInt3</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>@UnwrapByDefault</code> value extractor for <code>OptionalInt</code> is part of the built-in
value extractors: there is no need to add one.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="section-valueextraction-javafx"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-javafx"></a>7.4. JavaFX value extractors</h3>
<div class="paragraph">
<p>Bean properties in JavaFX are typically not of simple data types like <code>String</code>
or <code>int</code>, but are wrapped in <code>Property</code> types which allows to make them observable,
use them for data binding etc.</p>
</div>
<div class="paragraph">
<p>Thus, value extraction is required to be able to apply constraints on the
wrapped values.</p>
</div>
<div class="paragraph">
<p>The JavaFX <code>ObservableValue</code> value extractor is marked with <code>@UnwrapByDefault</code>.
As such, the constraints hosted on the container target the wrapped value by
default.</p>
</div>
<div class="paragraph">
<p>Thus, you can constrain a <code>StringProperty</code> as below:</p>
</div>
<div class="exampleblock">
<div class="title">Example 7.11: Constraining a <code>StringProperty</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@NotBlank</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">StringProperty</span><span class="pln"> stringProperty</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Or a <code>LongProperty</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 7.12: Constraining a <code>LongProperty</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@Min</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">LongProperty</span><span class="pln"> longProperty</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The iterable property types, namely <code>ReadOnlyListProperty</code>,
<code>ListProperty</code> and their <code>Set</code> and <code>Map</code> counterparts are generic and, as such,
container element constraints can be used. Thus, they have specific value
extractors that are not marked with <code>@UnwrapByDefault</code>.</p>
</div>
<div class="paragraph">
<p>A <code>ReadOnlyListProperty</code> would naturally be constrained as a <code>List</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 7.13: Constraining a <code>ReadOnlyListProperty</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> </span><span class="typ">ReadOnlyListProperty</span><span class="pun">&lt;</span><span class="lit">@NotBlank</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> listProperty</span><span class="pun">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-valueextraction-registeringvalueextractor"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-registeringvalueextractor"></a>7.5. Registering a <code>ValueExtractor</code></h3>
<div class="paragraph">
<p>Hibernate Validator does not detect automatically the value extractors in the
classpath so they have to be registered.</p>
</div>
<div class="paragraph">
<p>There are several ways to register value extractors (in increasing order of
priority):</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Provided by the validation engine itself</dt>
<dd>
<p>See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-builtinvalueextractors">Section 7.1, “Built-in value extractors”</a>.</p>
</dd>
<dt class="hdlist1">Via the Java service loader mechanism</dt>
<dd>
<p>The file <code>META-INF/services/javax.validation.valueextraction.ValueExtractor</code>
must be provided, with the fully-qualified names of one or more value
extractor implementations as its contents, each on a separate line.</p>
</dd>
<dt class="hdlist1">In the <code>META-INF/validation.xml</code> file</dt>
<dd>
<p>See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuration-validation-xml">Section 8.1, “Configuring the validator factory in <em>validation.xml</em>”</a> for more information about
how to register value extractors in the XML configuration.</p>
</dd>
<dt class="hdlist1">By calling <code>Configuration#addValueExtractor(ValueExtractor&lt;?&gt;)</code></dt>
<dd>
<p>See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-bootstrapping-valueextractors">Section 9.2.6, “Registering <code>ValueExtractor</code>s”</a>
for more information.</p>
</dd>
<dt class="hdlist1">By invoking <code>ValidatorContext#addValueExtractor(ValueExtractor&lt;?&gt;)</code></dt>
<dd>
<p>It only declares the value extractor for this <code>Validator</code> instance.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>A value extractor for a given type and type parameter specified at a higher
priority overrides any other extractors for the same type and type parameter
given at lower priorities.</p>
</div>
</div>
<div class="sect2">
<h3 id="_resolution_algorithms"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_resolution_algorithms"></a>7.6. Resolution algorithms</h3>
<div class="paragraph">
<p>In most cases, you should not have to worry about this but, if you are overriding
existing value extractors, you can find a detailed description of the value
extractors resolution algorithms in the Jakarta Bean Validation specification:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for <a href="http://beanvalidation.org/2.0/spec/#constraintdeclarationvalidationprocess-validationroutine-valueextractorresolution-algorithm-constraints">container element constraints</a>,</p>
</li>
<li>
<p>for <a href="http://beanvalidation.org/2.0/spec/#constraintdeclarationvalidationprocess-validationroutine-valueextractorresolution-algorithm-cascaded">cascaded validation</a>,</p>
</li>
<li>
<p>and for <a href="http://beanvalidation.org/2.0/spec/#constraintdeclarationvalidationprocess-validationroutine-valueextractorresolution-implicitunwrapping">implicit unwrapping</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>One important thing to have in mind is that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for container element constraints, the declared type is used to resolve the value
extractors;</p>
</li>
<li>
<p>for cascaded validation, it is the runtime type.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter-xml-configuration"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration"></a>8. Configuring via XML</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So far we have used the default configuration source for Jakarta Bean Validation, namely annotations.
However, there also exist two kinds of XML descriptors allowing configuration via XML. The first
descriptor describes general Jakarta Bean Validation behaviour and is provided as <em>META-INF/validation.xml</em>.
The second one describes constraint declarations and closely matches the constraint declaration
approach via annotations. Let’s have a look at these two document types.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The XSD files are available via
<a href="http://xmlns.jcp.org/xml/ns/validation/configuration" class="bare">http://xmlns.jcp.org/xml/ns/validation/configuration</a> and
<a href="http://xmlns.jcp.org/xml/ns/validation/mapping" class="bare">http://xmlns.jcp.org/xml/ns/validation/mapping</a>.</p>
</div>
<div class="paragraph">
<p>More information about the XML schemas can be found on the
<a href="http://beanvalidation.org/xml/ns/validation/">Jakarta Bean Validation website</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="section-configuration-validation-xml"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuration-validation-xml"></a>8.1. Configuring the validator factory in <em>validation.xml</em></h3>
<div class="paragraph">
<p>The key to enable XML configuration for Hibernate Validator is the file <em>META-INF/validation.xml</em>.
If this file exists on the classpath its configuration will be applied when the <code>ValidatorFactory</code>
gets created. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#image-validation-configuration">Figure 1, “Validation configuration schema”</a> shows a model view of the XML schema to which
<em>validation.xml</em> has to adhere.</p>
</div>
<div id="image-validation-configuration" class="imageblock">
<div class="content">
<img src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/validation-configuration-2.0.png" alt="validation-configuration-2.0.xsd">
</div>
<div class="title">Figure 1. Validation configuration schema</div>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-validation-xml">Example 8.1, “<code>validation.xml</code>”</a>
shows the several configuration options of <em>validation.xml</em>. All settings are optional and the same
configuration options are also available programmatically through <code>javax.validation.Configuration</code>. In
fact, the XML configuration will be overridden by values explicitly specified via the programmatic
API. It is even possible to ignore the XML configuration completely via
<code>Configuration#ignoreXmlConfiguration()</code>. See also <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuring-validator-factory">Section 9.2, “Configuring a <code>ValidatorFactory</code>”</a>.</p>
</div>
<div id="example-validation-xml" class="exampleblock">
<div class="title">Example 8.1: <code>validation.xml</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;validation-config</span><span class="pln">
        </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration"</span><span class="pln">
        </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
        </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration
            http://xmlns.jcp.org/xml/ns/validation/configuration/validation-configuration-2.0.xsd"</span><span class="pln">
        </span><span class="atn">version</span><span class="pun">=</span><span class="atv">"2.0"</span><span class="tag">&gt;</span><span class="pln">

    </span><span class="tag">&lt;default-provider&gt;</span><span class="pln">com.acme.ValidationProvider</span><span class="tag">&lt;/default-provider&gt;</span><span class="pln">

    </span><span class="tag">&lt;message-interpolator&gt;</span><span class="pln">com.acme.MessageInterpolator</span><span class="tag">&lt;/message-interpolator&gt;</span><span class="pln">
    </span><span class="tag">&lt;traversable-resolver&gt;</span><span class="pln">com.acme.TraversableResolver</span><span class="tag">&lt;/traversable-resolver&gt;</span><span class="pln">
    </span><span class="tag">&lt;constraint-validator-factory&gt;</span><span class="pln">
        com.acme.ConstraintValidatorFactory
    </span><span class="tag">&lt;/constraint-validator-factory&gt;</span><span class="pln">
    </span><span class="tag">&lt;parameter-name-provider&gt;</span><span class="pln">com.acme.ParameterNameProvider</span><span class="tag">&lt;/parameter-name-provider&gt;</span><span class="pln">
    </span><span class="tag">&lt;clock-provider&gt;</span><span class="pln">com.acme.ClockProvider</span><span class="tag">&lt;/clock-provider&gt;</span><span class="pln">

    </span><span class="tag">&lt;value-extractor&gt;</span><span class="pln">com.acme.ContainerValueExtractor</span><span class="tag">&lt;/value-extractor&gt;</span><span class="pln">

    </span><span class="tag">&lt;executable-validation</span><span class="pln"> </span><span class="atn">enabled</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;default-validated-executable-types&gt;</span><span class="pln">
            </span><span class="tag">&lt;executable-type&gt;</span><span class="pln">CONSTRUCTORS</span><span class="tag">&lt;/executable-type&gt;</span><span class="pln">
            </span><span class="tag">&lt;executable-type&gt;</span><span class="pln">NON_GETTER_METHODS</span><span class="tag">&lt;/executable-type&gt;</span><span class="pln">
            </span><span class="tag">&lt;executable-type&gt;</span><span class="pln">GETTER_METHODS</span><span class="tag">&lt;/executable-type&gt;</span><span class="pln">
        </span><span class="tag">&lt;/default-validated-executable-types&gt;</span><span class="pln">
    </span><span class="tag">&lt;/executable-validation&gt;</span><span class="pln">

    </span><span class="tag">&lt;constraint-mapping&gt;</span><span class="pln">META-INF/validation/constraints-car.xml</span><span class="tag">&lt;/constraint-mapping&gt;</span><span class="pln">

    </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"hibernate.validator.fail_fast"</span><span class="tag">&gt;</span><span class="pln">false</span><span class="tag">&lt;/property&gt;</span><span class="pln">
</span><span class="tag">&lt;/validation-config&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There must only be one file named <em>META-INF/validation.xml</em> on the classpath. If more than one is
found an exception is thrown.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The node <code>default-provider</code> allows to choose the Jakarta Bean Validation provider. This is useful if there is
more than one provider on the classpath. <code>message-interpolator</code>, <code>traversable-resolver</code>,
<code>constraint-validator-factory</code>, <code>parameter-name-provider</code> and <code>clock-provider</code> allow to customize
the used implementations for the interfaces <code>MessageInterpolator</code>, <code>TraversableResolver</code>,
<code>ConstraintValidatorFactory</code>, <code>ParameterNameProvider</code> and <code>ClockProvider</code> defined in the
<code>javax.validation</code> package.
See the sub-sections of <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuring-validator-factory">Section 9.2, “Configuring a <code>ValidatorFactory</code>”</a> for more information about these
interfaces.</p>
</div>
<div class="paragraph">
<p><code>value-extractor</code> allows to declare additional value extractors either to extract values from custom
container types or to override the built-in value extractors. See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-valueextraction">Chapter 7, <em>Value extraction</em></a> for
more information about how to implement <code>javax.validation.valueextraction.ValueExtractor</code>.</p>
</div>
<div class="paragraph">
<p><code>executable-validation</code> and its subnodes define defaults for method validation. The Jakarta Bean Validation
specification defines constructor and non getter methods as defaults. The enabled attribute acts as
global switch to turn method validation on and off (see also <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-method-constraints">Chapter 3, <em>Declaring and validating method constraints</em></a>).</p>
</div>
<div class="paragraph">
<p>Via the <code>constraint-mapping</code> element you can list an arbitrary number of additional XML files
containing the actual constraint configuration. Mapping file names must be specified using their
fully-qualified name on the classpath. Details on writing mapping files can be found in the next
section.</p>
</div>
<div class="paragraph">
<p>Last but not least, you can specify provider specific properties via the <code>property</code> nodes. In the
example, we are using the Hibernate Validator specific <code>hibernate.validator.fail_fast</code> property (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-fail-fast">Section 12.2, “Fail fast mode”</a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="section-mapping-xml-constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-mapping-xml-constraints"></a>8.2. Mapping constraints via <code>constraint-mappings</code></h3>
<div class="paragraph">
<p>Expressing constraints in XML is possible via files adhering to the schema seen in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#image-mapping-configuration">Figure 2, “Validation mapping schema”</a>. Note that these mapping files are only processed if listed via
constraint-mapping in <em>validation.xml</em>.</p>
</div>
<div id="image-mapping-configuration" class="imageblock">
<div class="content">
<img src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/validation-mapping-2.0.png" alt="validation-mapping-2.0.xsd">
</div>
<div class="title">Figure 2. Validation mapping schema</div>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraints-car">Example 8.2, “Bean constraints configured via XML”</a> shows how the classes Car and RentalCar from <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-car">Example 5.3, “Car”</a> resp.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-rental-car">Example 5.9, “Class <code>RentalCar</code> with redefined default group”</a> could be mapped in XML.</p>
</div>
<div id="example-constraints-car" class="exampleblock">
<div class="title">Example 8.2: Bean constraints configured via XML</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;constraint-mappings</span><span class="pln">
        </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/mapping"</span><span class="pln">
        </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
        </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/mapping
            http://xmlns.jcp.org/xml/ns/validation/mapping/validation-mapping-2.0.xsd"</span><span class="pln">
        </span><span class="atn">version</span><span class="pun">=</span><span class="atv">"2.0"</span><span class="tag">&gt;</span><span class="pln">

    </span><span class="tag">&lt;default-package&gt;</span><span class="pln">org.hibernate.validator.referenceguide.chapter05</span><span class="tag">&lt;/default-package&gt;</span><span class="pln">
    </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"Car"</span><span class="pln"> </span><span class="atn">ignore-annotations</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;field</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"manufacturer"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/field&gt;</span><span class="pln">
        </span><span class="tag">&lt;field</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"licensePlate"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/field&gt;</span><span class="pln">
        </span><span class="tag">&lt;field</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"seatCount"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.Min"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"value"</span><span class="tag">&gt;</span><span class="pln">2</span><span class="tag">&lt;/element&gt;</span><span class="pln">
            </span><span class="tag">&lt;/constraint&gt;</span><span class="pln">
        </span><span class="tag">&lt;/field&gt;</span><span class="pln">
        </span><span class="tag">&lt;field</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"driver"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;valid/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/field&gt;</span><span class="pln">
        </span><span class="tag">&lt;field</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"partManufacturers"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;container-element-type</span><span class="pln"> </span><span class="atn">type-argument-index</span><span class="pun">=</span><span class="atv">"0"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;valid/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/container-element-type&gt;</span><span class="pln">
            </span><span class="tag">&lt;container-element-type</span><span class="pln"> </span><span class="atn">type-argument-index</span><span class="pun">=</span><span class="atv">"1"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;container-element-type&gt;</span><span class="pln">
                    </span><span class="tag">&lt;valid/&gt;</span><span class="pln">
                    </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
                </span><span class="tag">&lt;/container-element-type&gt;</span><span class="pln">
            </span><span class="tag">&lt;/container-element-type&gt;</span><span class="pln">
        </span><span class="tag">&lt;/field&gt;</span><span class="pln">
        </span><span class="tag">&lt;getter</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"passedVehicleInspection"</span><span class="pln"> </span><span class="atn">ignore-annotations</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.AssertTrue"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;message&gt;</span><span class="pln">The car has to pass the vehicle inspection first</span><span class="tag">&lt;/message&gt;</span><span class="pln">
                </span><span class="tag">&lt;groups&gt;</span><span class="pln">
                    </span><span class="tag">&lt;value&gt;</span><span class="pln">CarChecks</span><span class="tag">&lt;/value&gt;</span><span class="pln">
                </span><span class="tag">&lt;/groups&gt;</span><span class="pln">
                </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"max"</span><span class="tag">&gt;</span><span class="pln">10</span><span class="tag">&lt;/element&gt;</span><span class="pln">
            </span><span class="tag">&lt;/constraint&gt;</span><span class="pln">
        </span><span class="tag">&lt;/getter&gt;</span><span class="pln">
    </span><span class="tag">&lt;/bean&gt;</span><span class="pln">
    </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"RentalCar"</span><span class="pln"> </span><span class="atn">ignore-annotations</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;class</span><span class="pln"> </span><span class="atn">ignore-annotations</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;group-sequence&gt;</span><span class="pln">
                </span><span class="tag">&lt;value&gt;</span><span class="pln">RentalCar</span><span class="tag">&lt;/value&gt;</span><span class="pln">
                </span><span class="tag">&lt;value&gt;</span><span class="pln">CarChecks</span><span class="tag">&lt;/value&gt;</span><span class="pln">
            </span><span class="tag">&lt;/group-sequence&gt;</span><span class="pln">
        </span><span class="tag">&lt;/class&gt;</span><span class="pln">
    </span><span class="tag">&lt;/bean&gt;</span><span class="pln">
    </span><span class="tag">&lt;constraint-definition</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"org.mycompany.CheckCase"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;validated-by</span><span class="pln"> </span><span class="atn">include-existing-validators</span><span class="pun">=</span><span class="atv">"false"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;value&gt;</span><span class="pln">org.mycompany.CheckCaseValidator</span><span class="tag">&lt;/value&gt;</span><span class="pln">
        </span><span class="tag">&lt;/validated-by&gt;</span><span class="pln">
    </span><span class="tag">&lt;/constraint-definition&gt;</span><span class="pln">
</span><span class="tag">&lt;/constraint-mappings&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-rental-station-xml">Example 8.3, “Method constraints configured via XML”</a> shows how the constraints from
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-declaring-parameter-constraints">Example 3.1, “Declaring method and constructor parameter constraints”</a>, <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-declaring-return-value-constraints">Example 3.4, “Declaring method and constructor return value constraints”</a>
and <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-specifying-constraint-target">Example 3.3, “Specifying a constraint’s target”</a> can be expressed in XML.</p>
</div>
<div id="example-rental-station-xml" class="exampleblock">
<div class="title">Example 8.3: Method constraints configured via XML</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;constraint-mappings</span><span class="pln">
        </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/mapping"</span><span class="pln">
        </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
        </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/mapping
            http://xmlns.jcp.org/xml/ns/validation/mapping/validation-mapping-2.0.xsd"</span><span class="pln">
        </span><span class="atn">version</span><span class="pun">=</span><span class="atv">"2.0"</span><span class="tag">&gt;</span><span class="pln">

    </span><span class="tag">&lt;default-package&gt;</span><span class="pln">org.hibernate.validator.referenceguide.chapter08</span><span class="tag">&lt;/default-package&gt;</span><span class="pln">

    </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"RentalStation"</span><span class="pln"> </span><span class="atn">ignore-annotations</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;constructor&gt;</span><span class="pln">
            </span><span class="tag">&lt;return-value&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"ValidRentalStation"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/return-value&gt;</span><span class="pln">
        </span><span class="tag">&lt;/constructor&gt;</span><span class="pln">

        </span><span class="tag">&lt;constructor&gt;</span><span class="pln">
            </span><span class="tag">&lt;parameter</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"java.lang.String"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/parameter&gt;</span><span class="pln">
        </span><span class="tag">&lt;/constructor&gt;</span><span class="pln">

        </span><span class="tag">&lt;method</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"getCustomers"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;return-value&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.Size"</span><span class="tag">&gt;</span><span class="pln">
                    </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"min"</span><span class="tag">&gt;</span><span class="pln">1</span><span class="tag">&lt;/element&gt;</span><span class="pln">
                </span><span class="tag">&lt;/constraint&gt;</span><span class="pln">
            </span><span class="tag">&lt;/return-value&gt;</span><span class="pln">
        </span><span class="tag">&lt;/method&gt;</span><span class="pln">

        </span><span class="tag">&lt;method</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"rentCar"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;parameter</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"Customer"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/parameter&gt;</span><span class="pln">
            </span><span class="tag">&lt;parameter</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"java.util.Date"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.Future"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;/parameter&gt;</span><span class="pln">
            </span><span class="tag">&lt;parameter</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"int"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.Min"</span><span class="tag">&gt;</span><span class="pln">
                    </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"value"</span><span class="tag">&gt;</span><span class="pln">1</span><span class="tag">&lt;/element&gt;</span><span class="pln">
                </span><span class="tag">&lt;/constraint&gt;</span><span class="pln">
            </span><span class="tag">&lt;/parameter&gt;</span><span class="pln">
        </span><span class="tag">&lt;/method&gt;</span><span class="pln">

        </span><span class="tag">&lt;method</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"addCars"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;parameter</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"java.util.List"</span><span class="tag">&gt;</span><span class="pln">
                </span><span class="tag">&lt;container-element-type&gt;</span><span class="pln">
                    </span><span class="tag">&lt;valid/&gt;</span><span class="pln">
                    </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"javax.validation.constraints.NotNull"</span><span class="tag">/&gt;</span><span class="pln">
                </span><span class="tag">&lt;/container-element-type&gt;</span><span class="pln">
            </span><span class="tag">&lt;/parameter&gt;</span><span class="pln">
        </span><span class="tag">&lt;/method&gt;</span><span class="pln">
    </span><span class="tag">&lt;/bean&gt;</span><span class="pln">

    </span><span class="tag">&lt;bean</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"Garage"</span><span class="pln"> </span><span class="atn">ignore-annotations</span><span class="pun">=</span><span class="atv">"true"</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;method</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"buildCar"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;parameter</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"java.util.List"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;cross-parameter&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"ELAssert"</span><span class="tag">&gt;</span><span class="pln">
                    </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"expression"</span><span class="tag">&gt;</span><span class="pln">...</span><span class="tag">&lt;/element&gt;</span><span class="pln">
                    </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"validationAppliesTo"</span><span class="tag">&gt;</span><span class="pln">PARAMETERS</span><span class="tag">&lt;/element&gt;</span><span class="pln">
                </span><span class="tag">&lt;/constraint&gt;</span><span class="pln">
            </span><span class="tag">&lt;/cross-parameter&gt;</span><span class="pln">
        </span><span class="tag">&lt;/method&gt;</span><span class="pln">
        </span><span class="tag">&lt;method</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"paintCar"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;parameter</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"int"</span><span class="tag">/&gt;</span><span class="pln">
            </span><span class="tag">&lt;return-value&gt;</span><span class="pln">
                </span><span class="tag">&lt;constraint</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"ELAssert"</span><span class="tag">&gt;</span><span class="pln">
                    </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"expression"</span><span class="tag">&gt;</span><span class="pln">...</span><span class="tag">&lt;/element&gt;</span><span class="pln">
                    </span><span class="tag">&lt;element</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"validationAppliesTo"</span><span class="tag">&gt;</span><span class="pln">RETURN_VALUE</span><span class="tag">&lt;/element&gt;</span><span class="pln">
                </span><span class="tag">&lt;/constraint&gt;</span><span class="pln">
            </span><span class="tag">&lt;/return-value&gt;</span><span class="pln">
        </span><span class="tag">&lt;/method&gt;</span><span class="pln">
    </span><span class="tag">&lt;/bean&gt;</span><span class="pln">

</span><span class="tag">&lt;/constraint-mappings&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The XML configuration is closely mirroring the programmatic API. For this reason it should suffice
to just add some comments. <code>default-package</code> is used for all fields where a class name is expected. If
the specified class is not fully qualified the configured default package will be used. Every
mapping file can then have several bean nodes, each describing the constraints on the entity with
the specified class name.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A given class can only be configured once across all configuration files. The same applies for
constraint definitions for a given constraint annotation. It can only occur in one mapping file. If
these rules are violated a <code>ValidationException</code> is thrown.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Setting <code>ignore-annotations</code> to <code>true</code> means that constraint annotations placed on the configured bean
are ignored. The default for this value is true. <code>ignore-annotations</code> is also available for the nodes
<code>class</code>, <code>fields</code>, <code>getter</code>, <code>constructor</code>, <code>method</code>, <code>parameter</code>, <code>cross-parameter</code> and <code>return-value</code>.
If not explicitly specified on these levels the configured bean value applies.</p>
</div>
<div class="paragraph">
<p>The nodes <code>class</code>, <code>field</code>, <code>getter</code>, <code>container-element-type</code>, <code>constructor</code> and <code>method</code>
(and its sub node parameter) determine on which level the constraint gets placed.
The <code>valid</code> node is used to enable cascaded validation and the <code>constraint</code> node to add a constraint
on the corresponding level.
Each constraint definition must define the class via the <code>annotation</code> attribute.
The constraint attributes required by the Jakarta Bean Validation specification (<code>message</code>, <code>groups</code> and
<code>payload</code>) have dedicated nodes. All other constraint specific attributes are configured using the
<code>element</code> node.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>container-element-type</code> allows to define the cascaded validation behavior and the constraints for
container elements. In the above examples, you can see an example of nested container element
constraints on a <code>List</code> nested in the values of a <code>Map</code>. <code>type-argument-index</code> is used to precise
which type argument of the <code>Map</code> is concerned by the configuration. It can be ommitted if the
type only has one type argument (e.g. the <code>List</code>s in our examples).</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>The <code>class</code> node also allows to reconfigure the default group sequence (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-default-group-class">Section 5.4, “Redefining the default group sequence”</a>) via the <code>group-sequence</code> node. Not shown in the example is the use
of <code>convert-group</code> to
specify group conversions (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-conversion">Section 5.5, “Group conversion”</a>). This node is available on <code>field</code>,
<code>getter</code>, <code>container-element-type</code>, <code>parameter</code> and <code>return-value</code> and specifies a <code>from</code> and a <code>to</code>
attributes to specify the groups.</p>
</div>
<div class="paragraph">
<p>Last but not least, the list of <code>ConstraintValidator</code> instances associated to a given constraint
can be altered via the <code>constraint-definition</code> node. The annotation attribute represents the constraint
annotation being altered. The <code>validated-by</code> element represent the (ordered) list of <code>ConstraintValidator</code>
implementations associated to the constraint. If <code>include-existing-validator</code> is set to <code>false</code>,
validators defined on the constraint annotation are ignored. If set to <code>true</code>, the list of constraint
validators described in XML is concatenated to the list of validators specified on the annotation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>One use case for constraint-definition is to change the default constraint definition for <code>@URL</code>.
Historically, Hibernate Validator’s default constraint validator for this constraint uses the
<code>java.net.URL</code> constructor to verify that an URL is valid.
However, there is also a purely regular expression based version available which can be configured using
XML:</p>
</div>
<div class="listingblock">
<div class="title">Using XML to register a regular expression based constraint definition for <code>@URL</code></div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;constraint-definition</span><span class="pln"> </span><span class="atn">annotation</span><span class="pun">=</span><span class="atv">"org.hibernate.validator.constraints.URL"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;validated-by</span><span class="pln"> </span><span class="atn">include-existing-validators</span><span class="pun">=</span><span class="atv">"false"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;value&gt;</span><span class="pln">org.hibernate.validator.constraintvalidators.RegexpURLValidator</span><span class="tag">&lt;/value&gt;</span><span class="pln">
  </span><span class="tag">&lt;/validated-by&gt;</span><span class="pln">
</span><span class="tag">&lt;/constraint-definition&gt;</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapter-bootstrapping"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bootstrapping"></a>9. Bootstrapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-obtaining-validator">Section 2.2.1, “Obtaining a <code>Validator</code> instance”</a>, you already saw one way of creating a <code>Validator</code> instance - via
<code>Validation#buildDefaultValidatorFactory()</code>. In this chapter, you will learn how to use the other
methods in <code>javax.validation.Validation</code> in order to bootstrap specifically configured validators.</p>
</div>
<div class="sect2">
<h3 id="section-retrieving-validator-factory-validator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-retrieving-validator-factory-validator"></a>9.1. Retrieving <code>ValidatorFactory</code> and <code>Validator</code></h3>
<div class="paragraph">
<p>You obtain a <code>Validator</code> by retrieving a <code>ValidatorFactory</code> via one of the static methods on
<code>javax.validation.Validation</code> and calling <code>getValidator()</code> on the factory instance.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-build-default-validator-factory">Example 9.1, “Bootstrapping default <code>ValidatorFactory</code> and <code>Validator</code>”</a> shows how to obtain a validator from the default
validator factory:</p>
</div>
<div id="example-build-default-validator-factory" class="exampleblock">
<div class="title">Example 9.1: Bootstrapping default <code>ValidatorFactory</code> and <code>Validator</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">buildDefaultValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The generated <code>ValidatorFactory</code> and <code>Validator</code> instances are thread-safe and can be cached. As
Hibernate Validator uses the factory as context for caching constraint metadata it is recommended to
work with one factory instance within an application.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Jakarta Bean Validation supports working with several providers such as Hibernate Validator within one
application. If more than one provider is present on the classpath, it is not guaranteed which one
is chosen when creating a factory via <code>buildDefaultValidatorFactory()</code>.</p>
</div>
<div class="paragraph">
<p>In this case, you can explicitly specify the provider to use via <code>Validation#byProvider()</code>, passing the
provider’s <code>ValidationProvider</code> class as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-specific-provider">Example 9.2, “Bootstrapping <code>ValidatorFactory</code> and <code>Validator</code> using a specific provider”</a>.</p>
</div>
<div id="example-using-specific-provider" class="exampleblock">
<div class="title">Example 9.2: Bootstrapping <code>ValidatorFactory</code> and <code>Validator</code> using a specific provider</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Note that the configuration object returned by <code>configure()</code> allows to specifically customize the
factory before calling <code>buildValidatorFactory()</code>. The available options are discussed later in this
chapter.</p>
</div>
<div class="paragraph">
<p>Similarly you can retrieve the default validator factory for configuration which is demonstrated in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-configuring-default-provider">Example 9.3, “Retrieving the default <code>ValidatorFactory</code> for configuration”</a>.</p>
</div>
<div id="example-configuring-default-provider" class="exampleblock">
<div class="title">Example 9.3: Retrieving the default <code>ValidatorFactory</code> for configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a <code>ValidatorFactory</code> instance is no longer in use, it should be disposed by calling
<code>ValidatorFactory#close()</code>. This will free any resources possibly allocated by the factory.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="section-validation-provider-resolver"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validation-provider-resolver"></a>9.1.1. <code>ValidationProviderResolver</code></h4>
<div class="paragraph">
<p>By default, available Jakarta Bean Validation providers are discovered using the
<a href="http://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#Service_Provider">Java
Service Provider</a> mechanism.</p>
</div>
<div class="paragraph">
<p>For that purpose, each provider includes the file <em>META-
INF/services/javax.validation.spi.ValidationProvider</em>, containing the fully qualified classname of
its <code>ValidationProvider</code> implementation. In the case of Hibernate Validator, this is
<code>org.hibernate.validator.HibernateValidator</code>.</p>
</div>
<div class="paragraph">
<p>Depending on your environment and its classloading specifics, provider discovery via the Java’s
service loader mechanism might not work. In this case, you can plug in a custom
<code>ValidationProviderResolver</code> implementation which performs the provider retrieval. An example is OSGi,
where you could implement a provider resolver which uses OSGi services for provider discovery.</p>
</div>
<div class="paragraph">
<p>To use a custom provider resolver, pass it via <code>providerResolver()</code> as shown in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-custom-validation-provider-resolver">Example 9.4, “Using a custom <code>ValidationProviderResolver</code>”</a>.</p>
</div>
<div id="example-using-custom-validation-provider-resolver" class="exampleblock">
<div class="title">Example 9.4: Using a custom <code>ValidationProviderResolver</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter09</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">OsgiServiceDiscoverer</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ValidationProviderResolver</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">ValidationProvider</span><span class="pun">&lt;?&gt;&gt;</span><span class="pln"> getValidationProviders</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">providerResolver</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">OsgiServiceDiscoverer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-configuring-validator-factory"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuring-validator-factory"></a>9.2. Configuring a <code>ValidatorFactory</code></h3>
<div class="paragraph">
<p>By default, validator factories retrieved from <code>Validation</code> and any validators they create are
configured as per the XML descriptor <em>META-INF/validation.xml</em> (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration">Chapter 8, <em>Configuring via XML</em></a>),
if present.</p>
</div>
<div class="paragraph">
<p>If you want to disable the XML based configuration, you can do so by invoking
<code>Configuration#ignoreXmlConfiguration()</code>.</p>
</div>
<div class="paragraph">
<p>The different values of the XML configuration can be accessed via
<code>Configuration#getBootstrapConfiguration()</code>. This can for instance be helpful if you want to integrate
Jakarta Bean Validation into a managed environment and want to create managed instances of the objects
configured via XML.</p>
</div>
<div class="paragraph">
<p>Using the fluent configuration API, you can override one or more of the settings when bootstrapping
the factory. The following sections show how to make use of the different options. Note that the
<code>Configuration</code> class exposes the default implementations of the different extension points which can
be useful if you want to use these as delegates for your custom implementations.</p>
</div>
<div class="sect3">
<h4 id="section-validator-factory-message-interpolator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validator-factory-message-interpolator"></a>9.2.1. <code>MessageInterpolator</code></h4>
<div class="paragraph">
<p>Message interpolators are used by the validation engine to create user readable error messages from
constraint message descriptors.</p>
</div>
<div class="paragraph">
<p>In case the default message interpolation algorithm described in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-message-interpolation">Chapter 4, <em>Interpolating constraint error messages</em></a>
is not sufficient for your needs, you can pass in your own implementation of the <code>MessageInterpolator</code>
interface via <code>Configuration#messageInterpolator()</code> as shown in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-custom-message-interpolator">Example 9.5, “Using a custom <code>MessageInterpolator</code>”</a>.</p>
</div>
<div id="example-using-custom-message-interpolator" class="exampleblock">
<div class="title">Example 9.5: Using a custom <code>MessageInterpolator</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter09</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyMessageInterpolator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">MessageInterpolator</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> interpolate</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> messageTemplate</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> interpolate</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> messageTemplate</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Context</span><span class="pln"> context</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Locale</span><span class="pln"> locale</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">messageInterpolator</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyMessageInterpolator</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="section-validator-factory-traversable-resolver"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-validator-factory-traversable-resolver"></a>9.2.2. <code>TraversableResolver</code></h4>
<div class="paragraph">
<p>In some cases the validation engine should not access the state of a bean property.
The most obvious example for that is a lazily loaded property or association of a JPA entity.
Validating this lazy property or association would mean that its state would have to be accessed,
triggering a load from the database.</p>
</div>
<div class="paragraph">
<p>Which properties can be accessed and which ones not is controlled by querying the
<code>TraversableResolver</code> interface. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-custom-traversable-resolver">Example 9.6, “Using a custom <code>TraversableResolver</code>”</a> shows how to use a
custom traversable resolver implementation.</p>
</div>
<div id="example-using-custom-traversable-resolver" class="exampleblock">
<div class="title">Example 9.6: Using a custom <code>TraversableResolver</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter09</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyTraversableResolver</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">TraversableResolver</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isReachable</span><span class="pun">(</span><span class="pln">
            </span><span class="typ">Object</span><span class="pln"> traversableObject</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">Node</span><span class="pln"> traversableProperty</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">Class</span><span class="pun">&lt;?&gt;</span><span class="pln"> rootBeanType</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">Path</span><span class="pln"> pathToTraversableObject</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">ElementType</span><span class="pln"> elementType</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isCascadable</span><span class="pun">(</span><span class="pln">
            </span><span class="typ">Object</span><span class="pln"> traversableObject</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">Node</span><span class="pln"> traversableProperty</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">Class</span><span class="pun">&lt;?&gt;</span><span class="pln"> rootBeanType</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">Path</span><span class="pln"> pathToTraversableObject</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">ElementType</span><span class="pln"> elementType</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">traversableResolver</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyTraversableResolver</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If no specific traversable resolver has been configured, the default behavior is to consider all properties as reachable and cascadable.
When using Hibernate Validator together with a JPA 2 provider such as Hibernate ORM, only those properties will be considered reachable
which already have been loaded by the persistence provider and all properties will be considered cascadable.</p>
</div>
<div class="paragraph">
<p>By default, the traversable resolver calls are cached per validation call.
This is especially important in a JPA environment where calling <code>isReachable()</code> has a significant cost.</p>
</div>
<div class="paragraph">
<p>This caching adds some overhead.
In the case your custom traversable resolver is very fast, it might be better to consider turning off the cache.</p>
</div>
<div class="paragraph">
<p>You can disable the cache either via the XML configuration:</p>
</div>
<div id="example-disabling-traversable-resolver-result-cache-xml-configuration" class="exampleblock">
<div class="title">Example 9.7: Disabling the <code>TraversableResolver</code> result cache via the XML configuration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;validation-config</span><span class="pln">
        </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration"</span><span class="pln">
        </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
        </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration validation-configuration-2.0.xsd"</span><span class="pln">
        </span><span class="atn">version</span><span class="pun">=</span><span class="atv">"2.0"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;default-provider&gt;</span><span class="pln">org.hibernate.validator.HibernateValidator</span><span class="tag">&lt;/default-provider&gt;</span><span class="pln">

    </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"hibernate.validator.enable_traversable_resolver_result_cache"</span><span class="tag">&gt;</span><span class="pln">false</span><span class="tag">&lt;/property&gt;</span><span class="pln">
</span><span class="tag">&lt;/validation-config&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>or via the programmatic API:</p>
</div>
<div id="example-disabling-traversable-resolver-result-cache-programmatic-api" class="exampleblock">
<div class="title">Example 9.8: Disabling the <code>TraversableResolver</code> result cache via the programmatic API</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">traversableResolver</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyFastTraversableResolver</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">enableTraversableResolverResultCache</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_constraintvalidatorfactory_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_constraintvalidatorfactory_code"></a>9.2.3. <code>ConstraintValidatorFactory</code></h4>
<div class="paragraph">
<p><code>ConstraintValidatorFactory</code> is the extension point for customizing how constraint validators are
instantiated and released.</p>
</div>
<div class="paragraph">
<p>The default <code>ConstraintValidatorFactory</code> provided by Hibernate Validator requires a public no-arg
constructor to instantiate <code>ConstraintValidator</code> instances (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-validator">Section 6.1.2, “The constraint validator”</a>).
Using a custom <code>ConstraintValidatorFactory</code> offers for example the possibility to use dependency
injection in constraint validator implementations.</p>
</div>
<div class="paragraph">
<p>To configure a custom constraint validator factory call <code>Configuration#constraintValidatorFactory()</code>
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-custom-constraint-validator-factory">Example 9.9, “Using a custom <code>ConstraintValidatorFactory</code>”</a>.</p>
</div>
<div id="example-using-custom-constraint-validator-factory" class="exampleblock">
<div class="title">Example 9.9: Using a custom <code>ConstraintValidatorFactory</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter09</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyConstraintValidatorFactory</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidatorFactory</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">T </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;?,</span><span class="pln"> </span><span class="pun">?&gt;&gt;</span><span class="pln"> T getInstance</span><span class="pun">(</span><span class="typ">Class</span><span class="pun">&lt;</span><span class="pln">T</span><span class="pun">&gt;</span><span class="pln"> key</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> releaseInstance</span><span class="pun">(</span><span class="typ">ConstraintValidator</span><span class="pun">&lt;?,</span><span class="pln"> </span><span class="pun">?&gt;</span><span class="pln"> instance</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">constraintValidatorFactory</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyConstraintValidatorFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any constraint implementations relying on <code>ConstraintValidatorFactory</code> behaviors specific to an
implementation (dependency injection, no no-arg constructor and so on) are not considered portable.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>ConstraintValidatorFactory</code> implementations should not cache validator instances as the state of each
instance can be altered in the <code>initialize()</code> method.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="section-parameter-name-provider"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-parameter-name-provider"></a>9.2.4. <code>ParameterNameProvider</code></h4>
<div class="paragraph">
<p>In case a method or constructor parameter constraint is violated, the <code>ParameterNameProvider</code>
interface is used to retrieve the parameter name and make it available to the user via the
property path of the constraint violation.</p>
</div>
<div class="paragraph">
<p>The default implementation returns parameter names as obtained through the Java reflection API.
If you compile your sources using the <code>-parameters</code> compiler flag, the actual parameter names as
in the source code will be returned. Otherwise synthetic names in the form of <code>arg0</code>, <code>arg1</code> etc.
will be used.</p>
</div>
<div class="paragraph">
<p>To use a custom parameter name provider either pass an instance of
the provider during bootstrapping as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-custom-parameter-name-provider">Example 9.10, “Using a custom <code>ParameterNameProvider</code>”</a>,
or specify the fully qualified class name of the provider as value for
the <code>&lt;parameter-name-provider&gt;</code> element in the <em>META-INF/validation.xml</em> file
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuration-validation-xml">Section 8.1, “Configuring the validator factory in <em>validation.xml</em>”</a>). This is demonstrated in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-custom-parameter-name-provider">Example 9.10, “Using a custom <code>ParameterNameProvider</code>”</a>.</p>
</div>
<div id="example-using-custom-parameter-name-provider" class="exampleblock">
<div class="title">Example 9.10: Using a custom <code>ParameterNameProvider</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter09</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyParameterNameProvider</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ParameterNameProvider</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> getParameterNames</span><span class="pun">(</span><span class="typ">Constructor</span><span class="pun">&lt;?&gt;</span><span class="pln"> constructor</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> getParameterNames</span><span class="pun">(</span><span class="typ">Method</span><span class="pln"> method</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">parameterNameProvider</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyParameterNameProvider</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Hibernate Validator comes with a custom <code>ParameterNameProvider</code> implementation based on the
<a href="https://github.com/paul-hammant/paranamer/">ParaNamer</a> library which provides several ways
for obtaining parameter names at runtime. Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-paranamer-parameternameprovider">Section 12.13, “Paranamer based <code>ParameterNameProvider</code>”</a>
to learn more about this specific implementation.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="section-clock-provider"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-clock-provider"></a>9.2.5. <code>ClockProvider</code> and temporal validation tolerance</h4>
<div class="paragraph">
<p>For time related validation (<code>@Past</code> and <code>@Future</code> constraints for instance), it might be useful to define what is
considered <code>now</code>.</p>
</div>
<div class="paragraph">
<p>This is especially important when you want to test your constraints in a reliable manner.</p>
</div>
<div class="paragraph">
<p>The reference time is defined by the <code>ClockProvider</code> contract. The responsibility of the <code>ClockProvider</code> is to
provide a <code>java.time.Clock</code> defining <code>now</code> for time related validators.</p>
</div>
<div id="example-using-custom-clock-provider" class="exampleblock">
<div class="title">Example 9.11: Using a custom <code>ClockProvider</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter09</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">time</span><span class="pun">.</span><span class="typ">Clock</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">time</span><span class="pun">.</span><span class="typ">ZonedDateTime</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ClockProvider</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">FixedClockProvider</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ClockProvider</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Clock</span><span class="pln"> clock</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">FixedClockProvider</span><span class="pun">(</span><span class="typ">ZonedDateTime</span><span class="pln"> dateTime</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        clock </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Clock</span><span class="pun">.</span><span class="kwd">fixed</span><span class="pun">(</span><span class="pln"> dateTime</span><span class="pun">.</span><span class="pln">toInstant</span><span class="pun">(),</span><span class="pln"> dateTime</span><span class="pun">.</span><span class="pln">getZone</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Clock</span><span class="pln"> getClock</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> clock</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">clockProvider</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FixedClockProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ZonedDateTime</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="pln"> </span><span class="lit">2016</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">15</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ZoneId</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Europe/Paris"</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can specify the fully-qualified classname of a <code>ClockProvider</code> implementation using the
<code>&lt;clock-provider&gt;</code> element when configuring the default validator factory via <em>META-INF/validation.xml</em>
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration">Chapter 8, <em>Configuring via XML</em></a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When validating <code>@Future</code> and <code>@Past</code> constraints, you might want to obtain the current time.</p>
</div>
<div class="paragraph">
<p>You can obtain the <code>ClockProvider</code> in your validators by calling the
<code>ConstraintValidatorContext#getClockProvider()</code> method.</p>
</div>
<div class="paragraph">
<p>For instance, this might be useful if you want to replace the default message of the <code>@Future</code>
constraint with a more explicit one.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>When dealing with distributed architectures, you might need some tolerance when applying temporal constraints
such as <code>@Past</code> or <code>@Future</code>.</p>
</div>
<div class="paragraph">
<p>You can set a temporal validation tolerance by bootstrapping your <code>ValidatorFactory</code> as below:</p>
</div>
<div id="example-using-temporal-validation-tolerance" class="exampleblock">
<div class="title">Example 9.12: Using temporal validation tolerance</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">temporalValidationTolerance</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Duration</span><span class="pun">.</span><span class="pln">ofMillis</span><span class="pun">(</span><span class="pln"> </span><span class="lit">10</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can define it in the XML configuration by setting the <code>hibernate.validator.temporal_validation_tolerance</code> property
in your <em>META-INF/validation.xml</em>.</p>
</div>
<div class="paragraph">
<p>The value of this property must be a <code>long</code> defining the tolerance in milliseconds.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When implementing your own temporal constraints, you might need to have access to the temporal validation tolerance.</p>
</div>
<div class="paragraph">
<p>It can be obtained by calling the <code>HibernateConstraintValidatorInitializationContext#getTemporalValidationTolerance()</code> method.</p>
</div>
<div class="paragraph">
<p>Note that to get access to this context at initialization, your constraint validator has to implement
the <code>HibernateConstraintValidator</code> contract (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#constraint-validator-hibernateconstraintvalidator">Section 6.1.2.2, “The <code>HibernateConstraintValidator</code> extension”</a>).
This contract is currently marked as incubating: it might be subject to change in the future.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="section-bootstrapping-valueextractors"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-bootstrapping-valueextractors"></a>9.2.6. Registering <code>ValueExtractor</code>s</h4>
<div class="paragraph">
<p>As mentioned in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-valueextraction">Chapter 7, <em>Value extraction</em></a>, additional value extractors can be registered during bootstrapping
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-registeringvalueextractor">Section 7.5, “Registering a <code>ValueExtractor</code>”</a> for the other ways to register a value extractor).</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-registering-value-extractor">Example 9.13, “Registering additional value extractors”</a> shows how we would register the value extractors we previously created
to extract the keys and the values of Guava’s <code>Multimap</code>.</p>
</div>
<div id="example-registering-value-extractor" class="exampleblock">
<div class="title">Example 9.13: Registering additional value extractors</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">addValueExtractor</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MultimapKeyValueExtractor</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">addValueExtractor</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MultimapValueValueExtractor</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_mapping_streams"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_adding_mapping_streams"></a>9.2.7. Adding mapping streams</h4>
<div class="paragraph">
<p>As discussed earlier, you can configure the constraints applied to your Java beans using XML based
constraint mappings.</p>
</div>
<div class="paragraph">
<p>Besides the mapping files specified in <em>META-INF/validation.xml</em>, you can add further mappings via
<code>Configuration#addMapping()</code> (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-adding-mapping-streams">Example 9.14, “Adding constraint mapping streams”</a>). Note that the passed input
stream(s) must adhere to the XML schema for constraint mappings presented in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-mapping-xml-constraints">Section 8.2, “Mapping constraints via <code>constraint-mappings</code>”</a>.</p>
</div>
<div id="example-adding-mapping-streams" class="exampleblock">
<div class="title">Example 9.14: Adding constraint mapping streams</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">InputStream</span><span class="pln"> constraintMapping1 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
</span><span class="typ">InputStream</span><span class="pln"> constraintMapping2 </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
</span><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byDefaultProvider</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">addMapping</span><span class="pun">(</span><span class="pln"> constraintMapping1 </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">addMapping</span><span class="pun">(</span><span class="pln"> constraintMapping2 </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You should close any passed input stream after the validator factory has been created.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-provider-specific-settings"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-provider-specific-settings"></a>9.2.8. Provider-specific settings</h4>
<div class="paragraph">
<p>Via the configuration object returned by <code>Validation#byProvider()</code>, provider specific options can be
configured.</p>
</div>
<div class="paragraph">
<p>In the case of Hibernate Validator, this e.g. allows you to enable the fail fast mode and pass one or
more programmatic constraint mappings as demonstrated in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-hibernate-validator-specific-options">Example 9.15, “Setting Hibernate Validator specific options”</a>.</p>
</div>
<div id="example-hibernate-validator-specific-options" class="exampleblock">
<div class="title">Example 9.15: Setting Hibernate Validator specific options</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">failFast</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">addMapping</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">ConstraintMapping</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Alternatively, provider-specific options can be passed via <code>Configuration#addProperty()</code>. Hibernate
Validator supports enabling the fail fast mode that way, too:</p>
</div>
<div id="example-hibernate-validator-specific-option-via-addproperty" class="exampleblock">
<div class="title">Example 9.16: Enabling a Hibernate Validator specific option via <code>addProperty()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">addProperty</span><span class="pun">(</span><span class="pln"> </span><span class="str">"hibernate.validator.fail_fast"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"true"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-fail-fast">Section 12.2, “Fail fast mode”</a> and <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api">Section 12.4, “Programmatic constraint definition and declaration”</a> to learn more about the fail fast
mode and the constraint declaration API.</p>
</div>
</div>
<div class="sect3">
<h4 id="section-script-evaluator-factory"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-script-evaluator-factory"></a>9.2.9. Configuring the <code>ScriptEvaluatorFactory</code></h4>
<div class="paragraph">
<p>For constraints like <code>@ScriptAssert</code> and <code>@ParameterScriptAssert</code>, it might be useful to configure
how the script engines are initialized and how the script evaluators are built.
This can be done by setting a custom implementation of <code>ScriptEvaluatorFactory</code>.</p>
</div>
<div class="paragraph">
<p>In particular, this is important for modular environments (e.g. OSGi), where user might face issues
with modular class loading and <a href="https://www.jcp.org/en/jsr/detail?id=223">JSR 223</a>.
It also allows to use any custom script engine, not necessarily based on the
<a href="https://www.jcp.org/en/jsr/detail?id=223">JSR 223</a> (e.g. Spring Expression Language).</p>
</div>
<div class="sect4">
<h5 id="_xml_configuration"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_xml_configuration"></a>9.2.9.1. XML configuration</h5>
<div class="paragraph">
<p>To specify the <code>ScriptEvaluatorFactory</code> via XML, you need to define the <code>hibernate.validator.script_evaluator_factory</code>
property.</p>
</div>
<div id="example-script-evaluator-factory-xml" class="exampleblock">
<div class="title">Example 9.17: Defining the <code>ScriptEvaluatorFactory</code> via XML</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;validation-config</span><span class="pln">
        </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration"</span><span class="pln">
        </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
        </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration
            http://xmlns.jcp.org/xml/ns/validation/configuration/validation-configuration-2.0.xsd"</span><span class="pln">
        </span><span class="atn">version</span><span class="pun">=</span><span class="atv">"2.0"</span><span class="tag">&gt;</span><span class="pln">

    </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"hibernate.validator.script_evaluator_factory"</span><span class="tag">&gt;</span><span class="pln">
        org.hibernate.validator.referenceguide.chapter09.CustomScriptEvaluatorFactory
    </span><span class="tag">&lt;/property&gt;</span><span class="pln">

</span><span class="tag">&lt;/validation-config&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In this case, the specified <code>ScriptEvaluatorFactory</code> must have a no-arg constructor.</p>
</div>
</div>
<div class="sect4">
<h5 id="_programmatic_configuration"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_programmatic_configuration"></a>9.2.9.2. Programmatic configuration</h5>
<div class="paragraph">
<p>To configure it programmatically, you need to pass an instance of <code>ScriptEvaluatorFactory</code> to the <code>ValidatorFactory</code>.
This gives more flexibility in the configuration of the <code>ScriptEvaluatorFactory</code>. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-script-evaluator-factory-programmatically">Example 9.18, “Defining the <code>ScriptEvaluatorFactory</code> programmatically”</a>
shows how this can be done.</p>
</div>
<div id="example-script-evaluator-factory-programmatically" class="exampleblock">
<div class="title">Example 9.18: Defining the <code>ScriptEvaluatorFactory</code> programmatically</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">scriptEvaluatorFactory</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">CustomScriptEvaluatorFactory</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_custom_code_scriptevaluatorfactory_code_implementation_examples"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_custom_code_scriptevaluatorfactory_code_implementation_examples"></a>9.2.9.3. Custom <code>ScriptEvaluatorFactory</code> implementation examples</h5>
<div class="paragraph">
<p>This section shows a couple of custom <code>ScriptEvaluatorFactory</code> implementations that can be used
in modular environments as well as one using the <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions">Spring Expression Language</a>
for writing constraint scripts.</p>
</div>
<div class="paragraph">
<p>Problems with modular environments and <a href="https://www.jcp.org/en/jsr/detail?id=223">JSR 223</a> come from the class loading.
The class loader where the script engine is available might be different from the one of Hibernate Validator.
Thus the script engine wouldn’t be found using the default strategy.</p>
</div>
<div class="paragraph">
<p>To solve this issue, the <code>MultiClassLoaderScriptEvaluatorFactory</code> class below can be introduced:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">/*
 * Hibernate Validator, declare and validate application constraints
 *
 * License: Apache License, Version 2.0
 * See the license.txt file in the root directory or &lt;http://www.apache.org/licenses/LICENSE-2.0&gt;.
 */</span><span class="pln">
</span><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">script</span><span class="pun">.</span><span class="typ">ScriptEngine</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">script</span><span class="pun">.</span><span class="typ">ScriptEngineManager</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">AbstractCachingScriptEvaluatorFactory</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEngineScriptEvaluator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEvaluationException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEvaluator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEvaluatorFactory</span><span class="pun">;</span><span class="pln">

</span><span class="com">/**
 * {@link ScriptEvaluatorFactory} that allows you to pass multiple {@link ClassLoader}s that will be used
 * to search for {@link ScriptEngine}s. Useful in environments similar to OSGi, where script engines can be
 * found only in {@link ClassLoader}s different from default one.
 *
 * @author Marko Bekhta
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MultiClassLoaderScriptEvaluatorFactory</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AbstractCachingScriptEvaluatorFactory</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ClassLoader</span><span class="pun">[]</span><span class="pln"> classLoaders</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">MultiClassLoaderScriptEvaluatorFactory</span><span class="pun">(</span><span class="typ">ClassLoader</span><span class="pun">...</span><span class="pln"> classLoaders</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> classLoaders</span><span class="pun">.</span><span class="pln">length </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalArgumentException</span><span class="pun">(</span><span class="pln"> </span><span class="str">"No class loaders were passed"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">classLoaders </span><span class="pun">=</span><span class="pln"> classLoaders</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">ScriptEvaluator</span><span class="pln"> createNewScriptEvaluator</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> languageName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="typ">ClassLoader</span><span class="pln"> classLoader </span><span class="pun">:</span><span class="pln"> classLoaders </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="typ">ScriptEngine</span><span class="pln"> engine </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ScriptEngineManager</span><span class="pun">(</span><span class="pln"> classLoader </span><span class="pun">).</span><span class="pln">getEngineByName</span><span class="pun">(</span><span class="pln"> languageName </span><span class="pun">);</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> engine </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ScriptEngineScriptEvaluator</span><span class="pun">(</span><span class="pln"> engine </span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ScriptEvaluationException</span><span class="pun">(</span><span class="pln"> </span><span class="str">"No JSR 223 script engine found for language "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> languageName </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>and then declared with:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">scriptEvaluatorFactory</span><span class="pun">(</span><span class="pln">
                </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MultiClassLoaderScriptEvaluatorFactory</span><span class="pun">(</span><span class="pln"> </span><span class="typ">GroovyScriptEngineFactory</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getClassLoader</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This way, it is possible to pass multiple <code>ClassLoader</code> instances: typically the class loaders of the wanted <code>ScriptEngine</code>s.</p>
</div>
<div class="paragraph">
<p>An alternative approach for OSGi environments can be to use the <code>OsgiScriptEvaluatorFactory</code> defined below:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">/*
 * Hibernate Validator, declare and validate application constraints
 *
 * License: Apache License, Version 2.0
 * See the license.txt file in the root directory or &lt;http://www.apache.org/licenses/LICENSE-2.0&gt;.
 */</span><span class="pln">
</span><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">BufferedReader</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">IOException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">io</span><span class="pun">.</span><span class="typ">InputStreamReader</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="pln">URL</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Arrays</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Collections</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Enumeration</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">List</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">Objects</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">.</span><span class="typ">Collectors</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">.</span><span class="typ">Stream</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">script</span><span class="pun">.</span><span class="typ">ScriptEngineFactory</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">script</span><span class="pun">.</span><span class="typ">ScriptEngineManager</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ValidationException</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">AbstractCachingScriptEvaluatorFactory</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEngineScriptEvaluator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEvaluator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEvaluatorFactory</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">scripting</span><span class="pun">.</span><span class="typ">ScriptEvaluatorNotFoundException</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">framework</span><span class="pun">.</span><span class="typ">Bundle</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">osgi</span><span class="pun">.</span><span class="pln">framework</span><span class="pun">.</span><span class="typ">BundleContext</span><span class="pun">;</span><span class="pln">

</span><span class="com">/**
 * {@link ScriptEvaluatorFactory} suitable for OSGi environments. It is created
 * based on the {@code BundleContext} which is used to iterate through {@code Bundle}s and find all {@link ScriptEngineFactory}
 * candidates.
 *
 * @author Marko Bekhta
 */</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">OsgiScriptEvaluatorFactory</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AbstractCachingScriptEvaluatorFactory</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">ScriptEngineManager</span><span class="pun">&gt;</span><span class="pln"> scriptEngineManagers</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">OsgiScriptEvaluatorFactory</span><span class="pun">(</span><span class="typ">BundleContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">scriptEngineManagers </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">unmodifiableList</span><span class="pun">(</span><span class="pln"> findManagers</span><span class="pun">(</span><span class="pln"> context </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">protected</span><span class="pln"> </span><span class="typ">ScriptEvaluator</span><span class="pln"> createNewScriptEvaluator</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> languageName</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ScriptEvaluatorNotFoundException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> scriptEngineManagers</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln"> manager </span><span class="pun">-&gt;</span><span class="pln"> manager</span><span class="pun">.</span><span class="pln">getEngineByName</span><span class="pun">(</span><span class="pln"> languageName </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Objects</span><span class="pun">::</span><span class="pln">nonNull </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln"> engine </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ScriptEngineScriptEvaluator</span><span class="pun">(</span><span class="pln"> engine </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">findFirst</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">orElseThrow</span><span class="pun">(</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ValidationException</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Unable to find script evaluator for '%s'."</span><span class="pun">,</span><span class="pln"> languageName </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">ScriptEngineManager</span><span class="pun">&gt;</span><span class="pln"> findManagers</span><span class="pun">(</span><span class="typ">BundleContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> findFactoryCandidates</span><span class="pun">(</span><span class="pln"> context </span><span class="pun">).</span><span class="pln">stream</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln"> className </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                    </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ScriptEngineManager</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Class</span><span class="pun">.</span><span class="pln">forName</span><span class="pun">(</span><span class="pln"> className </span><span class="pun">).</span><span class="pln">getClassLoader</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
                    </span><span class="pun">}</span><span class="pln">
                    </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">ClassNotFoundException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                        </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ValidationException</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Unable to instantiate '"</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> className </span><span class="pun">+</span><span class="pln"> </span><span class="str">"' based engine factory manager."</span><span class="pun">,</span><span class="pln"> e </span><span class="pun">);</span><span class="pln">
                    </span><span class="pun">}</span><span class="pln">
                </span><span class="pun">}</span><span class="pln"> </span><span class="pun">).</span><span class="pln">collect</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toList</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">/**
     * Iterates through all bundles to get the available {@link ScriptEngineFactory} classes
     *
     * @return the names of the available ScriptEngineFactory classes
     *
     * @throws IOException
     */</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> findFactoryCandidates</span><span class="pun">(</span><span class="typ">BundleContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Arrays</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">(</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getBundles</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Objects</span><span class="pun">::</span><span class="pln">nonNull </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> bundle </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">!</span><span class="str">"system.bundle"</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> bundle</span><span class="pun">.</span><span class="pln">getSymbolicName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">flatMap</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">::</span><span class="pln">toStreamOfResourcesURL </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Objects</span><span class="pun">::</span><span class="pln">nonNull </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">flatMap</span><span class="pun">(</span><span class="pln"> url </span><span class="pun">-&gt;</span><span class="pln"> toListOfFactoryCandidates</span><span class="pun">(</span><span class="pln"> url </span><span class="pun">).</span><span class="pln">stream</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">collect</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toList</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Stream</span><span class="pun">&lt;</span><span class="pln">URL</span><span class="pun">&gt;</span><span class="pln"> toStreamOfResourcesURL</span><span class="pun">(</span><span class="typ">Bundle</span><span class="pln"> bundle</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Enumeration</span><span class="pun">&lt;</span><span class="pln">URL</span><span class="pun">&gt;</span><span class="pln"> entries </span><span class="pun">=</span><span class="pln"> bundle</span><span class="pun">.</span><span class="pln">findEntries</span><span class="pun">(</span><span class="pln">
                </span><span class="str">"META-INF/services"</span><span class="pun">,</span><span class="pln">
                </span><span class="str">"javax.script.ScriptEngineFactory"</span><span class="pun">,</span><span class="pln">
                </span><span class="kwd">false</span><span class="pln">
        </span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> entries </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">list</span><span class="pun">(</span><span class="pln"> entries </span><span class="pun">).</span><span class="pln">stream</span><span class="pun">()</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="typ">Stream</span><span class="pun">.</span><span class="pln">empty</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> toListOfFactoryCandidates</span><span class="pun">(</span><span class="pln">URL url</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pln"> reader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">BufferedReader</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">InputStreamReader</span><span class="pun">(</span><span class="pln"> url</span><span class="pun">.</span><span class="pln">openStream</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"UTF-8"</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> reader</span><span class="pun">.</span><span class="pln">lines</span><span class="pun">()</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">::</span><span class="pln">trim </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> line </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">line</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> line </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">!</span><span class="pln">line</span><span class="pun">.</span><span class="pln">startsWith</span><span class="pun">(</span><span class="pln"> </span><span class="str">"#"</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">collect</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toList</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IOException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ValidationException</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Unable to read the ScriptEngineFactory resource file"</span><span class="pun">,</span><span class="pln"> e </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>and then declared with:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">scriptEvaluatorFactory</span><span class="pun">(</span><span class="pln">
                </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">OsgiScriptEvaluatorFactory</span><span class="pun">(</span><span class="pln"> </span><span class="typ">FrameworkUtil</span><span class="pun">.</span><span class="pln">getBundle</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">getClass</span><span class="pun">()</span><span class="pln"> </span><span class="pun">).</span><span class="pln">getBundleContext</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>It is designed specifically for OSGi environments and allows you to pass the <code>BundleContext</code> which will be used to search
for <code>ScriptEngineFactory</code> as a parameter.</p>
</div>
<div class="paragraph">
<p>As already mentioned, you can also use script engines that are not based on <a href="https://www.jcp.org/en/jsr/detail?id=223">JSR 223</a>.</p>
</div>
<div class="paragraph">
<p>For instance, to use the <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions">Spring Expression Language</a>,
you can define a <code>SpringELScriptEvaluatorFactory</code> as:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter09</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SpringELScriptEvaluatorFactory</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">AbstractCachingScriptEvaluatorFactory</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">ScriptEvaluator</span><span class="pln"> createNewScriptEvaluator</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> languageName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">!</span><span class="str">"spring"</span><span class="pun">.</span><span class="pln">equalsIgnoreCase</span><span class="pun">(</span><span class="pln"> languageName </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">IllegalStateException</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Only Spring EL is supported"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SpringELScriptEvaluator</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SpringELScriptEvaluator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ScriptEvaluator</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ExpressionParser</span><span class="pln"> expressionParser </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SpelExpressionParser</span><span class="pun">();</span><span class="pln">

        </span><span class="lit">@Override</span><span class="pln">
        </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Object</span><span class="pln"> evaluate</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> script</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">&gt;</span><span class="pln"> bindings</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ScriptEvaluationException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">try</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="typ">Expression</span><span class="pln"> expression </span><span class="pun">=</span><span class="pln"> expressionParser</span><span class="pun">.</span><span class="pln">parseExpression</span><span class="pun">(</span><span class="pln"> script </span><span class="pun">);</span><span class="pln">
                </span><span class="typ">EvaluationContext</span><span class="pln"> context </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">StandardEvaluationContext</span><span class="pun">(</span><span class="pln"> bindings</span><span class="pun">.</span><span class="pln">values</span><span class="pun">().</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
                </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="typ">Entry</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">&gt;</span><span class="pln"> binding </span><span class="pun">:</span><span class="pln"> bindings</span><span class="pun">.</span><span class="pln">entrySet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                    context</span><span class="pun">.</span><span class="pln">setVariable</span><span class="pun">(</span><span class="pln"> binding</span><span class="pun">.</span><span class="pln">getKey</span><span class="pun">(),</span><span class="pln"> binding</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
                </span><span class="pun">}</span><span class="pln">
                </span><span class="kwd">return</span><span class="pln"> expression</span><span class="pun">.</span><span class="pln">getValue</span><span class="pun">(</span><span class="pln"> context </span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
            </span><span class="kwd">catch</span><span class="pln"> </span><span class="pun">(</span><span class="typ">ParseException</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> </span><span class="typ">EvaluationException</span><span class="pln"> e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">throw</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ScriptEvaluationException</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Unable to evaluate SpEL script"</span><span class="pun">,</span><span class="pln"> e </span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This factory allows to use Spring Expression Language in <code>ScriptAssert</code> and <code>ParameterScriptAssert</code>
constraints:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@ScriptAssert</span><span class="pun">(</span><span class="pln">script </span><span class="pun">=</span><span class="pln"> </span><span class="str">"value &gt; 0"</span><span class="pun">,</span><span class="pln"> lang </span><span class="pun">=</span><span class="pln"> </span><span class="str">"spring"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Foo</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> value</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Foo</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> value</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">value </span><span class="pun">=</span><span class="pln"> value</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> getValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> value</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-configuring-validator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuring-validator"></a>9.3. Configuring a Validator</h3>
<div class="paragraph">
<p>When working with a configured validator factory it can occasionally be required to apply a
different configuration to a single <code>Validator</code> instance. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-context">Example 9.25, “Configuring a <code>Validator</code> instance via <code>usingContext()</code>”</a> shows how this can
be achieved by calling <code>ValidatorFactory#usingContext()</code>.</p>
</div>
<div id="example-using-context" class="exampleblock">
<div class="title">Example 9.25: Configuring a <code>Validator</code> instance via <code>usingContext()</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">buildDefaultValidatorFactory</span><span class="pun">();</span><span class="pln">

</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">usingContext</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">messageInterpolator</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyMessageInterpolator</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">traversableResolver</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MyTraversableResolver</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validator-metadata-api"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-metadata-api"></a>10. Using constraint metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jakarta Bean Validation specification provides not only a validation engine, but also an API for
retrieving constraint metadata in a uniform way, no matter whether the constraints are declared
using annotations or via XML mappings. Read this chapter to learn more about this API and its
possibilities. You can find all the metadata API types in the package <code>javax.validation.metadata</code>.</p>
</div>
<div class="paragraph">
<p>The examples presented in this chapter are based on the classes and constraint declarations shown in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-car">Example 10.1, “Example classes”</a>.</p>
</div>
<div id="metadata-example-car" class="exampleblock">
<div class="title">Example 10.1: Example classes</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter10</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Basic</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter10</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">Basic</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pun">(</span><span class="pln">groups </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pun">.</span><span class="typ">Basic</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> getManufacturer</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter10</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ValidCar</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">SeverityInfo</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">14</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> modelName</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">String</span><span class="pln"> licencePlate</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">Person</span><span class="pln"> driver</span><span class="pun">,</span><span class="pln">
            </span><span class="typ">String</span><span class="pln"> modelName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">licensePlate </span><span class="pun">=</span><span class="pln"> licencePlate</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">driver </span><span class="pun">=</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">modelName </span><span class="pun">=</span><span class="pln"> modelName</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> driveAway</span><span class="pun">(</span><span class="lit">@Max</span><span class="pun">(</span><span class="lit">75</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> speed</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@LuggageCountMatchesPassengerCount</span><span class="pun">(</span><span class="pln">
            piecesOfLuggagePerPassenger </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln">
            validationAppliesTo </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ConstraintTarget</span><span class="pun">.</span><span class="pln">PARAMETERS</span><span class="pun">,</span><span class="pln">
            payload </span><span class="pun">=</span><span class="pln"> </span><span class="typ">SeverityInfo</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
            message </span><span class="pun">=</span><span class="pln"> </span><span class="str">"There must not be more than {piecesOfLuggagePerPassenger} pieces "</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
                    </span><span class="str">"of luggage per passenger."</span><span class="pln">
    </span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> load</span><span class="pun">(</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> passengers</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">PieceOfLuggage</span><span class="pun">&gt;</span><span class="pln"> luggage</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getManufacturer</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> setManufacturer</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="lit">@ConvertGroup</span><span class="pun">(</span><span class="kwd">from</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> to </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">.</span><span class="typ">Basic</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> getDriver</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> driver</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//further getters and setters...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter10</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Library</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="lit">@NotNull</span><span class="pln"> </span><span class="lit">@Valid</span><span class="pln"> </span><span class="typ">Book</span><span class="pun">&gt;</span><span class="pln"> books</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter10</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Book</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotEmpty</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> title</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@NotEmpty</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> author</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//getters and setters ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_code_beandescriptor_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_beandescriptor_code"></a>10.1. <code>BeanDescriptor</code></h3>
<div class="paragraph">
<p>The entry point into the metadata API is the method <code>Validator#getConstraintsForClass()</code>, which
returns an instance of the <a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/BeanDescriptor.html"><code>BeanDescriptor</code></a> interface. Using this
descriptor, you can obtain metadata for constraints declared directly on the bean itself (class- or
property-level), but also retrieve metadata descriptors representing single properties, methods and
constructors.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-using-beandescriptor">Example 10.2, “Using <code>BeanDescriptor</code>”</a> demonstrates how to retrieve a <code>BeanDescriptor</code> for the
<code>Car</code> class and how to use this descriptor in form of assertions.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a constraint declaration hosted by the requested class is invalid, a <code>ValidationException</code> is thrown.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div id="metadata-example-using-beandescriptor" class="exampleblock">
<div class="title">Example 10.2: Using <code>BeanDescriptor</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">BeanDescriptor</span><span class="pln"> carDescriptor </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">getConstraintsForClass</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

assertTrue</span><span class="pun">(</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">isBeanConstrained</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//one class-level constraint</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//manufacturer, licensePlate, driver</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstrainedProperties</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//property has constraint</span><span class="pln">
assertNotNull</span><span class="pun">(</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln"> </span><span class="str">"licensePlate"</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//property is marked with @Valid</span><span class="pln">
assertNotNull</span><span class="pun">(</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln"> </span><span class="str">"driver"</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//constraints from getter method in interface and implementation class are returned</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">2</span><span class="pun">,</span><span class="pln">
        carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln"> </span><span class="str">"manufacturer"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//property is not constrained</span><span class="pln">
assertNull</span><span class="pun">(</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln"> </span><span class="str">"modelName"</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//driveAway(int), load(List&lt;Person&gt;, List&lt;PieceOfLuggage&gt;)</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstrainedMethods</span><span class="pun">(</span><span class="pln"> </span><span class="typ">MethodType</span><span class="pun">.</span><span class="pln">NON_GETTER </span><span class="pun">).</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//driveAway(int), getManufacturer(), getDriver(), load(List&lt;Person&gt;, List&lt;PieceOfLuggage&gt;)</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">4</span><span class="pun">,</span><span class="pln">
        carDescriptor</span><span class="pun">.</span><span class="pln">getConstrainedMethods</span><span class="pun">(</span><span class="pln"> </span><span class="typ">MethodType</span><span class="pun">.</span><span class="pln">NON_GETTER</span><span class="pun">,</span><span class="pln"> </span><span class="typ">MethodType</span><span class="pun">.</span><span class="pln">GETTER </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//driveAway(int)</span><span class="pln">
assertNotNull</span><span class="pun">(</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln"> </span><span class="str">"driveAway"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//getManufacturer()</span><span class="pln">
assertNotNull</span><span class="pun">(</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln"> </span><span class="str">"getManufacturer"</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//setManufacturer() is not constrained</span><span class="pln">
assertNull</span><span class="pun">(</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln"> </span><span class="str">"setManufacturer"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//Car(String, String, Person, String)</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstrainedConstructors</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//Car(String, String, Person, String)</span><span class="pln">
assertNotNull</span><span class="pun">(</span><span class="pln">
        carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForConstructor</span><span class="pun">(</span><span class="pln">
                </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
                </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
                </span><span class="typ">Person</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
                </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
        </span><span class="pun">)</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can determine whether the specified class hosts any class- or property-level constraints via
<code>isBeanConstrained()</code>. Method or constructor constraints are not considered by <code>isBeanConstrained()</code>.</p>
</div>
<div class="paragraph">
<p>The method <code>getConstraintDescriptors()</code> is common to all descriptors derived from <code>ElementDescriptor</code>
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-metadata-api-elementdescriptor">Section 10.4, “<code>ElementDescriptor</code>”</a>) and returns a set of descriptors representing the
constraints directly declared on the given element. In case of <code>BeanDescriptor</code>, the bean’s class-
level constraints are returned. More details on <code>ConstraintDescriptor</code> can be found in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-descriptor">Section 10.7, “<code>ConstraintDescriptor</code>”</a>.</p>
</div>
<div class="paragraph">
<p>Via <code>getConstraintsForProperty()</code>, <code>getConstraintsForMethod()</code> and <code>getConstraintsForConstructor()</code> you
can obtain a descriptor representing one given property or executable element, identified by its
name and, in case of methods and constructors, parameter types. The different descriptor types
returned by these methods are described in the following sections.</p>
</div>
<div class="paragraph">
<p>Note that these methods consider constraints declared at super-types according to the rules for
constraint inheritance as described in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-inheritance">Section 2.1.5, “Constraint inheritance”</a>. An example is the
descriptor for the <code>manufacturer</code> property, which provides access to all constraints defined on
<code>Vehicle#getManufacturer()</code> and the implementing method <code>Car#getManufacturer()</code>. <code>null</code> is returned in
case the specified element does not exist or is not constrained.</p>
</div>
<div class="paragraph">
<p>The methods <code>getConstrainedProperties()</code>, <code>getConstrainedMethods()</code> and <code>getConstrainedConstructors()</code>
return (potentially empty) sets with all constrained properties, methods and constructors,
respectively. An element is considered constrained if it has at least one constraint or is marked
for cascaded validation. When invoking <code>getConstrainedMethods()</code>, you can specify the type of the
methods to be returned (getters, non-getters or both).</p>
</div>
</div>
<div class="sect2">
<h3 id="section-property-descriptor"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-property-descriptor"></a>10.2. <code>PropertyDescriptor</code></h3>
<div class="paragraph">
<p>The interface
<a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/PropertyDescriptor.html"><code>PropertyDescriptor</code></a> represents one given property of a
class. It is transparent whether constraints are declared on a field or a property getter, provided
the JavaBeans naming conventions are respected. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-using-propertydescriptor">Example 10.3, “Using <code>PropertyDescriptor</code>”</a> shows
how to use the <code>PropertyDescriptor</code> interface.</p>
</div>
<div id="metadata-example-using-propertydescriptor" class="exampleblock">
<div class="title">Example 10.3: Using <code>PropertyDescriptor</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">PropertyDescriptor</span><span class="pln"> licensePlateDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"licensePlate"</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//"licensePlate" has two constraints, is not marked with @Valid and defines no group conversions</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"licensePlate"</span><span class="pun">,</span><span class="pln"> licensePlateDescriptor</span><span class="pun">.</span><span class="pln">getPropertyName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> licensePlateDescriptor</span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> licensePlateDescriptor</span><span class="pun">.</span><span class="pln">hasConstraints</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertFalse</span><span class="pun">(</span><span class="pln"> licensePlateDescriptor</span><span class="pun">.</span><span class="pln">isCascaded</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> licensePlateDescriptor</span><span class="pun">.</span><span class="pln">getGroupConversions</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">PropertyDescriptor</span><span class="pln"> driverDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln"> </span><span class="str">"driver"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//"driver" has no constraints, is marked with @Valid and defines one group conversion</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"driver"</span><span class="pun">,</span><span class="pln"> driverDescriptor</span><span class="pun">.</span><span class="pln">getPropertyName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> driverDescriptor</span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertFalse</span><span class="pun">(</span><span class="pln"> driverDescriptor</span><span class="pun">.</span><span class="pln">hasConstraints</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> driverDescriptor</span><span class="pun">.</span><span class="pln">isCascaded</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> driverDescriptor</span><span class="pun">.</span><span class="pln">getGroupConversions</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Using <code>getConstraintDescriptors()</code>, you can retrieve a set of <code>ConstraintDescriptors</code> providing more
information on the individual constraints of a given property. The method <code>isCascaded()</code> returns
<code>true</code> if the property is marked for cascaded validation (either using the <code>@Valid</code> annotation or via
XML), <code>false</code> otherwise. Any configured group conversions are returned by <code>getGroupConversions()</code>. See
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-conversion-descriptor">Section 10.6, “<code>GroupConversionDescriptor</code>”</a> for more details on <code>GroupConversionDescriptor</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_methoddescriptor_code_and_code_constructordescriptor_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_methoddescriptor_code_and_code_constructordescriptor_code"></a>10.3. <code>MethodDescriptor</code> and <code>ConstructorDescriptor</code></h3>
<div class="paragraph">
<p>Constrained methods and constructors are represented by the interfaces
<a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/MethodDescriptor.html"><code>MethodDescriptor</code></a>
<a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/ConstructorDescriptor.html"><code>ConstructorDescriptor</code></a>, respectively.
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-using-methodandconstructordescriptor">Example 10.4, “Using <code>MethodDescriptor</code> and <code>ConstructorDescriptor</code>”</a> demonstrates how to work with these
descriptors.</p>
</div>
<div id="metadata-example-using-methodandconstructordescriptor" class="exampleblock">
<div class="title">Example 10.4: Using <code>MethodDescriptor</code> and <code>ConstructorDescriptor</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">//driveAway(int) has a constrained parameter and an unconstrained return value</span><span class="pln">
</span><span class="typ">MethodDescriptor</span><span class="pln"> driveAwayDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"driveAway"</span><span class="pun">,</span><span class="pln">
        </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"driveAway"</span><span class="pun">,</span><span class="pln"> driveAwayDescriptor</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> driveAwayDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedParameters</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertFalse</span><span class="pun">(</span><span class="pln"> driveAwayDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedReturnValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//always returns an empty set; constraints are retrievable by navigating to</span><span class="pln">
</span><span class="com">//one of the sub-descriptors, e.g. for the return value</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> driveAwayDescriptor</span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ParameterDescriptor</span><span class="pln"> speedDescriptor </span><span class="pun">=</span><span class="pln"> driveAwayDescriptor</span><span class="pun">.</span><span class="pln">getParameterDescriptors</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//The "speed" parameter is located at index 0, has one constraint and is not cascaded</span><span class="pln">
</span><span class="com">//nor does it define group conversions</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"speed"</span><span class="pun">,</span><span class="pln"> speedDescriptor</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> speedDescriptor</span><span class="pun">.</span><span class="pln">getIndex</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> speedDescriptor</span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertFalse</span><span class="pun">(</span><span class="pln"> speedDescriptor</span><span class="pun">.</span><span class="pln">isCascaded</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="kwd">assert</span><span class="pln"> speedDescriptor</span><span class="pun">.</span><span class="pln">getGroupConversions</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">();</span><span class="pln">

</span><span class="com">//getDriver() has no constrained parameters but its return value is marked for cascaded</span><span class="pln">
</span><span class="com">//validation and declares one group conversion</span><span class="pln">
</span><span class="typ">MethodDescriptor</span><span class="pln"> getDriverDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"getDriver"</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertFalse</span><span class="pun">(</span><span class="pln"> getDriverDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedParameters</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> getDriverDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedReturnValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ReturnValueDescriptor</span><span class="pln"> returnValueDescriptor </span><span class="pun">=</span><span class="pln"> getDriverDescriptor</span><span class="pun">.</span><span class="pln">getReturnValueDescriptor</span><span class="pun">();</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> returnValueDescriptor</span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> returnValueDescriptor</span><span class="pun">.</span><span class="pln">isCascaded</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> returnValueDescriptor</span><span class="pun">.</span><span class="pln">getGroupConversions</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//load(List&lt;Person&gt;, List&lt;PieceOfLuggage&gt;) has one cross-parameter constraint</span><span class="pln">
</span><span class="typ">MethodDescriptor</span><span class="pln"> loadDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"load"</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> loadDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedParameters</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertFalse</span><span class="pun">(</span><span class="pln"> loadDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedReturnValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
        loadDescriptor</span><span class="pun">.</span><span class="pln">getCrossParameterDescriptor</span><span class="pun">().</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//Car(String, String, Person, String) has one constrained parameter</span><span class="pln">
</span><span class="typ">ConstructorDescriptor</span><span class="pln"> constructorDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForConstructor</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">Person</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Car"</span><span class="pun">,</span><span class="pln"> constructorDescriptor</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertFalse</span><span class="pun">(</span><span class="pln"> constructorDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedReturnValue</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> constructorDescriptor</span><span class="pun">.</span><span class="pln">hasConstrainedParameters</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
        constructorDescriptor</span><span class="pun">.</span><span class="pln">getParameterDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><code>getName()</code> returns the name of the given method or constructor. The methods
<code>hasConstrainedParameters()</code> and <code>hasConstrainedReturnValue()</code> can be used to perform a quick check
whether an executable element has any parameter constraints (either constraints on single parameters
or cross-parameter constraints) or return value constraints.</p>
</div>
<div class="paragraph">
<p>Note that constraints are not directly exposed on <code>MethodDescriptor</code> and <code>ConstructorDescriptor</code>,
but rather on dedicated descriptors representing an executable’s parameters, its return value and
its cross-parameter constraints. To get hold of one of these descriptors, invoke
<code>getParameterDescriptors()</code>, <code>getReturnValueDescriptor()</code> or <code>getCrossParameterDescriptor()</code>,
respectively.</p>
</div>
<div class="paragraph">
<p>These descriptors provide access to the element’s constraints (<code>getConstraintDescriptors()</code>) and, in
the case of parameters and return value, to its configuration for cascaded validation (<code>isValid()</code> and
<code>getGroupConversions()</code>). For parameters, you also can retrieve the index and the name, as returned by
the currently used parameter name provider (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-parameter-name-provider">Section 9.2.4, “<code>ParameterNameProvider</code>”</a>) via <code>getName()</code>
and <code>getIndex()</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Getter methods following the JavaBeans naming conventions are considered as bean properties but also
as constrained methods.</p>
</div>
<div class="paragraph">
<p>That means you can retrieve the related metadata either by obtaining a <code>PropertyDescriptor</code> (e.g.
<code>BeanDescriptor.getConstraintsForProperty("foo")</code>) or by examining the return value descriptor of the
getter’s <code>MethodDescriptor</code> (e.g.
<code>BeanDescriptor.getConstraintsForMethod("getFoo").getReturnValueDescriptor())</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="validator-metadata-api-elementdescriptor"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-metadata-api-elementdescriptor"></a>10.4. <code>ElementDescriptor</code></h3>
<div class="paragraph">
<p>The <a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/ElementDescriptor.html"><code>ElementDescriptor</code></a>
interface is the common base class for the
individual descriptor types such as <code>BeanDescriptor</code>, <code>PropertyDescriptor</code> etc. Besides
<code>getConstraintDescriptors()</code> it provides some more methods common to all descriptors.</p>
</div>
<div class="paragraph">
<p><code>hasConstraints()</code> allows for a quick check whether an element has any direct constraints (e.g. class-
level constraints in case of <code>BeanDescriptor</code>).</p>
</div>
<div class="paragraph">
<p><code>getElementClass()</code> returns the Java type of the element
represented by a given descriptor. More specifically, the method returns</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the object type when invoked on <code>BeanDescriptor</code>,</p>
</li>
<li>
<p>the type of a property or parameter when invoked on <code>PropertyDescriptor</code> or <code>ParameterDescriptor</code>
respectively,</p>
</li>
<li>
<p><code>Object[].class</code> when invoked on <code>CrossParameterDescriptor</code>,</p>
</li>
<li>
<p>the return type when invoked on <code>ConstructorDescriptor</code>, <code>MethodDescriptor</code> or <code>ReturnValueDescriptor</code>.
<code>void.class</code> will be returned for methods which don’t have a return value.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-using-elementdescriptor">Example 10.5, “Using <code>ElementDescriptor methods</code>”</a> shows how these methods are used.</p>
</div>
<div id="metadata-example-using-elementdescriptor" class="exampleblock">
<div class="title">Example 10.5: Using <code>ElementDescriptor methods</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">PropertyDescriptor</span><span class="pln"> manufacturerDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"manufacturer"</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

assertTrue</span><span class="pun">(</span><span class="pln"> manufacturerDescriptor</span><span class="pun">.</span><span class="pln">hasConstraints</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> manufacturerDescriptor</span><span class="pun">.</span><span class="pln">getElementClass</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">CrossParameterDescriptor</span><span class="pln"> loadCrossParameterDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"load"</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">).</span><span class="pln">getCrossParameterDescriptor</span><span class="pun">();</span><span class="pln">

assertTrue</span><span class="pun">(</span><span class="pln"> loadCrossParameterDescriptor</span><span class="pun">.</span><span class="pln">hasConstraints</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">[].</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> loadCrossParameterDescriptor</span><span class="pun">.</span><span class="pln">getElementClass</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Finally, <code>ElementDescriptor</code> offers access to the <code>ConstraintFinder</code> API which allows you to query for
constraint metadata in a fine grained way. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraint-finder">Example 10.6, “Usage of <code>ConstraintFinder</code>”</a> shows how to retrieve a
<code>ConstraintFinder</code> instance via <code>findConstraints()</code> and use the API to query for constraint metadata.</p>
</div>
<div id="example-constraint-finder" class="exampleblock">
<div class="title">Example 10.6: Usage of <code>ConstraintFinder</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">PropertyDescriptor</span><span class="pln"> manufacturerDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"manufacturer"</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//"manufacturer" constraints are declared on the getter, not the field</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln">
        manufacturerDescriptor</span><span class="pun">.</span><span class="pln">findConstraints</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">declaredOn</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">FIELD </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//@NotNull on Vehicle#getManufacturer() is part of another group</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
        manufacturerDescriptor</span><span class="pun">.</span><span class="pln">findConstraints</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">unorderedAndMatchingGroups</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//@Size on Car#getManufacturer()</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
        manufacturerDescriptor</span><span class="pun">.</span><span class="pln">findConstraints</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">lookingAt</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Scope</span><span class="pun">.</span><span class="pln">LOCAL_ELEMENT </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//@Size on Car#getManufacturer() and @NotNull on Vehicle#getManufacturer()</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">2</span><span class="pun">,</span><span class="pln">
        manufacturerDescriptor</span><span class="pun">.</span><span class="pln">findConstraints</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">lookingAt</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Scope</span><span class="pun">.</span><span class="pln">HIERARCHY </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//Combining several filter options</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
        manufacturerDescriptor</span><span class="pun">.</span><span class="pln">findConstraints</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">declaredOn</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ElementType</span><span class="pun">.</span><span class="pln">METHOD </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">lookingAt</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Scope</span><span class="pun">.</span><span class="pln">HIERARCHY </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">unorderedAndMatchingGroups</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Vehicle</span><span class="pun">.</span><span class="typ">Basic</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Via <code>declaredOn()</code> you can search for <code>ConstraintDescriptors</code> declared on certain element types. This is
useful to find property constraints declared on either fields or getter methods.</p>
</div>
<div class="paragraph">
<p><code>unorderedAndMatchingGroups()</code> restricts the resulting constraints to those matching the given
validation group(s).</p>
</div>
<div class="paragraph">
<p><code>lookingAt()</code> allows to distinguish between constraints directly specified on the element
(<code>Scope.LOCAL_ELEMENT</code>) or constraints belonging to the element but hosted anywhere in the class
hierarchy (<code>Scope.HIERARCHY</code>).</p>
</div>
<div class="paragraph">
<p>You can also combine the different options as shown in the last example.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Order is not respected by <code>unorderedAndMatchingGroups()</code>, but group inheritance and inheritance via
sequence are.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_code_containerdescriptor_code_and_code_containerelementtypedescriptor_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_containerdescriptor_code_and_code_containerelementtypedescriptor_code"></a>10.5. <code>ContainerDescriptor</code> and <code>ContainerElementTypeDescriptor</code></h3>
<div class="paragraph">
<p>The <a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/ContainerDescriptor.html"><code>ContainerDescriptor</code></a>
interface is the common interface for all the elements that support container element constraints and cascading
validation (<code>PropertyDescriptor</code>, <code>ParameterDescriptor</code>, <code>ReturnValueDescriptor</code>).</p>
</div>
<div class="paragraph">
<p>It has a single method <code>getConstrainedContainerElementTypes()</code> that returns a set of <code>ContainerElementTypeDescriptor</code>.</p>
</div>
<div class="paragraph">
<p><code>ContainerElementTypeDescriptor</code> extends <code>ContainerDescriptor</code> to support nested container element constraints.</p>
</div>
<div class="paragraph">
<p><code>ContainerElementTypeDescriptor</code> contains the information about the container, the constraints and the cascading
validation.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-using-containerelementtypedescriptor">Example 10.7, “Using <code>ContainerElementTypeDescriptor</code>”</a> shows how to use <code>getConstrainedContainerElementTypes()</code>
to retrieve the set of <code>ContainerElementTypeDescriptor</code>.</p>
</div>
<div id="metadata-example-using-containerelementtypedescriptor" class="exampleblock">
<div class="title">Example 10.7: Using <code>ContainerElementTypeDescriptor</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">PropertyDescriptor</span><span class="pln"> booksDescriptor </span><span class="pun">=</span><span class="pln"> libraryDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"books"</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ContainerElementTypeDescriptor</span><span class="pun">&gt;</span><span class="pln"> booksContainerElementTypeDescriptors </span><span class="pun">=</span><span class="pln">
        booksDescriptor</span><span class="pun">.</span><span class="pln">getConstrainedContainerElementTypes</span><span class="pun">();</span><span class="pln">
</span><span class="typ">ContainerElementTypeDescriptor</span><span class="pln"> booksContainerElementTypeDescriptor </span><span class="pun">=</span><span class="pln">
        booksContainerElementTypeDescriptors</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">

assertTrue</span><span class="pun">(</span><span class="pln"> booksContainerElementTypeDescriptor</span><span class="pun">.</span><span class="pln">hasConstraints</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> booksContainerElementTypeDescriptor</span><span class="pun">.</span><span class="pln">isCascaded</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">0</span><span class="pun">,</span><span class="pln">
        booksContainerElementTypeDescriptor</span><span class="pun">.</span><span class="pln">getTypeArgumentIndex</span><span class="pun">().</span><span class="pln">intValue</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        booksContainerElementTypeDescriptor</span><span class="pun">.</span><span class="pln">getContainerClass</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintDescriptor</span><span class="pun">&lt;?&gt;&gt;</span><span class="pln"> constraintDescriptors </span><span class="pun">=</span><span class="pln">
        booksContainerElementTypeDescriptor</span><span class="pun">.</span><span class="pln">getConstraintDescriptors</span><span class="pun">();</span><span class="pln">
</span><span class="typ">ConstraintDescriptor</span><span class="pun">&lt;?&gt;</span><span class="pln"> constraintDescriptor </span><span class="pun">=</span><span class="pln">
        constraintDescriptors</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">NotNull</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        constraintDescriptor</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">().</span><span class="pln">annotationType</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-group-conversion-descriptor"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-group-conversion-descriptor"></a>10.6. <code>GroupConversionDescriptor</code></h3>
<div class="paragraph">
<p>All those descriptor types that represent elements which can be subject of cascaded validation
(i.e., <code>PropertyDescriptor</code>, <code>ParameterDescriptor</code> and <code>ReturnValueDescriptor</code>) provide access to the
element’s group conversions via <code>getGroupConversions()</code>. The returned set contains a
<a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation//metadata/GroupConversionDescriptor.html"><code>GroupConversionDescriptor</code></a>
for each configured conversion, allowing to retrieve
source and target groups of the conversion. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-using-groupconversiondescriptor">Example 10.8, “Using <code>GroupConversionDescriptor</code>”</a>
shows an example.</p>
</div>
<div id="metadata-example-using-groupconversiondescriptor" class="exampleblock">
<div class="title">Example 10.8: Using <code>GroupConversionDescriptor</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">PropertyDescriptor</span><span class="pln"> driverDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForProperty</span><span class="pun">(</span><span class="pln"> </span><span class="str">"driver"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">GroupConversionDescriptor</span><span class="pun">&gt;</span><span class="pln"> groupConversions </span><span class="pun">=</span><span class="pln"> driverDescriptor</span><span class="pun">.</span><span class="pln">getGroupConversions</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> groupConversions</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">GroupConversionDescriptor</span><span class="pln"> groupConversionDescriptor </span><span class="pun">=</span><span class="pln"> groupConversions</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> groupConversionDescriptor</span><span class="pun">.</span><span class="pln">getFrom</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">.</span><span class="typ">Basic</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> groupConversionDescriptor</span><span class="pun">.</span><span class="pln">getTo</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-constraint-descriptor"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-descriptor"></a>10.7. <code>ConstraintDescriptor</code></h3>
<div class="paragraph">
<p>Last but not least, the
<a href="http://docs.jboss.org/hibernate/beanvalidation/spec/2.0/api/?javax/validation/metadata/ConstraintDescriptor.html"><code>ConstraintDescriptor</code></a>
interface describes a
single constraint together with its composing constraints. Via an instance of this interface you get
access to the constraint annotation and its parameters.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#metadata-example-using-constraintdescriptor">Example 10.9, “Using <code>ConstraintDescriptor</code>”</a>
shows how to retrieve default constraint attributes (such as message template, groups etc.) as well
as custom constraint attributes (<code>piecesOfLuggagePerPassenger</code>) and other metadata such as the
constraint’s annotation type and its validators from a <code>ConstraintDescriptor</code>.</p>
</div>
<div id="metadata-example-using-constraintdescriptor" class="exampleblock">
<div class="title">Example 10.9: Using <code>ConstraintDescriptor</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="com">//descriptor for the @LuggageCountMatchesPassengerCount constraint on the</span><span class="pln">
</span><span class="com">//load(List&lt;Person&gt;, List&lt;PieceOfLuggage&gt;) method</span><span class="pln">
</span><span class="typ">ConstraintDescriptor</span><span class="pun">&lt;?&gt;</span><span class="pln"> constraintDescriptor </span><span class="pun">=</span><span class="pln"> carDescriptor</span><span class="pun">.</span><span class="pln">getConstraintsForMethod</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"load"</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">).</span><span class="pln">getCrossParameterDescriptor</span><span class="pun">().</span><span class="pln">getConstraintDescriptors</span><span class="pun">().</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">

</span><span class="com">//constraint type</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">LuggageCountMatchesPassengerCount</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln">
        constraintDescriptor</span><span class="pun">.</span><span class="pln">getAnnotation</span><span class="pun">().</span><span class="pln">annotationType</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//standard constraint attributes</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">SeverityInfo</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> constraintDescriptor</span><span class="pun">.</span><span class="pln">getPayload</span><span class="pun">().</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">ConstraintTarget</span><span class="pun">.</span><span class="pln">PARAMETERS</span><span class="pun">,</span><span class="pln">
        constraintDescriptor</span><span class="pun">.</span><span class="pln">getValidationAppliesTo</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> constraintDescriptor</span><span class="pun">.</span><span class="pln">getGroups</span><span class="pun">().</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="str">"There must not be more than {piecesOfLuggagePerPassenger} pieces of luggage per "</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
        </span><span class="str">"passenger."</span><span class="pun">,</span><span class="pln">
        constraintDescriptor</span><span class="pun">.</span><span class="pln">getMessageTemplate</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//custom constraint attribute</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="lit">2</span><span class="pun">,</span><span class="pln">
        constraintDescriptor</span><span class="pun">.</span><span class="pln">getAttributes</span><span class="pun">().</span><span class="kwd">get</span><span class="pun">(</span><span class="pln"> </span><span class="str">"piecesOfLuggagePerPassenger"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
</span><span class="pun">);</span><span class="pln">

</span><span class="com">//no composing constraints</span><span class="pln">
assertTrue</span><span class="pun">(</span><span class="pln"> constraintDescriptor</span><span class="pun">.</span><span class="pln">getComposingConstraints</span><span class="pun">().</span><span class="pln">isEmpty</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">//validator class</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">Arrays</span><span class="pun">.&lt;</span><span class="typ">Class</span><span class="pun">&lt;?&gt;&gt;</span><span class="pln">asList</span><span class="pun">(</span><span class="pln"> </span><span class="typ">LuggageCountMatchesPassengerCount</span><span class="pun">.</span><span class="typ">Validator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">),</span><span class="pln">
        constraintDescriptor</span><span class="pun">.</span><span class="pln">getConstraintValidatorClasses</span><span class="pun">()</span><span class="pln">
</span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validator-integration"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-integration"></a>11. Integrating with other frameworks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hibernate Validator is intended to be used to implement multi-layered data validation, where
constraints are expressed in a single place (the annotated domain model) and checked in various
different layers of the application. For this reason there are multiple integration points with
other technologies.</p>
</div>
<div class="sect2">
<h3 id="validator-checkconstraints-orm"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-checkconstraints-orm"></a>11.1. ORM integration</h3>
<div class="paragraph">
<p>Hibernate Validator integrates with both Hibernate ORM and all pure Java Persistence providers.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When lazy loaded associations are supposed to be validated it is recommended to place the constraint
on the getter of the association. Hibernate ORM replaces lazy loaded associations with proxy instances
which get initialized/loaded when requested via the getter. If, in such a case, the constraint is
placed on field level, the actual proxy instance is used which will lead to validation errors.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="validator-checkconstraints-db"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-checkconstraints-db"></a>11.1.1. Database schema-level validation</h4>
<div class="paragraph">
<p>Out of the box, Hibernate ORM will translate the constraints you have defined for
your entities into mapping metadata. For example, if a property of your entity is annotated
<code>@NotNull</code>, its columns will be declared as <code>not null</code> in the DDL schema generated by Hibernate ORM.</p>
</div>
<div class="paragraph">
<p>If, for some reason, the feature needs to be disabled, set <code>hibernate.validator.apply_to_ddl</code> to
<code>false</code>. See also <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-spec">Section 2.3.1, “Jakarta Bean Validation constraints”</a> and <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints">Section 2.3.2, “Additional constraints”</a>.</p>
</div>
<div class="paragraph">
<p>You can also limit the DDL constraint generation to a subset of the defined constraints by setting
the property <code>org.hibernate.validator.group.ddl</code>. The property specifies the comma-separated, fully
specified class names of the groups a constraint has to be part of in order to be considered for DDL
schema generation.</p>
</div>
</div>
<div class="sect3">
<h4 id="validator-checkconstraints-orm-hibernateevent"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-checkconstraints-orm-hibernateevent"></a>11.1.2. Hibernate ORM event-based validation</h4>
<div class="paragraph">
<p>Hibernate Validator has a built-in Hibernate event listener -
<a href="https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/cfg/beanvalidation/BeanValidationEventListener.java"><code>org.hibernate.cfg.beanvalidation.BeanValidationEventListener</code></a> -
which is part of Hibernate ORM. Whenever a <code>PreInsertEvent</code>,
<code>PreUpdateEvent</code> or <code>PreDeleteEvent</code> occurs, the listener will verify all constraints of the entity
instance and throw an exception if any constraint is violated. Per default, objects will be checked
before any inserts or updates are made by Hibernate ORM. Pre deletion events will per default not
trigger a validation. You can configure the groups to be validated per event type using the
properties <code>javax.persistence.validation.group.pre-persist</code>,
<code>javax.persistence.validation.group.pre-update</code> and <code>javax.persistence.validation.group.pre-remove</code>.
The values of these properties are the comma-separated fully specified class names of the groups
to validate. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-beanvalidationeventlistener-config">Example 11.1, “Manual configuration of <code>BeanValidationEvenListener</code>”</a> shows the default values for these
properties. In this case they could also be omitted.</p>
</div>
<div class="paragraph">
<p>On constraint violation, the event will raise a runtime <code>ConstraintViolationException</code> which contains
a set of <code>ConstraintViolation</code> instances describing each failure.</p>
</div>
<div class="paragraph">
<p>If Hibernate Validator is present in the classpath, Hibernate ORM will use it transparently.
To avoid validation even though Hibernate Validator is in the classpath, set
<code>javax.persistence.validation.mode</code> to none.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the beans are not annotated with validation annotations, there is no runtime performance cost.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>In case you need to manually set the event listeners for Hibernate ORM, use the following
configuration in <em>hibernate.cfg.xml</em>:</p>
</div>
<div id="example-beanvalidationeventlistener-config" class="exampleblock">
<div class="title">Example 11.1: Manual configuration of <code>BeanValidationEvenListener</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;hibernate-configuration&gt;</span><span class="pln">
    </span><span class="tag">&lt;session-factory&gt;</span><span class="pln">
        ...
        </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"javax.persistence.validation.group.pre-persist"</span><span class="tag">&gt;</span><span class="pln">
            javax.validation.groups.Default
        </span><span class="tag">&lt;/property&gt;</span><span class="pln">
        </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"javax.persistence.validation.group.pre-update"</span><span class="tag">&gt;</span><span class="pln">
            javax.validation.groups.Default
        </span><span class="tag">&lt;/property&gt;</span><span class="pln">
        </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"javax.persistence.validation.group.pre-remove"</span><span class="tag">&gt;&lt;/property&gt;</span><span class="pln">
        ...
        </span><span class="tag">&lt;event</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"pre-update"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;listener</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.hibernate.cfg.beanvalidation.BeanValidationEventListener"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/event&gt;</span><span class="pln">
        </span><span class="tag">&lt;event</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"pre-insert"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;listener</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.hibernate.cfg.beanvalidation.BeanValidationEventListener"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/event&gt;</span><span class="pln">
        </span><span class="tag">&lt;event</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"pre-delete"</span><span class="tag">&gt;</span><span class="pln">
            </span><span class="tag">&lt;listener</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"org.hibernate.cfg.beanvalidation.BeanValidationEventListener"</span><span class="tag">/&gt;</span><span class="pln">
        </span><span class="tag">&lt;/event&gt;</span><span class="pln">
    </span><span class="tag">&lt;/session-factory&gt;</span><span class="pln">
</span><span class="tag">&lt;/hibernate-configuration&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jpa"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_jpa"></a>11.1.3. JPA</h4>
<div class="paragraph">
<p>If you are using JPA 2 and Hibernate Validator is in the classpath, the JPA2 specification requires
that Jakarta Bean Validation gets enabled. The properties <code>javax.persistence.validation.group.pre-persist</code>,
<code>javax.persistence.validation.group.pre-update</code> and <code>javax.persistence.validation.group.pre-remove</code> as
described in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-checkconstraints-orm-hibernateevent">Section 11.1.2, “Hibernate ORM event-based validation”</a> can in this case be configured in
<em>persistence.xml</em>. <em>persistence.xml</em> also defines a node validation-mode which can be set to <code>AUTO</code>,
<code>CALLBACK</code> or <code>NONE</code>. The default is <code>AUTO</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-presentation-layer"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-presentation-layer"></a>11.2. JSF &amp; Seam</h3>
<div class="paragraph">
<p>When working with JSF2 or JBoss Seam and Hibernate Validator (Jakarta Bean Validation) is present in the
runtime environment, validation is triggered for every field in the application. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-jsf2">Example 11.2, “Usage of Jakarta Bean Validation within JSF2”</a>
shows an example of the <code>f:validateBean</code> tag in a JSF page. The <code>validationGroups</code> attribute is optional
and can be used to specify a comma separated list of validation groups. The default is
<code>javax.validation.groups.Default</code>. For more information refer to the Seam documentation or the JSF 2
specification.</p>
</div>
<div id="example-jsf2" class="exampleblock">
<div class="title">Example 11.2: Usage of Jakarta Bean Validation within JSF2</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;h:form&gt;</span><span class="pln">

  </span><span class="tag">&lt;f:validateBean</span><span class="pln"> </span><span class="atn">validationGroups</span><span class="pun">=</span><span class="atv">"javax.validation.groups.Default"</span><span class="tag">&gt;</span><span class="pln">

    </span><span class="tag">&lt;h:inputText</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">#{model.property}</span><span class="tag">/&gt;</span><span class="pln">
    </span><span class="tag">&lt;h:selectOneRadio</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">#{model.radioProperty}</span><span class="tag">&gt;</span><span class="pln"> ... </span><span class="tag">&lt;/h:selectOneRadio&gt;</span><span class="pln">
    </span><span class="com">&lt;!-- other input components here --&gt;</span><span class="pln">

  </span><span class="tag">&lt;/f:validateBean&gt;</span><span class="pln">

</span><span class="tag">&lt;/h:form&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The integration between JSF 2 and Jakarta Bean Validation is described in the "Jakarta Bean Validation Integration"
chapter of <a href="http://jcp.org/en/jsr/detail?id=314">JSR-314</a>. It is interesting to know that JSF
2 implements a custom <code>MessageInterpolator</code> to ensure proper localization. To encourage the use
of the Jakarta Bean Validation message facility, JSF 2 will per default only display the generated Bean
Validation message. This can, however, be configured via the application resource bundle by
providing the following configuration (<code>{0}</code> is replaced with the Jakarta Bean Validation message and <code>{1}</code> is
replaced with the JSF component label):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>javax.faces.validator.BeanValidator.MESSAGE={1}: {0}</pre>
</div>
</div>
<div class="paragraph">
<p>The default is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>javax.faces.validator.BeanValidator.MESSAGE={0}</pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="section-integration-with-cdi"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-integration-with-cdi"></a>11.3. CDI</h3>
<div class="paragraph">
<p>As of version 1.1, Bean Validation (and therefore Jakarta Bean Validation) is integrated with CDI
(Contexts and Dependency Injection for Jakarta EE).</p>
</div>
<div class="paragraph">
<p>This integration provides CDI managed beans for <code>Validator</code> and <code>ValidatorFactory</code> and enables
dependency injection in constraint validators as well as custom message interpolators, traversable
resolvers, constraint validator factories, parameter name providers, clock providers and value
extractors.</p>
</div>
<div class="paragraph">
<p>Furthermore, parameter and return value constraints on the methods and constructors of CDI managed
beans will automatically be validated upon invocation.</p>
</div>
<div class="paragraph">
<p>When your application runs on a Java EE container, this integration is enabled by default. When
working with CDI in a Servlet container or in a pure Java SE environment, you can use the CDI
portable extension provided by Hibernate Validator. To do so, add the portable extension to your
class path as described in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getting-started-cdi">Section 1.1.2, “CDI”</a>.</p>
</div>
<div class="sect3">
<h4 id="_dependency_injection"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_dependency_injection"></a>11.3.1. Dependency injection</h4>
<div class="paragraph">
<p>CDI’s dependency injection mechanism makes it very easy to retrieve <code>ValidatorFactory</code> and <code>Validator</code>
instances and use them in your managed beans. Just annotate instance fields of your bean with
<code>@javax.inject.Inject</code> as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-dependency-injection">Example 11.3, “Retrieving validator factory and validator via <code>@Inject</code>”</a>.</p>
</div>
<div id="example-dependency-injection" class="exampleblock">
<div class="title">Example 11.3: Retrieving validator factory and validator via <code>@Inject</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ApplicationScoped</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Inject</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Inject</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Validator</span><span class="pln"> validator</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The injected beans are the default validator factory and validator instances. In order to configure
them - e.g. to use a custom message interpolator - you can use the Jakarta Bean Validation XML descriptors
as discussed in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration">Chapter 8, <em>Configuring via XML</em></a>.</p>
</div>
<div class="paragraph">
<p>If you are working with several Jakarta Bean Validation providers, you can make sure that factory and
validator from Hibernate Validator are injected by annotating the injection points with the
<code>@HibernateValidator</code> qualifier which is demonstrated in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-dependency-injection-using-hv">Example 11.4, “Using the <code>@HibernateValidator</code> qualifier annotation”</a>.</p>
</div>
<div id="example-dependency-injection-using-hv" class="exampleblock">
<div class="title">Example 11.4: Using the <code>@HibernateValidator</code> qualifier annotation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">qualifier</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ApplicationScoped</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Inject</span><span class="pln">
    </span><span class="lit">@HibernateValidator</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Inject</span><span class="pln">
    </span><span class="lit">@HibernateValidator</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Validator</span><span class="pln"> validator</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The fully-qualified name of the qualifier annotation is
<code>org.hibernate.validator.cdi.HibernateValidator</code>. Be sure to not import
<code>org.hibernate.validator.HibernateValidator</code> instead which is the <code>ValidationProvider</code> implementation
used for selecting Hibernate Validator when working with the bootstrapping API (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-retrieving-validator-factory-validator">Section 9.1, “Retrieving <code>ValidatorFactory</code> and <code>Validator</code>”</a>).</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Via <code>@Inject</code> you also can inject dependencies into constraint validators and other Jakarta Bean Validation
objects such as <code>MessageInterpolator</code> implementations etc.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraint-validator-injected-bean">Example 11.5, “Constraint validator with injected bean”</a>
demonstrates how an injected CDI bean is used in a <code>ConstraintValidator</code> implementation to determine
whether the given constraint is valid or not. As the example shows, you also can work with the
<code>@PostConstruct</code> and <code>@PreDestroy</code> callbacks to implement any required construction and destruction
logic.</p>
</div>
<div id="example-constraint-validator-injected-bean" class="exampleblock">
<div class="title">Example 11.5: Constraint validator with injected bean</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">injection</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ValidLicensePlateValidator</span><span class="pln">
        </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ValidLicensePlate</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Inject</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">VehicleRegistry</span><span class="pln"> vehicleRegistry</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@PostConstruct</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> postConstruct</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//do initialization logic...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@PreDestroy</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> preDestroy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//do destruction logic...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">ValidLicensePlate</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> licensePlate</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> constraintContext</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> vehicleRegistry</span><span class="pun">.</span><span class="pln">isValidLicensePlate</span><span class="pun">(</span><span class="pln"> licensePlate </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_method_validation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_method_validation"></a>11.3.2. Method validation</h4>
<div class="paragraph">
<p>The method interception facilities of CDI allow for a very tight integration with Jakarta Bean Validation’s
method validation functionality. Just put constraint annotations to the parameters and return values
of the executables of your CDI beans and they will be validated automatically before (parameter
constraints) and after (return value constraints) a method or constructor is invoked.</p>
</div>
<div class="paragraph">
<p>Note that no explicit interceptor binding is required, instead the required method validation
interceptor will automatically be registered for all managed beans with constrained methods and
constructors.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The interceptor <code>org.hibernate.validator.cdi.internal.interceptor.ValidationInterceptor</code> is
registered by <code>org.hibernate.validator.cdi.internal.ValidationExtension</code>. This happens implicitly
within a Java EE runtime environment or explicitly by adding the <em>hibernate-validator-cdi</em>
artifact - see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getting-started-cdi">Section 1.1.2, “CDI”</a></p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>You can see an example in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cdi-method-validation">Example 11.6, “CDI managed beans with method-level constraints”</a>.</p>
</div>
<div id="example-cdi-method-validation" class="exampleblock">
<div class="title">Example 11.6: CDI managed beans with method-level constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">methodvalidation</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ApplicationScoped</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> rentCar</span><span class="pun">(</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Customer</span><span class="pln"> customer</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="lit">@Future</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> startDate</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> durationInDays</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> getAvailableCars</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">methodvalidation</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@RequestScoped</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentCarRequest</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Inject</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> rentalStation</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> rentCar</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> customerId</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> startDate</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> duration</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//causes ConstraintViolationException</span><span class="pln">
        rentalStation</span><span class="pun">.</span><span class="pln">rentCar</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here the <code>RentalStation</code> bean hosts several method constraints. When invoking one of the <code>RentalStation</code>
methods from another bean such as <code>RentCarRequest</code>, the constraints of the invoked method are
automatically validated. If any illegal parameter values are passed as in the example, a
<code>ConstraintViolationException</code> will be thrown by the method interceptor, providing detailed
information on the violated constraints. The same is the case if the method’s return value violates
any return value constraints.</p>
</div>
<div class="paragraph">
<p>Similarly, constructor constraints are validated automatically upon invocation. In the example the
<code>RentalStation</code> object returned by the constructor will be validated since the constructor return
value is marked with <code>@Valid</code>.</p>
</div>
<div class="sect4">
<h5 id="_validated_executable_types"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_validated_executable_types"></a>11.3.2.1. Validated executable types</h5>
<div class="paragraph">
<p>Jakarta Bean Validation allows for a fine-grained control of the executable types which are automatically
validated. By default, constraints on constructors and non-getter methods are validated. Therefore
the <code>@NotNull</code> constraint on the method <code>RentalStation#getAvailableCars()</code> in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cdi-method-validation">Example 11.6, “CDI managed beans with method-level constraints”</a> does not get validated when the method is invoked.</p>
</div>
<div class="paragraph">
<p>You have the following options to configure which types of executables are validated upon
invocation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure the executable types globally via the XML descriptor <em>META-INF/validation.xml</em>;
see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-configuration-validation-xml">Section 8.1, “Configuring the validator factory in <em>validation.xml</em>”</a> for an example</p>
</li>
<li>
<p>Use the <code>@ValidateOnExecution</code> annotation on the executable or type level</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If several sources of configuration are specified for a given executable, <code>@ValidateOnExecution</code> on
the executable level takes precedence over <code>@ValidateOnExecution</code> on the type level and
<code>@ValidateOnExecution</code> generally takes precedence over the globally configured types in <em>META-
INF/validation.xml</em>.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-validateonexecution">Example 11.7, “Using <code>@ValidateOnExecution</code>”</a> shows how to use the <code>@ValidateOnExecution</code> annotation:</p>
</div>
<div id="example-using-validateonexecution" class="exampleblock">
<div class="title">Example 11.7: Using <code>@ValidateOnExecution</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">methodvalidation</span><span class="pun">.</span><span class="pln">configuration</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ApplicationScoped</span><span class="pln">
</span><span class="lit">@ValidateOnExecution</span><span class="pun">(</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ExecutableType</span><span class="pun">.</span><span class="pln">ALL</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="lit">@ValidateOnExecution</span><span class="pun">(</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ExecutableType</span><span class="pun">.</span><span class="pln">NONE</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> rentCar</span><span class="pun">(</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Customer</span><span class="pln"> customer</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="lit">@Future</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> startDate</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> durationInDays</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> getAvailableCars</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here the method <code>rentCar()</code> won’t be validated upon invocation because it is annotated with
<code>@ValidateOnExecution(type = ExecutableType.NONE)</code>. In contrast, the constructor and the
method <code>getAvailableCars()</code> will be validated due to <code>@ValidateOnExecution(type =
ExecutableType.ALL)</code> being given on the type level. <code>ExecutableType.ALL</code> is a more compact form for
explicitly specifying all the types <code>CONSTRUCTORS</code>, <code>GETTER_METHODS</code> and <code>NON_GETTER_METHODS</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Executable validation can be turned off globally by specifying
<code>&lt;executable-validation enabled="false"/&gt;</code> in <em>META-INF/validation.xml</em>. In this case, all the
<code>@ValidateOnExecution</code> annotations are ignored.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Note that when a method overrides or implements a super-type method, the configuration will be taken
from that overridden or implemented method (as given via <code>@ValidateOnExecution</code> on the method itself
or on the super-type). This protects a client of the super-type method from an unexpected alteration
of the configuration, e.g. disabling validation of an overridden executable in a sub-type.</p>
</div>
<div class="paragraph">
<p>In case a CDI managed bean overrides or implements a super-type method and this super-type method
hosts any constraints, it can happen that the validation interceptor is not properly registered with
the bean, resulting in the bean’s methods not being validated upon invocation. In this case you can
specify the executable type <code>IMPLICIT</code> on the sub-class as shown in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-executabletype-implicit">Example 11.8, “Using <code>ExecutableType.IMPLICIT</code>”</a>, which makes sure that all required metadata is discovered
and the validation interceptor kicks in when the methods on <code>ExpressRentalStation</code> are invoked.</p>
</div>
<div id="example-using-executabletype-implicit" class="exampleblock">
<div class="title">Example 11.8: Using <code>ExecutableType.IMPLICIT</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">methodvalidation</span><span class="pun">.</span><span class="kwd">implicit</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ValidateOnExecution</span><span class="pun">(</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ExecutableType</span><span class="pun">.</span><span class="pln">ALL</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@Valid</span><span class="pln">
    </span><span class="typ">Car</span><span class="pln"> rentCar</span><span class="pun">(</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="typ">Customer</span><span class="pln"> customer</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@NotNull</span><span class="pln"> </span><span class="lit">@Future</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> startDate</span><span class="pun">,</span><span class="pln">
            </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> durationInDays</span><span class="pun">);</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> getAvailableCars</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">cdi</span><span class="pun">.</span><span class="pln">methodvalidation</span><span class="pun">.</span><span class="kwd">implicit</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ApplicationScoped</span><span class="pln">
</span><span class="lit">@ValidateOnExecution</span><span class="pun">(</span><span class="pln">type </span><span class="pun">=</span><span class="pln"> </span><span class="typ">ExecutableType</span><span class="pun">.</span><span class="pln">IMPLICIT</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ExpressRentalStation</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">RentalStation</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> rentCar</span><span class="pun">(</span><span class="typ">Customer</span><span class="pln"> customer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Date</span><span class="pln"> startDate</span><span class="pun">,</span><span class="pln"> </span><span class="lit">@Min</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> durationInDays</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> getAvailableCars</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">//...</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_java_ee"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_java_ee"></a>11.4. Java EE</h3>
<div class="paragraph">
<p>When your application runs on a Java EE application server such as <a href="http://wildfly.org/">WildFly</a>,
you also can obtain <code>Validator</code> and <code>ValidatorFactory</code> instances via <code>@Resource</code> injection in
managed objects such as EJBs etc., as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-validator-resource-injection">Example 11.9, “Retrieving <code>Validator</code> and <code>ValidatorFactory</code> via <code>@Resource</code> injection”</a>.</p>
</div>
<div id="example-validator-resource-injection" class="exampleblock">
<div class="title">Example 11.9: Retrieving <code>Validator</code> and <code>ValidatorFactory</code> via <code>@Resource</code> injection</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter11</span><span class="pun">.</span><span class="pln">javaee</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">RentalStationBean</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Resource</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@Resource</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">Validator</span><span class="pln"> validator</span><span class="pun">;</span><span class="pln">

    </span><span class="com">//...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can obtain a validator and a validator factory from JNDI under the names
"<em>java:comp/Validator</em>" and "<em>java:comp/ValidatorFactory</em>", respectively.</p>
</div>
<div class="paragraph">
<p>Similar to CDI-based injection via <code>@Inject</code>, these objects represent default validator and validator
factory and thus can be configured using the XML descriptor <em>META-INF/validation.xml</em> (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration">Chapter 8, <em>Configuring via XML</em></a>).</p>
</div>
<div class="paragraph">
<p>When your application is CDI-enabled, the injected objects are CDI-aware as well and e.g. support
dependency injection in constraint validators.</p>
</div>
</div>
<div class="sect2">
<h3 id="_javafx"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_javafx"></a>11.5. JavaFX</h3>
<div class="paragraph">
<p>Hibernate Validator also provides support for the unwrapping of JavaFX properties. If JavaFX is present
on the classpath, <code>ValueExtractor</code>s for JavaFX properties are automatically registered.
See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-valueextraction-javafx">Section 7.4, “JavaFX value extractors”</a> for examples and further discussion.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validator-specifics"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-specifics"></a>12. Hibernate Validator Specifics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this chapter you will learn how to make use of several features provided by Hibernate Validator
in addition to the functionality defined by the Jakarta Bean Validation specification. This includes the
fail fast mode, the API for programmatic constraint configuration and the boolean composition of
constraints.</p>
</div>
<div class="paragraph">
<p>New APIs or SPIs are tagged with the <code>org.hibernate.validator.Incubating</code> annotation as long as they
are under development. This means that such elements (e.g. packages, types, methods, constants etc.)
may be incompatibly altered - or removed - in subsequent releases. Usage of incubating API/SPI members
is encouraged (so the development team can get feedback on these new features) but you should be
prepared for updating code which is using them as needed when upgrading to a new version of Hibernate
Validator.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using the features described in the following sections may result in application code which is not
portable between Jakarta Bean Validation providers.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="_public_api"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_public_api"></a>12.1. Public API</h3>
<div class="paragraph">
<p>Let’s start, however, with a look at the public API of Hibernate Validator. Below you can find a list of all packages belonging to this API and their purpose.
Note that when a package is part of the public API this is not necessarily true for its sub-packages.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.hibernate.validator</code></dt>
<dd>
<p>Classes used by the Jakarta Bean Validation bootstrap mechanism (eg. validation provider, configuration class); for more details see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-bootstrapping">Chapter 9, <em>Bootstrapping</em></a>.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.cfg</code>, <code>org.hibernate.validator.cfg.context</code>, <code>org.hibernate.validator.cfg.defs</code>, <code>org.hibernate.validator.spi.cfg</code></dt>
<dd>
<p>Hibernate Validator’s fluent API for constraint declaration; in <code>org.hibernate.validator.cfg</code> you will find the <code>ConstraintMapping</code> interface, in <code>org.hibernate.validator.cfg.defs</code> all constraint definitions and in <code>org.hibernate.validator.spi.cfg</code> a callback for using the API for configuring the default validator factory. Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api">Section 12.4, “Programmatic constraint definition and declaration”</a> for the details.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.constraints</code>, <code>org.hibernate.validator.constraints.br</code>, <code>org.hibernate.validator.constraints.pl</code></dt>
<dd>
<p>Some useful custom constraints provided by Hibernate Validator in addition to the built-in constraints defined by the Jakarta Bean Validation specification; the constraints are described in detail in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-defineconstraints-hv-constraints">Section 2.3.2, “Additional constraints”</a>.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.constraintvalidation</code></dt>
<dd>
<p>Extended constraint validator context which allows to set custom attributes for message interpolation. <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-hibernateconstraintvalidatorcontext">Section 12.12.1, “<code>HibernateConstraintValidatorContext</code>”</a> describes how to make use of that feature.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.group</code>, <code>org.hibernate.validator.spi.group</code></dt>
<dd>
<p>The group sequence provider feature which allows you to define dynamic default group sequences in function of the validated object state; the specifics can be found in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-default-group-class">Section 5.4, “Redefining the default group sequence”</a>.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.messageinterpolation</code>, <code>org.hibernate.validator.resourceloading</code>, <code>org.hibernate.validator.spi.resourceloading</code></dt>
<dd>
<p>Classes related to constraint message interpolation; the first package contains Hibernate Validator’s default message interpolator, <code>ResourceBundleMessageInterpolator</code>. The latter two packages provide the <code>ResourceBundleLocator</code> SPI for the loading of resource bundles (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-resource-bundle-locator">Section 4.2.1, “<code>ResourceBundleLocator</code>”</a>) and its default implementation.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.parameternameprovider</code></dt>
<dd>
<p>A <code>ParameterNameProvider</code> based on the Paranamer library, see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-paranamer-parameternameprovider">Section 12.13, “Paranamer based <code>ParameterNameProvider</code>”</a>.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.propertypath</code></dt>
<dd>
<p>Extensions to the <code>javax.validation.Path</code> API, see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-extensions-path-api">Section 12.7, “Extensions of the Path API”</a>.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.spi.constraintdefinition</code></dt>
<dd>
<p>An SPI for registering additional constraint validators programmatically, see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-definition-contribution">Section 12.14, “Providing constraint definitions”</a>.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.spi.messageinterpolation</code></dt>
<dd>
<p>An SPI that can be used to tweak the resolution of the locale when interpolating the constraint violation messages. See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-locale-resolver">Section 12.11, “Customizing the locale resolution”</a>.</p>
</dd>
<dt class="hdlist1"><code>org.hibernate.validator.spi.nodenameprovider</code></dt>
<dd>
<p>An SPI that can be used to alter how the names of properties will be resolved when the property path is constructed. See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-property-node-name-provider">Section 12.17, “Customizing the property name resolution for constraint violations”</a>.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The public packages of Hibernate Validator fall into two categories: while the actual API parts are
intended to be <em>invoked</em> or <em>used</em> by clients (e.g. the API for programmatic constraint declaration
or the custom constraints), the SPI (service provider interface) packages contain interfaces which
are intended to be <em>implemented</em> by clients (e.g. <code>ResourceBundleLocator</code>).</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Any packages not listed in that table are internal packages of Hibernate Validator and are not
intended to be accessed by clients. The contents of these internal packages can change from release
to release without notice, thus possibly breaking any client code relying on it.</p>
</div>
</div>
<div class="sect2">
<h3 id="section-fail-fast"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-fail-fast"></a>12.2. Fail fast mode</h3>
<div class="paragraph">
<p>Using the fail fast mode, Hibernate Validator allows to return from the current validation as soon
as the first constraint violation occurs. This can be useful for the validation of large object
graphs where you are only interested in a quick check whether there is any constraint violation at
all.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-fail-fast">Example 12.1, “Using the fail fast validation mode”</a> shows how to bootstrap and use a fail fast enabled validator.</p>
</div>
<div id="example-using-fail-fast" class="exampleblock">
<div class="title">Example 12.1: Using the fail fast validation mode</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">failfast</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Car</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@AssertTrue</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> manufacturer</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isRegistered</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">manufacturer </span><span class="pun">=</span><span class="pln"> manufacturer</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isRegistered </span><span class="pun">=</span><span class="pln"> isRegistered</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="com">//getters and setters...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">failFast</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

</span><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Here the validated object actually fails to satisfy both the constraints declared on the <code>Car</code> class,
yet the validation call yields only one <code>ConstraintViolation</code> since the fail fast mode is enabled.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There is no guarantee in which order the constraints are evaluated, i.e. it is not deterministic
whether the returned violation originates from the <code>@NotNull</code> or the <code>@AssertTrue</code> constraint. If
required, a deterministic evaluation order can be enforced using group sequences as described in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-defining-group-sequences">Section 5.3, “Defining group sequences”</a>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-provider-specific-settings">Section 9.2.8, “Provider-specific settings”</a> to learn about the different ways of enabling the
fail fast mode when bootstrapping a validator.</p>
</div>
</div>
<div class="sect2">
<h3 id="section-method-validation-prerequisite-relaxation"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-validation-prerequisite-relaxation"></a>12.3. Relaxation of requirements for method validation in class hierarchies</h3>
<div class="paragraph">
<p>The Jakarta Bean Validation specification defines a set of preconditions which apply when defining
constraints on methods within class hierarchies. These preconditions are defined in
<a href="http://beanvalidation.org/2.0/spec/#constraintdeclarationvalidationprocess-methodlevelconstraints-inheritance">section 5.6.5</a>
of the Jakarta Bean Validation 2.0 specification. See also <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-method-constraints-inheritance-hierarchies">Section 3.1.4, “Method constraints in inheritance hierarchies”</a>
in this guide.</p>
</div>
<div class="paragraph">
<p>As per specification, a Jakarta Bean Validation provider is allowed to relax these preconditions.
With Hibernate Validator you can do this in one of two ways.</p>
</div>
<div class="paragraph">
<p>First you can use the configuration properties <em>hibernate.validator.allow_parameter_constraint_override</em>,
<em>hibernate.validator.allow_multiple_cascaded_validation_on_result</em> and
<em>hibernate.validator.allow_parallel_method_parameter_constraint</em> in <em>validation.xml</em>. See example
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-relaxing-method-validation-xml">Example 12.2, “Configuring method validation behaviour in class hierarchies via properties”</a>.</p>
</div>
<div id="example-relaxing-method-validation-xml" class="exampleblock">
<div class="title">Example 12.2: Configuring method validation behaviour in class hierarchies via properties</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="tag">&lt;validation-config</span><span class="pln">
        </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration"</span><span class="pln">
        </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
        </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration validation-configuration-2.0.xsd"</span><span class="pln">
        </span><span class="atn">version</span><span class="pun">=</span><span class="atv">"2.0"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;default-provider&gt;</span><span class="pln">org.hibernate.validator.HibernateValidator</span><span class="tag">&lt;/default-provider&gt;</span><span class="pln">

    </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"hibernate.validator.allow_parameter_constraint_override"</span><span class="tag">&gt;</span><span class="pln">true</span><span class="tag">&lt;/property&gt;</span><span class="pln">
    </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"hibernate.validator.allow_multiple_cascaded_validation_on_result"</span><span class="tag">&gt;</span><span class="pln">true</span><span class="tag">&lt;/property&gt;</span><span class="pln">
    </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"hibernate.validator.allow_parallel_method_parameter_constraint"</span><span class="tag">&gt;</span><span class="pln">true</span><span class="tag">&lt;/property&gt;</span><span class="pln">
</span><span class="tag">&lt;/validation-config&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Alternatively these settings can be applied during programmatic bootstrapping.</p>
</div>
<div id="example-relaxing-method-validation" class="exampleblock">
<div class="title">Example 12.3: Configuring method validation behaviour in class hierarchies</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">HibernateValidatorConfiguration</span><span class="pln"> configuration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">configure</span><span class="pun">();</span><span class="pln">

configuration</span><span class="pun">.</span><span class="pln">allowMultipleCascadedValidationOnReturnValues</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">allowOverridingMethodAlterParameterConstraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">allowParallelMethodsDefineParameterConstraints</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>By default, all of these properties are false, implementing the default behavior as defined in the
Jakarta Bean Validation specification.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Changing the default behaviour for method validation will result in non specification-conforming and non
portable application. Make sure to understand what you are doing and that your use case really
requires changes to the default behaviour.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="section-programmatic-api"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api"></a>12.4. Programmatic constraint definition and declaration</h3>
<div class="paragraph">
<p>As per the Jakarta Bean Validation specification, you can define and declare constraints using Java annotations and XML
based constraint mappings.</p>
</div>
<div class="paragraph">
<p>In addition, Hibernate Validator provides a fluent API which allows for the programmatic
configuration of constraints. Use cases include the dynamic addition of constraints at runtime
depending on some application state or tests where you need entities with different constraints in
different scenarios but don’t want to implement actual Java classes for each test case.</p>
</div>
<div class="paragraph">
<p>By default, constraints added via the fluent API are additive to constraints configured via the
standard configuration capabilities. But it is also possible to ignore annotation and XML configured
constraints where required.</p>
</div>
<div class="paragraph">
<p>The API is centered around the <code>ConstraintMapping</code> interface. You obtain a new mapping via
<code>HibernateValidatorConfiguration#createConstraintMapping()</code> which you then can configure in a fluent
manner as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraint-mapping">Example 12.4, “Programmatic constraint declaration”</a>.</p>
</div>
<div id="example-constraint-mapping" class="exampleblock">
<div class="title">Example 12.4: Programmatic constraint declaration</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">HibernateValidatorConfiguration</span><span class="pln"> configuration </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">();</span><span class="pln">

</span><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"manufacturer"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"licensePlate"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">ignoreAnnotations</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SizeDef</span><span class="pun">().</span><span class="pln">min</span><span class="pun">(</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">).</span><span class="pln">max</span><span class="pun">(</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getter</span><span class="pun">(</span><span class="pln"> </span><span class="str">"rentalStation"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">addMapping</span><span class="pun">(</span><span class="pln"> constraintMapping </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Constraints can be configured on multiple classes and properties using method chaining. The
constraint definition classes <code>NotNullDef</code> and <code>SizeDef</code> are helper classes which allow to configure
constraint parameters in a type-safe fashion. Definition classes exist for all built-in constraints
in the <code>org.hibernate.validator.cfg.defs</code> package. By calling <code>ignoreAnnotations()</code> any constraints
configured via annotations or XML are ignored for the given element.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Each element (type, property, method etc.) may only be configured once within all the constraint
mappings used to set up one validator factory. Otherwise a <code>ValidationException</code> is raised.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is not supported to add constraints to non-overridden supertype properties and methods by
configuring a subtype. Instead you need to configure the supertype in this case.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Having configured the mapping, you must add it back to the configuration object from which you then
can obtain a validator factory.</p>
</div>
<div class="paragraph">
<p>For custom constraints, you can either create your own definition classes extending <code>ConstraintDef</code> or
you can use <code>GenericConstraintDef</code> as seen in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-generic-constraint-mapping">Example 12.5, “Programmatic declaration of a custom constraint”</a>.</p>
</div>
<div id="example-generic-constraint-mapping" class="exampleblock">
<div class="title">Example 12.5: Programmatic declaration of a custom constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"licensePlate"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GenericConstraintDef</span><span class="pun">&lt;&gt;(</span><span class="pln"> </span><span class="typ">CheckCase</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">param</span><span class="pun">(</span><span class="pln"> </span><span class="str">"value"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">CaseMode</span><span class="pun">.</span><span class="pln">UPPER </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Container element constraints are supported by the programmatic API, using <code>containerElementType()</code>.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-nested-container-element-constraints">Example 12.6, “Programmatic declaration of a nested container element constraint”</a> show an example where constraints are declared on
nested container elements.</p>
</div>
<div id="example-nested-container-element-constraints" class="exampleblock">
<div class="title">Example 12.6: Programmatic declaration of a nested container element constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"manufacturer"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"licensePlate"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">ignoreAnnotations</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">true</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SizeDef</span><span class="pun">().</span><span class="pln">min</span><span class="pun">(</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">).</span><span class="pln">max</span><span class="pun">(</span><span class="pln"> </span><span class="lit">14</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"partManufacturers"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">containerElementType</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">containerElementType</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getter</span><span class="pun">(</span><span class="pln"> </span><span class="str">"rentalStation"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As demonstrated, the parameters passed to <code>containerElementType()</code> are the path of type argument
indexes used to obtain the desired nested container element type.</p>
</div>
<div class="paragraph">
<p>By invoking <code>valid()</code> you can mark a member for cascaded validation which is equivalent to annotating
it with <code>@Valid</code>. Configure any group conversions to be applied during cascaded validation using the
<code>convertGroup()</code> method (equivalent to <code>@ConvertGroup</code>). An example can be seen in
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-cascading-constraints">Example 12.7, “Marking a property for cascaded validation”</a>.</p>
</div>
<div id="example-cascading-constraints" class="exampleblock">
<div class="title">Example 12.7: Marking a property for cascaded validation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"driver"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">valid</span><span class="pun">()</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">convertGroup</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Default</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">to</span><span class="pun">(</span><span class="pln"> </span><span class="typ">PersonDefault</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"partManufacturers"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">containerElementType</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">valid</span><span class="pun">()</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">containerElementType</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">valid</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">().</span><span class="pln">groups</span><span class="pun">(</span><span class="pln"> </span><span class="typ">PersonDefault</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can not only configure bean constraints using the fluent API but also method and constructor
constraints. As shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-method-constraint-mapping">Example 12.8, “Programmatic declaration of method and constructor constraints”</a> constructors are identified by their
parameter types and methods by their name and parameter types. Having selected a method or
constructor, you can mark its parameters and/or return value for cascaded validation and add
constraints as well as cross-parameter constraints.</p>
</div>
<div class="paragraph">
<p>As shown in the example, <code>valid()</code> can be also invoked on a container element type.</p>
</div>
<div id="example-method-constraint-mapping" class="exampleblock">
<div class="title">Example 12.8: Programmatic declaration of method and constructor constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">constructor</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">parameter</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">SizeDef</span><span class="pun">().</span><span class="pln">min</span><span class="pun">(</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">).</span><span class="pln">max</span><span class="pun">(</span><span class="pln"> </span><span class="lit">50</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">valid</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">method</span><span class="pun">(</span><span class="pln"> </span><span class="str">"drive"</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">parameter</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MaxDef</span><span class="pun">().</span><span class="pln">value</span><span class="pun">(</span><span class="pln"> </span><span class="lit">75</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">method</span><span class="pun">(</span><span class="pln"> </span><span class="str">"load"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">List</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">crossParameter</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GenericConstraintDef</span><span class="pun">&lt;&gt;(</span><span class="pln">
                        </span><span class="typ">LuggageCountMatchesPassengerCount</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">param</span><span class="pun">(</span><span class="pln">
                            </span><span class="str">"piecesOfLuggagePerPassenger"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
                        </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">method</span><span class="pun">(</span><span class="pln"> </span><span class="str">"getDriver"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">returnValue</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">valid</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Last but not least you can configure the default group sequence or the default group sequence
provider of a type as shown in the following example.</p>
</div>
<div id="example-sequences" class="exampleblock">
<div class="title">Example 12.9: Configuration of default group sequence and default group sequence provider</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">defaultGroupSequence</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> </span><span class="typ">CarChecks</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
    </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">RentalCar</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">defaultGroupSequenceProviderClass</span><span class="pun">(</span><span class="pln"> </span><span class="typ">RentalCarGroupSequenceProvider</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-programmatic-api-contributor"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api-contributor"></a>12.5. Applying programmatic constraint declarations to the default validator factory</h3>
<div class="paragraph">
<p>If you are not bootstrapping a validator factory manually
but work with the default factory as configured via <em>META-INF/validation.xml</em>
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration">Chapter 8, <em>Configuring via XML</em></a>),
you can add one or more constraint mappings by creating one or several constraint mapping contributors.
To do so, implement the <code>ConstraintMappingContributor</code> contract:</p>
</div>
<div id="example-constraint-mapping-contributor" class="exampleblock">
<div class="title">Example 12.10: Custom <code>ConstraintMappingContributor</code> implementation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">constraintapi</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyConstraintMappingContributor</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintMappingContributor</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> createConstraintMappings</span><span class="pun">(</span><span class="typ">ConstraintMappingBuilder</span><span class="pln"> builder</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        builder</span><span class="pun">.</span><span class="pln">addConstraintMapping</span><span class="pun">()</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Marathon</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">getter</span><span class="pun">(</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">NotNullDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"numberOfHelpers"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MinDef</span><span class="pun">().</span><span class="pln">value</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        builder</span><span class="pun">.</span><span class="pln">addConstraintMapping</span><span class="pun">()</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">type</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Runner</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">field</span><span class="pun">(</span><span class="pln"> </span><span class="str">"paidEntryFee"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">constraint</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AssertTrueDef</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You then need to specify the fully-qualified class name of the contributor implementation in <em>META-INF/validation.xml</em>,
using the property key <code>hibernate.validator.constraint_mapping_contributors</code>. You can specify several
contributors by separating them with a comma.</p>
</div>
</div>
<div class="sect2">
<h3 id="section-advanced-constraint-composition"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-advanced-constraint-composition"></a>12.6. Advanced constraint composition features</h3>
<div class="sect3">
<h4 id="_validation_target_specification_for_purely_composed_constraints"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_validation_target_specification_for_purely_composed_constraints"></a>12.6.1. Validation target specification for purely composed constraints</h4>
<div class="paragraph">
<p>In case you specify a purely composed constraint - i.e. a constraint which has no validator itself but is solely made
up from other, composing constraints - on a method declaration, the validation engine cannot determine whether that
constraint is to be applied as a return value constraint or as a cross-parameter constraint.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator allows to resolve such ambiguities by specifying the <code>@SupportedValidationTarget</code> annotation on the
declaration of the composed constraint type as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-purely-composed-constraint-validation-target">Example 12.11, “Specifying the validation target of a purely composed constraint”</a>.
The <code>@ValidInvoiceAmount</code> does not declare any validator, but it is solely composed by the <code>@Min</code> and <code>@NotNull</code>
constraints. The <code>@SupportedValidationTarget</code> ensures that the constraint is applied to the method return value when
given on a method declaration.</p>
</div>
<div id="example-purely-composed-constraint-validation-target" class="exampleblock">
<div class="title">Example 12.11: Specifying the validation target of a purely composed constraint</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">purelycomposed</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@Min</span><span class="pun">(</span><span class="pln">value </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@NotNull</span><span class="pln">
</span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> METHOD</span><span class="pun">,</span><span class="pln"> FIELD</span><span class="pun">,</span><span class="pln"> ANNOTATION_TYPE</span><span class="pun">,</span><span class="pln"> CONSTRUCTOR</span><span class="pun">,</span><span class="pln"> PARAMETER </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Documented</span><span class="pln">
</span><span class="lit">@Constraint</span><span class="pun">(</span><span class="pln">validatedBy </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{})</span><span class="pln">
</span><span class="lit">@SupportedValidationTarget</span><span class="pun">(</span><span class="typ">ValidationTarget</span><span class="pun">.</span><span class="pln">ANNOTATED_ELEMENT</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@ReportAsSingleViolation</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">ValidInvoiceAmount</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter11.purelycomposed."</span><span class="pln">
            </span><span class="pun">+</span><span class="pln"> </span><span class="str">"ValidInvoiceAmount.message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{};</span><span class="pln">

    </span><span class="lit">@OverridesAttribute</span><span class="pun">(</span><span class="pln">constraint </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Min</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">,</span><span class="pln"> name </span><span class="pun">=</span><span class="pln"> </span><span class="str">"value"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">long</span><span class="pln"> value</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="section-boolean-constraint-composition"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-boolean-constraint-composition"></a>12.6.2. Boolean composition of constraints</h4>
<div class="paragraph">
<p>Jakarta Bean Validation specifies that the constraints of a composed constraint (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-composition">Section 6.4, “Constraint composition”</a>) are all combined via a logical <em>AND</em>. This means all of the
composing constraints need to return true to obtain an overall successful validation.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator offers an extension to this and allows you to compose constraints via a logical
<em>OR</em> or <em>NOT</em>. To do so, you have to use the ConstraintComposition annotation and the enum
CompositionType with its values <em>AND</em>, <em>OR</em> and <em>ALL_FALSE</em>.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-boolean-constraint-composition">Example 12.12, “OR composition of constraints”</a> shows how to build a composed constraint <code>@PatternOrSize</code>
where only one of the composing constraints needs to be valid in order to pass the validation.
Either the validated string is all lower-cased or it is between two and three characters long.</p>
</div>
<div id="example-boolean-constraint-composition" class="exampleblock">
<div class="title">Example 12.12: OR composition of constraints</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">booleancomposition</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@ConstraintComposition</span><span class="pun">(</span><span class="pln">OR</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Pattern</span><span class="pun">(</span><span class="pln">regexp </span><span class="pun">=</span><span class="pln"> </span><span class="str">"[a-z]"</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Size</span><span class="pun">(</span><span class="pln">min </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> max </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@ReportAsSingleViolation</span><span class="pln">
</span><span class="lit">@Target</span><span class="pun">({</span><span class="pln"> METHOD</span><span class="pun">,</span><span class="pln"> FIELD </span><span class="pun">})</span><span class="pln">
</span><span class="lit">@Retention</span><span class="pun">(</span><span class="pln">RUNTIME</span><span class="pun">)</span><span class="pln">
</span><span class="lit">@Constraint</span><span class="pun">(</span><span class="pln">validatedBy </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">})</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="lit">@interface</span><span class="pln"> </span><span class="typ">PatternOrSize</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">String</span><span class="pln"> message</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="str">"{org.hibernate.validator.referenceguide.chapter11."</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
            </span><span class="str">"booleancomposition.PatternOrSize.message}"</span><span class="pun">;</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?&gt;[]</span><span class="pln"> groups</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">

    </span><span class="typ">Class</span><span class="pun">&lt;?</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">Payload</span><span class="pun">&gt;[]</span><span class="pln"> payload</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">default</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using <em>ALL_FALSE</em> as composition type implicitly enforces that only a single violation will get
reported in case validation of the constraint composition fails.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-extensions-path-api"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-extensions-path-api"></a>12.7. Extensions of the Path API</h3>
<div class="paragraph">
<p>Hibernate Validator provides an extension to the <code>javax.validation.Path</code> API.
For nodes of <code>ElementKind.PROPERTY</code> and <code>ElementKind.CONTAINER_ELEMENT</code> it allows to obtain the value of the
represented property.
To do so, narrow down a given node to the type <code>org.hibernate.validator.path.PropertyNode</code> or
<code>org.hibernate.validator.path.ContainerElementNode</code> respectively using <code>Node#as()</code>, as
shown in the following example:</p>
</div>
<div id="example-property-node-get-value" class="exampleblock">
<div class="title">Example 12.13: Getting the value from property nodes</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Building</span><span class="pln"> building </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Building</span><span class="pun">();</span><span class="pln">

</span><span class="com">// Assume the name of the person violates a @Size constraint</span><span class="pln">
</span><span class="typ">Person</span><span class="pln"> bob </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Bob"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Apartment</span><span class="pln"> bobsApartment </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Apartment</span><span class="pun">(</span><span class="pln"> bob </span><span class="pun">);</span><span class="pln">
building</span><span class="pun">.</span><span class="pln">getApartments</span><span class="pun">().</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> bobsApartment </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Building</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> building </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Path</span><span class="pln"> path </span><span class="pun">=</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getPropertyPath</span><span class="pun">();</span><span class="pln">
</span><span class="typ">Iterator</span><span class="pun">&lt;</span><span class="typ">Path</span><span class="pun">.</span><span class="typ">Node</span><span class="pun">&gt;</span><span class="pln"> nodeIterator </span><span class="pun">=</span><span class="pln"> path</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">();</span><span class="pln">

</span><span class="typ">Path</span><span class="pun">.</span><span class="typ">Node</span><span class="pln"> node </span><span class="pun">=</span><span class="pln"> nodeIterator</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> node</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"apartments"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertSame</span><span class="pun">(</span><span class="pln"> node</span><span class="pun">.</span><span class="kwd">as</span><span class="pun">(</span><span class="pln"> </span><span class="typ">PropertyNode</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">getValue</span><span class="pun">(),</span><span class="pln"> bobsApartment </span><span class="pun">);</span><span class="pln">

node </span><span class="pun">=</span><span class="pln"> nodeIterator</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> node</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"resident"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertSame</span><span class="pun">(</span><span class="pln"> node</span><span class="pun">.</span><span class="kwd">as</span><span class="pun">(</span><span class="pln"> </span><span class="typ">PropertyNode</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">getValue</span><span class="pun">(),</span><span class="pln"> bob </span><span class="pun">);</span><span class="pln">

node </span><span class="pun">=</span><span class="pln"> nodeIterator</span><span class="pun">.</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> node</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"name"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> node</span><span class="pun">.</span><span class="kwd">as</span><span class="pun">(</span><span class="pln"> </span><span class="typ">PropertyNode</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">).</span><span class="pln">getValue</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"Bob"</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This is also very useful to obtain the element of <code>Set</code> properties on the property path (e.g. <code>apartments</code>
in the example) which otherwise could not be identified (unlike for <code>Map</code> and <code>List</code>, there is no key nor index
in this case).</p>
</div>
</div>
<div class="sect2">
<h3 id="section-dynamic-payload"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-dynamic-payload"></a>12.8. Dynamic payload as part of <code>ConstraintViolation</code></h3>
<div class="paragraph">
<p>In some cases automatic processing of violations can be aided, if the constraint violation provides additional
data - a so called dynamic payload. This dynamic payload could for example contain hints to the user on how to
resolve the violation.</p>
</div>
<div class="paragraph">
<p>Dynamic payloads can be set in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-customconstraints">custom constraints</a> using <code>HibernateConstraintValidatorContext</code>.
This is shown in example <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraint-validator-setting-dynamic-payload">Example 12.14, “<code>ConstraintValidator</code> implementation setting a dynamic payload”</a> where the
<code>javax.validation.ConstraintValidatorContext</code> is unwrapped to <code>HibernateConstraintValidatorContext</code> in order to call
<code>withDynamicPayload</code>.</p>
</div>
<div id="example-constraint-validator-setting-dynamic-payload" class="exampleblock">
<div class="title">Example 12.14: <code>ConstraintValidator</code> implementation setting a dynamic payload</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">dynamicpayload</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="kwd">internal</span><span class="pun">.</span><span class="pln">util</span><span class="pun">.</span><span class="typ">CollectionHelper</span><span class="pun">.</span><span class="pln">newHashMap</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">ValidPassengerCountValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">ValidPassengerCount</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Map</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> suggestedCars </span><span class="pun">=</span><span class="pln"> newHashMap</span><span class="pun">();</span><span class="pln">

    </span><span class="kwd">static</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        suggestedCars</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Chevrolet Corvette"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        suggestedCars</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Toyota Volta"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        suggestedCars</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Maserati GranCabrio"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        suggestedCars</span><span class="pun">.</span><span class="pln">put</span><span class="pun">(</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="str">" Mercedes-Benz E-Class"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">ValidPassengerCount</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">Car</span><span class="pln"> car</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> car </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">int</span><span class="pln"> passengerCount </span><span class="pun">=</span><span class="pln"> car</span><span class="pun">.</span><span class="pln">getPassengers</span><span class="pun">().</span><span class="pln">size</span><span class="pun">();</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> car</span><span class="pun">.</span><span class="pln">getSeatCount</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> passengerCount </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> suggestedCars</span><span class="pun">.</span><span class="pln">containsKey</span><span class="pun">(</span><span class="pln"> passengerCount </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
                </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pln"> hibernateContext </span><span class="pun">=</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">unwrap</span><span class="pun">(</span><span class="pln">
                        </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
                </span><span class="pun">);</span><span class="pln">
                hibernateContext</span><span class="pun">.</span><span class="pln">withDynamicPayload</span><span class="pun">(</span><span class="pln"> suggestedCars</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln"> passengerCount </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>On the constraint violation processing side, a <code>javax.validation.ConstraintViolation</code> can then in turn be
unwrapped to <code>HibernateConstraintViolation</code> in order to retrieve the dynamic payload for further processing.</p>
</div>
<div id="example-retrieving-dynamic-payload" class="exampleblock">
<div class="title">Example 12.15: Retrieval of a <code>ConstraintViolation</code>'s dynamic payload</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Car</span><span class="pln"> car </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Car</span><span class="pun">(</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">addPassenger</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">addPassenger</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
car</span><span class="pun">.</span><span class="pln">addPassenger</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> car </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> constraintViolation </span><span class="pun">=</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">
</span><span class="lit">@SuppressWarnings</span><span class="pun">(</span><span class="str">"unchecked"</span><span class="pun">)</span><span class="pln">
</span><span class="typ">HibernateConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Car</span><span class="pun">&gt;</span><span class="pln"> hibernateConstraintViolation </span><span class="pun">=</span><span class="pln"> constraintViolation</span><span class="pun">.</span><span class="pln">unwrap</span><span class="pun">(</span><span class="pln">
        </span><span class="typ">HibernateConstraintViolation</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
</span><span class="pun">);</span><span class="pln">
</span><span class="typ">String</span><span class="pln"> suggestedCar </span><span class="pun">=</span><span class="pln"> hibernateConstraintViolation</span><span class="pun">.</span><span class="pln">getDynamicPayload</span><span class="pun">(</span><span class="pln"> </span><span class="typ">String</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Toyota Volta"</span><span class="pun">,</span><span class="pln"> suggestedCar </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="non-el-message-interpolator"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#non-el-message-interpolator"></a>12.9. <code>ParameterMessageInterpolator</code></h3>
<div class="paragraph">
<p>Hibernate Validator requires per default an implementation of the Unified EL (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-uel">Section 1.1.1, “Unified EL”</a>) to be available. This is needed to allow the interpolation
of constraint error messages using EL expressions as defined by the Jakarta Bean Validation specification.</p>
</div>
<div class="paragraph">
<p>For environments where you cannot or do not want to provide an EL implementation, Hibernate Validator
offers a non EL based message interpolator - <code>org.hibernate.validator.messageinterpolation.ParameterMessageInterpolator</code>.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-custom-message-interpolation">Section 4.2, “Custom message interpolation”</a> to see how to plug in custom message interpolator
implementations.</p>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Constraint messages containing EL expressions will be returned un-interpolated by
<code>org.hibernate.validator.messageinterpolation.ParameterMessageInterpolator</code>. This also affects
built-in default constraint messages which use EL expressions. At the moment, <code>DecimalMin</code> and <code>DecimalMax</code> are affected.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_code_resourcebundlelocator_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_resourcebundlelocator_code"></a>12.10. <code>ResourceBundleLocator</code></h3>
<div class="paragraph">
<p>With <code>ResourceBundleLocator</code>, Hibernate Validator provides an additional SPI which allows to retrieve
error messages from other resource bundles than <em>ValidationMessages</em> while still using the actual
interpolation algorithm as defined by the specification. Refer to
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-resource-bundle-locator">Section 4.2.1, “<code>ResourceBundleLocator</code>”</a> to learn how to make use of that SPI.</p>
</div>
</div>
<div class="sect2">
<h3 id="section-locale-resolver"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-locale-resolver"></a>12.11. Customizing the locale resolution</h3>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These contracts are marked as <code>@Incubating</code> so they might be subject to change in the future.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>Hibernate Validator provides several extension points to build a custom locale resolution strategy.
The resolved locale is used when interpolating the constraint violation messages.</p>
</div>
<div class="paragraph">
<p>The default behavior of Hibernate Validator is to always use the system default locale (as obtained via <code>Locale.getDefault()</code>).
This might not be the desired behavior if, for example, you usually set your system locale to <code>en-US</code> but want your application to provide messages in French.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the Hibernate Validator default locale to <code>fr-FR</code>:</p>
</div>
<div id="example-configure-default-locale" class="exampleblock">
<div class="title">Example 12.16: Configure the default locale</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">defaultLocale</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">.</span><span class="pln">FRANCE </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Bean</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"doit avoir la valeur vrai"</span><span class="pun">,</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>While this is already a nice improvement, in a fully internationalized application, this is not sufficient:
you need Hibernate Validator to select the locale depending on the user context.</p>
</div>
<div class="paragraph">
<p>Hibernate Validator provides the <code>org.hibernate.validator.spi.messageinterpolation.LocaleResolver</code> SPI
which allows to fine-tune the resolution of the locale.
Typically, in a JAX-RS environment, you can resolve the locale to use from the <code>Accept-Language</code> HTTP header.</p>
</div>
<div class="paragraph">
<p>In the following example, we use a hardcoded value but, for instance, in the case of a RESTEasy application,
you could extract the header from the <code>ResteasyContext</code>.</p>
</div>
<div id="example-locale-resolver" class="exampleblock">
<div class="title">Example 12.17: Fine tune the locale used to interpolate the messages via a <code>LocaleResolver</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">LocaleResolver</span><span class="pln"> localeResolver </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">LocaleResolver</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Locale</span><span class="pln"> resolve</span><span class="pun">(</span><span class="typ">LocaleResolverContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// get the locales supported by the client from the Accept-Language header</span><span class="pln">
        </span><span class="typ">String</span><span class="pln"> acceptLanguageHeader </span><span class="pun">=</span><span class="pln"> </span><span class="str">"it-IT;q=0.9,en-US;q=0.7"</span><span class="pun">;</span><span class="pln">

        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">LanguageRange</span><span class="pun">&gt;</span><span class="pln"> acceptedLanguages </span><span class="pun">=</span><span class="pln"> </span><span class="typ">LanguageRange</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln"> acceptLanguageHeader </span><span class="pun">);</span><span class="pln">
        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Locale</span><span class="pun">&gt;</span><span class="pln"> resolvedLocales </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> acceptedLanguages</span><span class="pun">,</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getSupportedLocales</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> resolvedLocales</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> resolvedLocales</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getDefaultLocale</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

</span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">defaultLocale</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">.</span><span class="pln">FRANCE </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">locales</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">.</span><span class="pln">FRANCE</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">.</span><span class="pln">ITALY</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Locale</span><span class="pun">.</span><span class="pln">US </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">localeResolver</span><span class="pun">(</span><span class="pln"> localeResolver </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Bean</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Bean</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"deve essere true"</span><span class="pun">,</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">().</span><span class="pln">getMessage</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the <code>LocaleResolver</code>, you have to define the list of supported locales via the <code>locales()</code> method.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_custom_contexts"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_custom_contexts"></a>12.12. Custom contexts</h3>
<div class="paragraph">
<p>The Jakarta Bean Validation specification offers at several points in its API the possibility to unwrap a
given interface to an implementor specific subtype. In the case of constraint violation creation in
<code>ConstraintValidator</code> implementations as well as message interpolation in <code>MessageInterpolator</code>
instances, there exist <code>unwrap()</code> methods for the provided context instances -
<code>ConstraintValidatorContext</code> respectively <code>MessageInterpolatorContext</code>. Hibernate Validator provides
custom extensions for both of these interfaces.</p>
</div>
<div class="sect3">
<h4 id="section-hibernateconstraintvalidatorcontext"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-hibernateconstraintvalidatorcontext"></a>12.12.1. <code>HibernateConstraintValidatorContext</code></h4>
<div id="section-custom-constraint-validator-context" class="paragraph">
<p><code>HibernateConstraintValidatorContext</code> is a subtype of <code>ConstraintValidatorContext</code> which allows you to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>set arbitrary parameters for interpolation via the Expression Language message interpolation
facility using <code>HibernateConstraintValidatorContext#addExpressionVariable(String, Object)</code>
or <code>HibernateConstraintValidatorContext#addMessageParameter(String, Object)</code>.</p>
<div id="example-custom-expression-variable" class="exampleblock">
<div class="title">Example 152. Custom <code>@Future</code> validator injecting an expression variable</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">context</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">time</span><span class="pun">.</span><span class="typ">Instant</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ConstraintValidator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ConstraintValidatorContext</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">constraints</span><span class="pun">.</span><span class="typ">Future</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">constraintvalidation</span><span class="pun">.</span><span class="typ">HibernateConstraintValidatorContext</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFutureValidator</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">Future</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Instant</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">Future</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">Instant</span><span class="pln"> value</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> value </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pln"> hibernateContext </span><span class="pun">=</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">unwrap</span><span class="pun">(</span><span class="pln">
                </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
        </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">Instant</span><span class="pln"> now </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Instant</span><span class="pun">.</span><span class="pln">now</span><span class="pun">(</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getClockProvider</span><span class="pun">().</span><span class="pln">getClock</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">!</span><span class="pln">value</span><span class="pun">.</span><span class="pln">isAfter</span><span class="pun">(</span><span class="pln"> now </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            hibernateContext</span><span class="pun">.</span><span class="pln">disableDefaultConstraintViolation</span><span class="pun">();</span><span class="pln">
            hibernateContext
                    </span><span class="pun">.</span><span class="pln">addExpressionVariable</span><span class="pun">(</span><span class="pln"> </span><span class="str">"now"</span><span class="pun">,</span><span class="pln"> now </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">buildConstraintViolationWithTemplate</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Must be after ${now}"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">addConstraintViolation</span><span class="pun">();</span><span class="pln">

            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div id="example-custom-message-parameter" class="exampleblock">
<div class="title">Example 153. Custom <code>@Future</code> validator injecting a message parameter</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">context</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">time</span><span class="pun">.</span><span class="typ">Instant</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ConstraintValidator</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="typ">ConstraintValidatorContext</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> javax</span><span class="pun">.</span><span class="pln">validation</span><span class="pun">.</span><span class="pln">constraints</span><span class="pun">.</span><span class="typ">Future</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">constraintvalidation</span><span class="pun">.</span><span class="typ">HibernateConstraintValidatorContext</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MyFutureValidatorMessageParameter</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">ConstraintValidator</span><span class="pun">&lt;</span><span class="typ">Future</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Instant</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> initialize</span><span class="pun">(</span><span class="typ">Future</span><span class="pln"> constraintAnnotation</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> isValid</span><span class="pun">(</span><span class="typ">Instant</span><span class="pln"> value</span><span class="pun">,</span><span class="pln"> </span><span class="typ">ConstraintValidatorContext</span><span class="pln"> context</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> value </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pln"> hibernateContext </span><span class="pun">=</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">unwrap</span><span class="pun">(</span><span class="pln">
                </span><span class="typ">HibernateConstraintValidatorContext</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
        </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">Instant</span><span class="pln"> now </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Instant</span><span class="pun">.</span><span class="pln">now</span><span class="pun">(</span><span class="pln"> context</span><span class="pun">.</span><span class="pln">getClockProvider</span><span class="pun">().</span><span class="pln">getClock</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">!</span><span class="pln">value</span><span class="pun">.</span><span class="pln">isAfter</span><span class="pun">(</span><span class="pln"> now </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            hibernateContext</span><span class="pun">.</span><span class="pln">disableDefaultConstraintViolation</span><span class="pun">();</span><span class="pln">
            hibernateContext
                    </span><span class="pun">.</span><span class="pln">addMessageParameter</span><span class="pun">(</span><span class="pln"> </span><span class="str">"now"</span><span class="pun">,</span><span class="pln"> now </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">buildConstraintViolationWithTemplate</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Must be after {now}"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                    </span><span class="pun">.</span><span class="pln">addConstraintViolation</span><span class="pun">();</span><span class="pln">

            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Apart from the syntax, the main difference between message parameters and expression variables is that message parameters
are simply interpolated whereas expression variables are interpreted using the expression language engine.
In practice, it should not change anything.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that the parameters specified via <code>addExpressionVariable(String, Object)</code> and
<code>addMessageParameter(String, Object)</code> are global and apply to all constraint violations created by
this <code>isValid()</code> invocation.
This includes the default constraint violation, but also all violations created by the <code>ConstraintViolationBuilder</code>.
You can, however, update the parameters between invocations of
<code>ConstraintViolationBuilder#addConstraintViolation()</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</li>
<li>
<p>set an arbitrary dynamic payload - see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-dynamic-payload">Section 12.8, “Dynamic payload as part of <code>ConstraintViolation</code>”</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_code_hibernatemessageinterpolatorcontext_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_code_hibernatemessageinterpolatorcontext_code"></a>12.12.2. <code>HibernateMessageInterpolatorContext</code></h4>
<div class="paragraph">
<p>Hibernate Validator also offers a custom extension of <code>MessageInterpolatorContext</code>, namely
<code>HibernateMessageInterpolatorContext</code> (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-custom-message-interpolator-context">Example 12.18, “<code>HibernateMessageInterpolatorContext</code>”</a>). This
subtype was introduced to allow a better integration of Hibernate Validator into Glassfish. The
root bean type was in this case needed to determine the right class loader for the message resource
bundle. If you have any other use cases, let us know.</p>
</div>
<div id="example-custom-message-interpolator-context" class="exampleblock">
<div class="title">Example 12.18: <code>HibernateMessageInterpolatorContext</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">@author</span><span class="pln"> </span><span class="typ">Gunnar</span><span class="pln"> </span><span class="typ">Morling</span><span class="pln">
 </span><span class="pun">*</span><span class="pln"> </span><span class="lit">@author</span><span class="pln"> </span><span class="typ">Guillaume</span><span class="pln"> </span><span class="typ">Smet</span><span class="pln">
 </span><span class="pun">*</span><span class="pln"> </span><span class="lit">@since</span><span class="pln"> </span><span class="lit">5.0</span><span class="pln">
 </span><span class="pun">*/</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">interface</span><span class="pln"> </span><span class="typ">HibernateMessageInterpolatorContext</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">MessageInterpolator</span><span class="pun">.</span><span class="typ">Context</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="com">/**
     * Returns the currently validated root bean type.
     *</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-paranamer-parameternameprovider"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-paranamer-parameternameprovider"></a>12.13. Paranamer based <code>ParameterNameProvider</code></h3>
<div class="paragraph">
<p>Hibernate Validator comes with a <code>ParameterNameProvider</code> implementation which leverages the
<a href="http://paranamer.codehaus.org/">Paranamer</a> library.</p>
</div>
<div class="paragraph">
<p>This library provides several ways for obtaining parameter names at runtime, e.g. based on debug
symbols created by the Java compiler, constants with the parameter names woven into the bytecode in
a post-compile step or annotations such as the <code>@Named</code> annotation from JSR 330.</p>
</div>
<div class="paragraph">
<p>In order to use <code>ParanamerParameterNameProvider</code>, either pass an instance when bootstrapping a
validator as shown in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-custom-parameter-name-provider">Example 9.10, “Using a custom <code>ParameterNameProvider</code>”</a> or specify
<code>org.hibernate.validator.parameternameprovider.ParanamerParameterNameProvider</code> as value for the
<code>&lt;parameter-name-provider&gt;</code> element in the <em>META-INF/validation.xml</em> file.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using this parameter name provider, you need to add the Paranamer library to your classpath. It
is available in the Maven Central repository with the group id <code>com.thoughtworks.paranamer</code> and the
artifact id <code>paranamer</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p>By default <code>ParanamerParameterNameProvider</code> retrieves parameter names from constants added to the byte
code at build time (via <code>DefaultParanamer</code>) and debug symbols (via <code>BytecodeReadingParanamer</code>).
Alternatively you can specify a <code>Paranamer</code> implementation of your choice when creating a
<code>ParanamerParameterNameProvider</code> instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="section-constraint-definition-contribution"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-definition-contribution"></a>12.14. Providing constraint definitions</h3>
<div class="paragraph">
<p>Jakarta Bean Validation allows to (re-)define constraint definitions via XML in its constraint mapping
files. See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-mapping-xml-constraints">Section 8.2, “Mapping constraints via <code>constraint-mappings</code>”</a> for more information and <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-constraints-car">Example 8.2, “Bean constraints configured via XML”</a>
for an example. While this approach is sufficient for many use cases,  it has its shortcomings
in others. Imagine for example a constraint library wanting to contribute constraint
definitions for custom types. This library could provide a mapping file with their library, but this
file still would need to be referenced by the user of the library. Luckily there are better ways.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The following concepts are considered experimental at this time. Let us know whether you find them
useful and whether they meet your needs.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect3">
<h4 id="_constraint_definitions_via_code_serviceloader_code"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_constraint_definitions_via_code_serviceloader_code"></a>12.14.1. Constraint definitions via <code>ServiceLoader</code></h4>
<div class="paragraph">
<p>Hibernate Validator allows to utilize Java’s
<a href="http://docs.oracle.com/javase/8/docs/api/?java/util/ServiceLoader.html">ServiceLoader</a>
mechanism to register additional constraint definitions. All you have to do is to add the file
<em>javax.validation.ConstraintValidator</em> to <em>META-INF/services</em>. In this service file you list the
fully qualified classnames of your constraint validator classes (one per line). Hibernate Validator
will automatically infer the constraint types they apply to.
See <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-service-file-for-constraint-definitions">Constraint definition via service file</a>
for an example.</p>
</div>
<div id="example-using-service-file-for-constraint-definitions" class="exampleblock">
<div class="title">Example 12.19: <em>META-INF/services/javax.validation.ConstraintValidator</em></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code><span class="com"># Assuming a custom constraint annotation @org.mycompany.CheckCase</span><span class="pln">
org</span><span class="pun">.</span><span class="pln">mycompany</span><span class="pun">.</span><span class="typ">CheckCaseValidator</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To contribute default messages for your custom constraints, place a file <em>ContributorValidationMessages.properties</em>
and/or its locale-specific specializations at the root of your JAR. Hibernate Validator will consider the
entries from all the bundles with this name found on the classpath in addition to those given in <em>ValidationMessages.properties</em>.</p>
</div>
<div class="paragraph">
<p>This mechanism is also helpful when creating large multi-module applications: instead of putting all the constraint
messages into one single bundle, you can have one resource bundle per module containing only those messages of that module.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We highly recommend the reading of
<a href="http://in.relation.to/2017/03/02/adding-custom-constraint-definitions-via-the-java-service-loader/">this blog post by Marko Bekhta</a>,
guiding you step by step through the process of creating an independent JAR that contains your custom constraints
and declares them via the <code>ServiceLoader</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="section-programmatic-constraint-definition"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-constraint-definition"></a>12.14.2. Adding constraint definitions programmatically</h4>
<div class="paragraph">
<p>While the service loader approach works in many scenarios, but not in all (think for example
OSGi where service files are not visible), there is yet another way of contributing constraint
definitions. You can use the programmatic constraint declaration API - see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-constraint-definition-api">Example 12.20, “Adding constraint definitions through the programmatic API”</a>.</p>
</div>
<div id="example-using-constraint-definition-api" class="exampleblock">
<div class="title">Example 12.20: Adding constraint definitions through the programmatic API</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
        </span><span class="pun">.</span><span class="pln">constraintDefinition</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ValidPassengerCount</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">validatedBy</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ValidPassengerCountValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If your validator implementation is rather simple (i.e. no initialization from the annotation is needed,
and <code>ConstraintValidatorContext</code> is not used), you also can use this alternative API to specify the constraint logic using a Lambda expression or method reference:</p>
</div>
<div id="example-using-constraint-definition-api-lambda" class="exampleblock">
<div class="title">Example 12.21: Adding constraint definition with a Lambda expression</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
        </span><span class="pun">.</span><span class="pln">constraintDefinition</span><span class="pun">(</span><span class="pln"> </span><span class="typ">ValidPassengerCount</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">validateType</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Bus</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="kwd">with</span><span class="pun">(</span><span class="pln"> b </span><span class="pun">-&gt;</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">getSeatCount</span><span class="pun">()</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">getPassengers</span><span class="pun">().</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Instead of directly adding a constraint mapping to the configuration object, you may use a <code>ConstraintMappingContributor</code>
as detailed in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-programmatic-api-contributor">Section 12.5, “Applying programmatic constraint declarations to the default validator factory”</a>. This can be useful when
configuring the default validator factory using <em>META-INF/validation.xml</em> (see
<a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration">Chapter 8, <em>Configuring via XML</em></a>).</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>One use case for registering constraint definitions through the programmatic API is the ability to specify an alternative
constraint validator for the <code>@URL</code> constraint. Historically, Hibernate Validator’s default constraint
validator for this constraint uses the <code>java.net.URL</code> constructor to validate an URL.
However, there is also a purely regular expression based version available which can be configured using
a <code>ConstraintDefinitionContributor</code>:</p>
</div>
<div class="listingblock">
<div class="title">Using the programmatic constraint declaration API to register a regular expression based constraint definition for <code>@URL</code></div>
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">ConstraintMapping</span><span class="pln"> constraintMapping </span><span class="pun">=</span><span class="pln"> configuration</span><span class="pun">.</span><span class="pln">createConstraintMapping</span><span class="pun">();</span><span class="pln">

constraintMapping
        </span><span class="pun">.</span><span class="pln">constraintDefinition</span><span class="pun">(</span><span class="pln"> URL</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">includeExistingValidators</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">validatedBy</span><span class="pun">(</span><span class="pln"> </span><span class="typ">RegexpURLValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="section-constraint-customizing-class-loading"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-constraint-customizing-class-loading"></a>12.15. Customizing class-loading</h3>
<div class="paragraph">
<p>There are several cases in which Hibernate Validator needs to load resources or classes given by name:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XML descriptors (<em>META-INF/validation.xml</em> as well as XML constraint mappings)</p>
</li>
<li>
<p>classes specified by name in XML descriptors (e.g. custom message interpolators etc.)</p>
</li>
<li>
<p>the <em>ValidationMessages</em> resource bundle</p>
</li>
<li>
<p>the <code>ExpressionFactory</code> implementation used for expression based message interpolation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, Hibernate Validator tries to load these resources via the current thread context class loader.
If that’s not successful, Hibernate Validator’s own class loader will be tried as a fallback.</p>
</div>
<div class="paragraph">
<p>For cases where this strategy is not appropriate (e.g. modularized environments such as OSGi),
you may provide a specific class loader for loading these resources when bootstrapping the validator factory:</p>
</div>
<div id="example-using-external-class-loader" class="exampleblock">
<div class="title">Example 12.22: Providing a class loader for loading external resources and classes</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">externalClassLoader</span><span class="pun">(</span><span class="pln"> classLoader </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>In the case of OSGi, you could e.g. pass the loader of a class from the bundle bootstrapping Hibernate Validator
or a custom class loader implementation which delegates to <code>Bundle#loadClass()</code> etc.</p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Call <code>ValidatorFactory#close()</code> if a given validator factory instance is not needed any longer.
Failure to do so may result in a class loader leak in cases where applications/bundles are re-deployed and a non-closed
validator factory still is referenced by application code.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="section-getter-property-selection-strategy"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-getter-property-selection-strategy"></a>12.16. Customizing the getter property selection strategy</h3>
<div class="paragraph">
<p>When a bean is validated by Hibernate Validator, its properties get validated. A property can either
be a field or a getter.
By default, Hibernate Validator respects the JavaBeans specification and considers a method as a getter as soon
as one of the conditions below is true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the method name starts with <code>get</code>, it has a non-void return type and has no parameters;</p>
</li>
<li>
<p>the method name starts with <code>is</code>, has a return type of <code>boolean</code> and has no parameters;</p>
</li>
<li>
<p>the method name starts with <code>has</code>, has a return type of <code>boolean</code> and has no parameters (this rule
is specific to Hibernate Validator and is not mandated by the JavaBeans specification)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While these rules are usually appropriate when following the classic JavaBeans convention, it might happen,
especially with code generators, that the JavaBeans naming convention is not followed and that the getters'
names are following a different convention.</p>
</div>
<div class="paragraph">
<p>In this case, the strategy for detecting getters should be redefined in order to fully validate the object.</p>
</div>
<div class="paragraph">
<p>A classic example of this requirement is when the classes follow a fluent naming convention,
as illustrated in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-using-fluent-api-pattern">Example 12.23, “A class that uses non-standard getters”</a>.</p>
</div>
<div id="example-using-fluent-api-pattern" class="exampleblock">
<div class="title">Example 12.23: A class that uses non-standard getters</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">getterselectionstrategy</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">User</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> firstName</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> lastName</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> email</span><span class="pun">;</span><span class="pln">

    </span><span class="com">// [...]</span><span class="pln">

    </span><span class="lit">@NotEmpty</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> firstName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> firstName</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotEmpty</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> lastName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> lastName</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Email</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> email</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> email</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If such object gets validated, no validation will be performed on the getters as they are not detected
by the standard strategy.</p>
</div>
<div class="exampleblock">
<div class="title">Example 12.24: Validating a class with non-standard getters using the default getter property selection strategy</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

</span><span class="typ">User</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln"> </span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">"not an email"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">User</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> user </span><span class="pun">);</span><span class="pln">

</span><span class="com">// as User has non-standard getters no violations are triggered</span><span class="pln">
assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To make Hibernate Validator treat such methods as properties, a custom <code>GetterPropertySelectionStrategy</code>
should be configured.
In this particular case, a possible implementation of the strategy would be:</p>
</div>
<div class="exampleblock">
<div class="title">Example 12.25: Custom <code>GetterPropertySelectionStrategy</code> implementation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">package</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">referenceguide</span><span class="pun">.</span><span class="pln">chapter12</span><span class="pun">.</span><span class="pln">getterselectionstrategy</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">FluentGetterPropertySelectionStrategy</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">GetterPropertySelectionStrategy</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> methodNamesToIgnore</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">FluentGetterPropertySelectionStrategy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// we will ignore all the method names coming from Object</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">methodNamesToIgnore </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Arrays</span><span class="pun">.</span><span class="pln">stream</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Object</span><span class="pun">.</span><span class="kwd">class</span><span class="pun">.</span><span class="pln">getDeclaredMethods</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Method</span><span class="pun">::</span><span class="pln">getName </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">collect</span><span class="pun">(</span><span class="pln"> </span><span class="typ">Collectors</span><span class="pun">.</span><span class="pln">toSet</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Optional</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> getProperty</span><span class="pun">(</span><span class="typ">ConstrainableExecutable</span><span class="pln"> executable</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> methodNamesToIgnore</span><span class="pun">.</span><span class="pln">contains</span><span class="pun">(</span><span class="pln"> executable</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">||</span><span class="pln"> executable</span><span class="pun">.</span><span class="pln">getReturnType</span><span class="pun">()</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">void</span><span class="pun">.</span><span class="kwd">class</span><span class="pln">
                </span><span class="pun">||</span><span class="pln"> executable</span><span class="pun">.</span><span class="pln">getParameterTypes</span><span class="pun">().</span><span class="pln">length </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Optional</span><span class="pun">.</span><span class="pln">empty</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Optional</span><span class="pun">.</span><span class="pln">of</span><span class="pun">(</span><span class="pln"> executable</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">String</span><span class="pun">&gt;</span><span class="pln"> getGetterMethodNameCandidates</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> propertyName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="com">// As method name == property name, there always is just one possible name for a method</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Collections</span><span class="pun">.</span><span class="pln">singleton</span><span class="pun">(</span><span class="pln"> propertyName </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are multiple ways to configure Hibernate Validator to use this strategy. It can either be done
programmatically (see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#custom-getter-strategy-programmatically">Example 12.26, “Configuring a custom <code>GetterPropertySelectionStrategy</code> programmatically”</a>) or by using the
<code>hibernate.validator.getter_property_selection_strategy</code> property in the XML configuration
(see <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#custom-getter-strategy-xml">Example 12.27, “Configuring a custom <code>GetterPropertySelectionStrategy</code> using an XML property”</a>).</p>
</div>
<div id="custom-getter-strategy-programmatically" class="exampleblock">
<div class="title">Example 12.26: Configuring a custom <code>GetterPropertySelectionStrategy</code> programmatically</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
        </span><span class="com">// Setting a custom getter property selection strategy</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getterPropertySelectionStrategy</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">FluentGetterPropertySelectionStrategy</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">()</span><span class="pln">
        </span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

</span><span class="typ">User</span><span class="pln"> user </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">User</span><span class="pun">(</span><span class="pln"> </span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">""</span><span class="pun">,</span><span class="pln"> </span><span class="str">"not an email"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">User</span><span class="pun">&gt;&gt;</span><span class="pln"> constraintViolations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> user </span><span class="pun">);</span><span class="pln">

assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> constraintViolations</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code></pre>
</div>
</div>
</div>
</div>
<div id="custom-getter-strategy-xml" class="exampleblock">
<div class="title">Example 12.27: Configuring a custom <code>GetterPropertySelectionStrategy</code> using an XML property</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;validation-config</span><span class="pln">
        </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration"</span><span class="pln">
        </span><span class="atn">xmlns:xsi</span><span class="pun">=</span><span class="atv">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln">
        </span><span class="atn">xsi:schemaLocation</span><span class="pun">=</span><span class="atv">"http://xmlns.jcp.org/xml/ns/validation/configuration
            http://xmlns.jcp.org/xml/ns/validation/configuration/validation-configuration-2.0.xsd"</span><span class="pln">
        </span><span class="atn">version</span><span class="pun">=</span><span class="atv">"2.0"</span><span class="tag">&gt;</span><span class="pln">

    </span><span class="tag">&lt;property</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"hibernate.validator.getter_property_selection_strategy"</span><span class="tag">&gt;</span><span class="pln">
        org.hibernate.validator.referenceguide.chapter12.getterselectionstrategy.NoPrefixGetterPropertySelectionStrategy
    </span><span class="tag">&lt;/property&gt;</span><span class="pln">

</span><span class="tag">&lt;/validation-config&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is important to mention that in cases where programmatic constraints are added using
<code>HibernateValidatorConfiguration#addMapping(ConstraintMapping)</code>, adding mappings should
always be done after the required getter property selection strategy is configured.
Otherwise, the default strategy will be used for the mappings added before defining the strategy.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="section-property-node-name-provider"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-property-node-name-provider"></a>12.17. Customizing the property name resolution for constraint violations</h3>
<div class="paragraph">
<p>Imagine that we have a simple data class that has <code>@NotNull</code> constraints on some fields:</p>
</div>
<div id="example-person-class" class="exampleblock">
<div class="title">Example 12.28: Person data class</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@JsonProperty</span><span class="pun">(</span><span class="str">"first_name"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> firstName</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@JsonProperty</span><span class="pun">(</span><span class="str">"last_name"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> lastName</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> firstName</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> lastName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">firstName </span><span class="pun">=</span><span class="pln"> firstName</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastName </span><span class="pun">=</span><span class="pln"> lastName</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This class can be serialized to JSON by using the <a href="https://github.com/FasterXML/jackson">Jackson</a> library:</p>
</div>
<div id="example-person-object-to-json" class="exampleblock">
<div class="title">Example 12.29: Serializing Person object to JSON</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">PersonSerializationTest</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ObjectMapper</span><span class="pln"> objectMapper </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ObjectMapper</span><span class="pun">();</span><span class="pln">

    </span><span class="lit">@Test</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> personIsSerialized</span><span class="pun">()</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">JsonProcessingException</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">Person</span><span class="pln"> person </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln"> </span><span class="str">"Clark"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Kent"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">String</span><span class="pln"> serializedPerson </span><span class="pun">=</span><span class="pln"> objectMapper</span><span class="pun">.</span><span class="pln">writeValueAsString</span><span class="pun">(</span><span class="pln"> person </span><span class="pun">);</span><span class="pln">

        assertEquals</span><span class="pun">(</span><span class="pln"> </span><span class="str">"{\"first_name\":\"Clark\",\"last_name\":\"Kent\"}"</span><span class="pun">,</span><span class="pln"> serializedPerson </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>As we can see, the object is serialized to:</p>
</div>
<div id="example-person-json" class="exampleblock">
<div class="title">Example 12.30: Person as json</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code><span class="pun">{</span><span class="pln">
  </span><span class="str">"first_name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Clark"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"last_name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Kent"</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Notice how the names of the properties differ. In the Java object, we have <code>firstName</code> and <code>lastName</code>, whereas in the JSON output, we have
<code>first_name</code> and <code>last_name</code>.
We customized this behavior through <code>@JsonProperty</code> annotations.</p>
</div>
<div class="paragraph">
<p>Now imagine that we use this class in a REST environment, where a user can send <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-person-json">a <code>Person</code> instance as JSON</a> in the request body.
It would be nice, when indicating on which field the validation failed, to indicate the name they use in their JSON request, <code>first_name</code>,
and not the name we use internally in our Java code, <code>firstName</code>.</p>
</div>
<div class="paragraph">
<p>The <code>org.hibernate.validator.spi.nodenameprovider.PropertyNodeNameProvider</code> contract allows us to do this.
By implementing it, we can define how the name of a property will be resolved during validation.
In our case, we want to read the value from the Jackson configuration.</p>
</div>
<div class="paragraph">
<p>One example of how to do this is to leverage the Jackson API:</p>
</div>
<div id="example-jackson-property-node-name-provider" class="exampleblock">
<div class="title">Example 12.31: JacksonPropertyNodeNameProvider implementation</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">nodenameprovider</span><span class="pun">.</span><span class="typ">JavaBeanProperty</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">nodenameprovider</span><span class="pun">.</span><span class="typ">Property</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> org</span><span class="pun">.</span><span class="pln">hibernate</span><span class="pun">.</span><span class="pln">validator</span><span class="pun">.</span><span class="pln">spi</span><span class="pun">.</span><span class="pln">nodenameprovider</span><span class="pun">.</span><span class="typ">PropertyNodeNameProvider</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">fasterxml</span><span class="pun">.</span><span class="pln">jackson</span><span class="pun">.</span><span class="pln">databind</span><span class="pun">.</span><span class="typ">BeanDescription</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">fasterxml</span><span class="pun">.</span><span class="pln">jackson</span><span class="pun">.</span><span class="pln">databind</span><span class="pun">.</span><span class="typ">JavaType</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">fasterxml</span><span class="pun">.</span><span class="pln">jackson</span><span class="pun">.</span><span class="pln">databind</span><span class="pun">.</span><span class="typ">ObjectMapper</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> com</span><span class="pun">.</span><span class="pln">fasterxml</span><span class="pun">.</span><span class="pln">jackson</span><span class="pun">.</span><span class="pln">databind</span><span class="pun">.</span><span class="pln">introspect</span><span class="pun">.</span><span class="typ">BeanPropertyDefinition</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">JacksonPropertyNodeNameProvider</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><span class="typ">PropertyNodeNameProvider</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">ObjectMapper</span><span class="pln"> objectMapper </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ObjectMapper</span><span class="pun">();</span><span class="pln">

    </span><span class="lit">@Override</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getName</span><span class="pun">(</span><span class="typ">Property</span><span class="pln"> </span><span class="kwd">property</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="kwd">property</span><span class="pln"> </span><span class="kwd">instanceof</span><span class="pln"> </span><span class="typ">JavaBeanProperty</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> getJavaBeanPropertyName</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="typ">JavaBeanProperty</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">property</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> getDefaultName</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">property</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getJavaBeanPropertyName</span><span class="pun">(</span><span class="typ">JavaBeanProperty</span><span class="pln"> </span><span class="kwd">property</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">JavaType</span><span class="pln"> type </span><span class="pun">=</span><span class="pln"> objectMapper</span><span class="pun">.</span><span class="pln">constructType</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">property</span><span class="pun">.</span><span class="pln">getDeclaringClass</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
        </span><span class="typ">BeanDescription</span><span class="pln"> desc </span><span class="pun">=</span><span class="pln"> objectMapper</span><span class="pun">.</span><span class="pln">getSerializationConfig</span><span class="pun">().</span><span class="pln">introspect</span><span class="pun">(</span><span class="pln"> type </span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">return</span><span class="pln"> desc</span><span class="pun">.</span><span class="pln">findProperties</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">stream</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">filter</span><span class="pun">(</span><span class="pln"> prop </span><span class="pun">-&gt;</span><span class="pln"> prop</span><span class="pun">.</span><span class="pln">getInternalName</span><span class="pun">().</span><span class="pln">equals</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">property</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">map</span><span class="pun">(</span><span class="pln"> </span><span class="typ">BeanPropertyDefinition</span><span class="pun">::</span><span class="pln">getName </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">findFirst</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">orElse</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">property</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="kwd">private</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getDefaultName</span><span class="pun">(</span><span class="typ">Property</span><span class="pln"> </span><span class="kwd">property</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">property</span><span class="pun">.</span><span class="pln">getName</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>And when doing the validation:</p>
</div>
<div id="example-jackson-property-node-name-provider-field" class="exampleblock">
<div class="title">Example 12.32: JacksonPropertyNodeNameProvider usage</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">JacksonPropertyNodeNameProviderTest</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="lit">@Test</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> nameIsReadFromJacksonAnnotationOnField</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">propertyNodeNameProvider</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JacksonPropertyNodeNameProvider</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
                </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">

        </span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

        </span><span class="typ">Person</span><span class="pln"> clarkKent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Kent"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

        </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> clarkKent </span><span class="pun">);</span><span class="pln">
        </span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> violation </span><span class="pun">=</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">

        assertEquals</span><span class="pun">(</span><span class="pln"> violation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"first_name"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>We can see that the property path now returns <code>first_name</code>.</p>
</div>
<div class="paragraph">
<p>Note that this also works when the annotations are on a getter:</p>
</div>
<div id="example-jackson-property-node-name-provider-getter" class="exampleblock">
<div class="title">Example 12.33: Annotation on a getter</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-JAVA" data-lang="JAVA"><span class="lit">@Test</span><span class="pln">
</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> nameIsReadFromJacksonAnnotationOnGetter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="typ">ValidatorFactory</span><span class="pln"> validatorFactory </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Validation</span><span class="pun">.</span><span class="pln">byProvider</span><span class="pun">(</span><span class="pln"> </span><span class="typ">HibernateValidator</span><span class="pun">.</span><span class="kwd">class</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">configure</span><span class="pun">()</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">propertyNodeNameProvider</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">JacksonPropertyNodeNameProvider</span><span class="pun">()</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
            </span><span class="pun">.</span><span class="pln">buildValidatorFactory</span><span class="pun">();</span><span class="pln">

    </span><span class="typ">Validator</span><span class="pln"> validator </span><span class="pun">=</span><span class="pln"> validatorFactory</span><span class="pun">.</span><span class="pln">getValidator</span><span class="pun">();</span><span class="pln">

    </span><span class="typ">Person</span><span class="pln"> clarkKent </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Kent"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

    </span><span class="typ">Set</span><span class="pun">&lt;</span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;&gt;</span><span class="pln"> violations </span><span class="pun">=</span><span class="pln"> validator</span><span class="pun">.</span><span class="pln">validate</span><span class="pun">(</span><span class="pln"> clarkKent </span><span class="pun">);</span><span class="pln">
    </span><span class="typ">ConstraintViolation</span><span class="pun">&lt;</span><span class="typ">Person</span><span class="pun">&gt;</span><span class="pln"> violation </span><span class="pun">=</span><span class="pln"> violations</span><span class="pun">.</span><span class="pln">iterator</span><span class="pun">().</span><span class="kwd">next</span><span class="pun">();</span><span class="pln">

    assertEquals</span><span class="pun">(</span><span class="pln"> violation</span><span class="pun">.</span><span class="pln">getPropertyPath</span><span class="pun">().</span><span class="pln">toString</span><span class="pun">(),</span><span class="pln"> </span><span class="str">"first_name"</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Person</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> firstName</span><span class="pun">;</span><span class="pln">

    </span><span class="lit">@JsonProperty</span><span class="pun">(</span><span class="str">"last_name"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">private</span><span class="pln"> </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> lastName</span><span class="pun">;</span><span class="pln">

    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">Person</span><span class="pun">(</span><span class="typ">String</span><span class="pln"> firstName</span><span class="pun">,</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> lastName</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">firstName </span><span class="pun">=</span><span class="pln"> firstName</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">lastName </span><span class="pun">=</span><span class="pln"> lastName</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">

    </span><span class="lit">@NotNull</span><span class="pln">
    </span><span class="lit">@JsonProperty</span><span class="pun">(</span><span class="str">"first_name"</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">public</span><span class="pln"> </span><span class="typ">String</span><span class="pln"> getFirstName</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> firstName</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>This is just one use case of why we would like to change how the property names are resolved.</p>
</div>
<div class="paragraph">
<p><code>org.hibernate.validator.spi.nodenameprovider.PropertyNodeNameProvider</code> can be implemented to provide a property name in
whatever way you see fit (reading from annotations, for instance).</p>
</div>
<div class="paragraph">
<p>There are two more interfaces that are worth mentioning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.hibernate.validator.spi.nodenameprovider.Property</code> is a base interface that holds metadata about a property. It
has a single <code>String getName()</code> method that can be used to get the "original" name of a property. This interface
should be used as a default way of resolving the name (see how it is used in <a href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#example-jackson-property-node-name-provider">Example 12.31, “JacksonPropertyNodeNameProvider implementation”</a>).</p>
</li>
<li>
<p><code>org.hibernate.validator.spi.nodenameprovider.JavaBeanProperty</code> is an interface that holds metadata about a bean property. It
extends <code>org.hibernate.validator.spi.nodenameprovider.Property</code> and provide some additional methods like <code>Class&lt;?&gt; getDeclaringClass()</code>
which returns the class that is the owner of the property.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validator-annotation-processor"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotation-processor"></a>13. Annotation Processor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Have you ever caught yourself by unintentionally doing things like</p>
</div>
<div class="ulist">
<ul>
<li>
<p>specifying constraint annotations at unsupported data types (e.g. by annotating a String with <code>@Past</code>)</p>
</li>
<li>
<p>annotating the setter of a JavaBeans property (instead of the getter method)</p>
</li>
<li>
<p>annotating static fields/methods with constraint annotations (which is not supported)?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then the Hibernate Validator Annotation Processor is the right thing for you. It helps preventing
such mistakes by plugging into the build process and raising compilation errors whenever constraint
annotations are incorrectly used.</p>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can find the Hibernate Validator Annotation Processor as part of the distribution bundle on
<a href="http://sourceforge.net/projects/hibernate/files/hibernate-validator">Sourceforge</a> or in the
usual Maven repositories such as Maven Central under the GAV
<code>org.hibernate.validator:hibernate-validator-annotation-processor:6.1.5.Final</code>.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
<div class="sect2">
<h3 id="validator-annotationprocessor-prerequisites"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-prerequisites"></a>13.1. Prerequisites</h3>
<div class="paragraph">
<p>The Hibernate Validator Annotation Processor is based on the "Pluggable Annotation Processing API"
as defined by <a href="http://jcp.org/en/jsr/detail?id=269">JSR 269</a> which is part of the Java
Platform.</p>
</div>
</div>
<div class="sect2">
<h3 id="validator-annotationprocessor-features"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-features"></a>13.2. Features</h3>
<div class="paragraph">
<p>As of Hibernate Validator 6.1.5.Final the Hibernate Validator Annotation Processor checks that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>constraint annotations are allowed for the type of the annotated element</p>
</li>
<li>
<p>only non-static fields or methods are annotated with constraint annotations</p>
</li>
<li>
<p>only non-primitive fields or methods are annotated with <code>@Valid</code></p>
</li>
<li>
<p>only such methods are annotated with constraint annotations which are valid JavaBeans
getter methods (optionally, see below)</p>
</li>
<li>
<p>only such annotation types are annotated with constraint annotations which are constraint
annotations themselves</p>
</li>
<li>
<p>definition of dynamic default group sequence with <code>@GroupSequenceProvider</code> is valid</p>
</li>
<li>
<p>annotation parameter values are meaningful and valid</p>
</li>
<li>
<p>method parameter constraints in inheritance hierarchies respect the inheritance rules</p>
</li>
<li>
<p>method return value constraints in inheritance hierarchies respect the inheritance rules</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="validator-annotationprocessor-options"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-options"></a>13.3. Options</h3>
<div class="paragraph">
<p>The behavior of the Hibernate Validator Annotation Processor can be controlled using the following
<a href="http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html#BHCHACIB">processor options</a>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>diagnosticKind</code></dt>
<dd>
<p>Controls how constraint problems are reported. Must be the
string representation of one of the values from the enum <code>javax.tools.Diagnostic.Kind</code>,
e.g. <code>WARNING</code>. A value of <code>ERROR</code> will cause compilation to halt whenever the AP detects
a constraint problem. Defaults to <code>ERROR</code>.</p>
</dd>
<dt class="hdlist1"><code>methodConstraintsSupported</code></dt>
<dd>
<p>Controls whether constraints are allowed at methods of any
kind. Must be set to <code>true</code> when working with method level constraints as supported by
Hibernate Validator. Can be set to <code>false</code> to allow constraints only at
JavaBeans getter methods as defined by the Jakarta Bean Validation API. Defaults to <code>true</code>.</p>
</dd>
<dt class="hdlist1"><code>verbose</code></dt>
<dd>
<p>Controls whether detailed processing information shall be
displayed or not, useful for debugging purposes. Must be either
<code>true</code> or <code>false</code>. Defaults to <code>false</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="validator-annotationprocessor-usage"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-usage"></a>13.4. Using the Annotation Processor</h3>
<div class="paragraph">
<p>This section shows in detail how to integrate the Hibernate Validator Annotation Processor into
command line builds (Maven, Ant, javac) as well as IDE-based builds (Eclipse, IntelliJ IDEA,
NetBeans).</p>
</div>
<div class="sect3">
<h4 id="validator-annotationprocessor-commandline"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-commandline"></a>13.4.1. Command line builds</h4>
<div class="sect4">
<h5 id="validator-annotationprocessor-maven"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-maven"></a>13.4.1.1. Maven</h5>
<div class="paragraph">
<p>For using the Hibernate Validator annotation processor with Maven, set it up via the <code>annotationProcessorPaths</code> option like this:</p>
</div>
<div class="exampleblock">
<div class="title">Example 13.1: Using the HV Annotation Processor with Maven</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;project&gt;</span><span class="pln">
    [...]
    </span><span class="tag">&lt;build&gt;</span><span class="pln">
        [...]
        </span><span class="tag">&lt;plugins&gt;</span><span class="pln">
            [...]
            </span><span class="tag">&lt;plugin&gt;</span><span class="pln">
                </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.apache.maven.plugins</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
                </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">maven-compiler-plugin</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
                </span><span class="tag">&lt;version&gt;</span><span class="pln">3.6.1</span><span class="tag">&lt;/version&gt;</span><span class="pln">
                </span><span class="tag">&lt;configuration&gt;</span><span class="pln">
                    </span><span class="tag">&lt;source&gt;</span><span class="pln">1.8</span><span class="tag">&lt;/source&gt;</span><span class="pln">
                    </span><span class="tag">&lt;target&gt;</span><span class="pln">1.8</span><span class="tag">&lt;/target&gt;</span><span class="pln">
                    </span><span class="tag">&lt;annotationProcessorPaths&gt;</span><span class="pln">
                        </span><span class="tag">&lt;path&gt;</span><span class="pln">
                            </span><span class="tag">&lt;groupId&gt;</span><span class="pln">org.hibernate.validator</span><span class="tag">&lt;/groupId&gt;</span><span class="pln">
                            </span><span class="tag">&lt;artifactId&gt;</span><span class="pln">hibernate-validator-annotation-processor</span><span class="tag">&lt;/artifactId&gt;</span><span class="pln">
                            </span><span class="tag">&lt;version&gt;</span><span class="pln">6.1.5.Final</span><span class="tag">&lt;/version&gt;</span><span class="pln">
                        </span><span class="tag">&lt;/path&gt;</span><span class="pln">
                    </span><span class="tag">&lt;/annotationProcessorPaths&gt;</span><span class="pln">
                </span><span class="tag">&lt;/configuration&gt;</span><span class="pln">
            </span><span class="tag">&lt;/plugin&gt;</span><span class="pln">
            [...]
        </span><span class="tag">&lt;/plugins&gt;</span><span class="pln">
        [...]
    </span><span class="tag">&lt;/build&gt;</span><span class="pln">
    [...]
</span><span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="validator-annotationprocessor-gradle"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-gradle"></a>13.4.1.2. Gradle</h5>
<div class="paragraph">
<p>When using <a href="https://gradle.org/">Gradle</a> it is enough to reference the annotation processor as an <code>annotationProcessor</code> dependency.</p>
</div>
<div class="exampleblock">
<div class="title">Example 13.2: Using the annotation processor with Gradle</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-groovy" data-lang="groovy"><span class="pln">dependencies </span><span class="pun">{</span><span class="pln">
    annotationProcessor </span><span class="kwd">group</span><span class="pun">:</span><span class="pln"> </span><span class="str">'org.hibernate.validator'</span><span class="pun">,</span><span class="pln"> name</span><span class="pun">:</span><span class="pln"> </span><span class="str">'hibernate-validator-annotation-processor'</span><span class="pun">,</span><span class="pln"> version</span><span class="pun">:</span><span class="pln"> </span><span class="str">'6.1.5.Final'</span><span class="pln">

    </span><span class="com">// any other dependencies ...</span><span class="pln">
</span><span class="pun">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="validator-annotationprocessor-ant"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-ant"></a>13.4.1.3. Apache Ant</h5>
<div class="paragraph">
<p>Similar to directly working with javac, the annotation processor can be added as as compiler
argument when invoking the <a href="http://ant.apache.org/manual/CoreTasks/javac.html">javac task</a>
for <a href="http://ant.apache.org/">Apache Ant</a>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 13.3: Using the annotation processor with Ant</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight prettyprinted" style=""><code class="language-XML" data-lang="XML"><span class="tag">&lt;javac</span><span class="pln"> </span><span class="atn">srcdir</span><span class="pun">=</span><span class="atv">"src/main"</span><span class="pln">
       </span><span class="atn">destdir</span><span class="pun">=</span><span class="atv">"build/classes"</span><span class="pln">
       </span><span class="atn">classpath</span><span class="pun">=</span><span class="atv">"/path/to/validation-api-2.0.2.jar"</span><span class="tag">&gt;</span><span class="pln">
       </span><span class="tag">&lt;compilerarg</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"-processorpath"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln">
       </span><span class="tag">&lt;compilerarg</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"/path/to/hibernate-validator-annotation-processor-6.1.5.Final.jar"</span><span class="tag">/&gt;</span><span class="pln">
</span><span class="tag">&lt;/javac&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="validator-annotationprocessor-javac"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-javac"></a>13.4.1.4. javac</h5>
<div class="paragraph">
<p>When compiling on the command line using
<a href="http://docs.oracle.com/javase/8/docs/technotes/guides/javac/index.html">javac</a>, specify the JAR
<em>hibernate-validator-annotation-processor-6.1.5.Final.jar</em> using the "processorpath" option as shown in
the following listing. The processor will be detected automatically by the compiler and invoked
during compilation.</p>
</div>
<div class="exampleblock">
<div class="title">Example 13.4: Using the annotation processor with javac</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>javac src/main/java/org/hibernate/validator/ap/demo/Car.java \
   -cp /path/to/validation-api-2.0.2.jar \
   -processorpath /path/to/hibernate-validator-annotation-processor-6.1.5.Final.jar</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="validator-annotationprocessor-ide"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-ide"></a>13.4.2. IDE builds</h4>
<div class="sect4">
<h5 id="_eclipse"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#_eclipse"></a>13.4.2.1. Eclipse</h5>
<div class="paragraph">
<p>The annotation processor will automatically be set up for Maven projects configured as described above,
provided you have the <a href="https://www.eclipse.org/m2e/">M2E Eclipse plug-in</a> installed.</p>
</div>
<div class="paragraph">
<p>For plain Eclipse projects follow these steps to set up the annotation processor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click your project, choose "Properties"</p>
</li>
<li>
<p>Go to "Java Compiler" and make sure, that "Compiler compliance level" is set to "1.8".
Otherwise the processor won’t be activated</p>
</li>
<li>
<p>Go to "Java Compiler - Annotation Processing" and choose "Enable annotation processing"</p>
</li>
<li>
<p>Go to "Java Compiler - Annotation Processing - Factory Path" and add the JAR
hibernate-validator-annotation-processor-6.1.5.Final.jar</p>
</li>
<li>
<p>Confirm the workspace rebuild</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You now should see any annotation problems as regular error markers within the editor and in the
"Problem" view:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/annotation_processor_eclipse.png" alt="annotation processor eclipse">
</div>
</div>
</div>
<div class="sect4">
<h5 id="validator-annotationprocessor-idea"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-idea"></a>13.4.2.2. IntelliJ IDEA</h5>
<div class="paragraph">
<p>The following steps must be followed to use the annotation processor within
<a href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a> (version 9 and above):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to "File", then "Settings",</p>
</li>
<li>
<p>Expand the node "Compiler", then "Annotation Processors"</p>
</li>
<li>
<p>Choose "Enable annotation processing" and enter the following as "Processor path":
/path/to/hibernate-validator-annotation-processor-6.1.5.Final.jar</p>
</li>
<li>
<p>Add the processor’s fully qualified name org.hibernate.validator.ap.ConstraintValidationProcessor
to the "Annotation Processors" list</p>
</li>
<li>
<p>If applicable add you module to the "Processed Modules" list</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rebuilding your project then should show any erroneous constraint annotations:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/annotation_processor_intellij.png" alt="annotation processor intellij">
</div>
</div>
</div>
<div class="sect4">
<h5 id="validator-annotationprocessor-netbeans"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-netbeans"></a>13.4.2.3. NetBeans</h5>
<div class="paragraph">
<p>The <a href="http://www.netbeans.org/">NetBeans</a> IDE supports using
annotation processors within the IDE build. To do so, do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click your project, choose "Properties"</p>
</li>
<li>
<p>Go to "Libraries", tab "Processor", and add the JAR hibernate-validator-annotation-processor-6.1.5.Final.jar</p>
</li>
<li>
<p>Go to "Build - Compiling", select "Enable Annotation Processing" and "Enable Annotation Processing
in Editor". Add the annotation processor by specifying its fully qualified name
org.hibernate.validator.ap.ConstraintValidationProcessor</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any constraint annotation problems will then be marked directly within the editor:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/annotation_processor_netbeans.png" alt="annotation processor netbeans">
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="validator-annotationprocessor-known-issues"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-annotationprocessor-known-issues"></a>13.5. Known issues</h3>
<div class="paragraph">
<p>The following known issues exist as of July 2017:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Container element constraints are not supported for now.</p>
</li>
<li>
<p>Constraints applied to a container but in reality applied to the container elements (be it via
the <code>Unwrapping.Unwrap</code> payload or via a value extractor marked with <code>@UnwrapByDefault</code>) are not supported
correctly.</p>
</li>
<li>
<p><a href="https://hibernate.atlassian.net/browse/HV-308">HV-308</a>: Additional validators
registered for a constraint
<a href="http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration">using XML</a> are
not evaluated by the annotation processor.</p>
</li>
<li>
<p>Sometimes custom constraints can’t be
<a href="https://hibernate.atlassian.net/browse/HV-293">properly evaluated</a> when
using the processor within Eclipse. Cleaning the project can help in these situations. This seems to
be an issue with the Eclipse JSR 269 API implementation, but further investigation is required here.</p>
</li>
<li>
<p>When using the processor within Eclipse, the check of dynamic default group sequence definitions
doesn’t work. After further investigation, it seems to be an issue with the Eclipse JSR 269 API
implementation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validator-further-reading"><a class="anchor" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-further-reading"></a>14. Further reading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Last but not least, a few pointers to further information.</p>
</div>
<div class="paragraph">
<p>A great source for examples is the Jakarta Bean Validation TCK which is available for anonymous access on
<a href="https://github.com/beanvalidation/beanvalidation-tck/">GitHub</a>. In particular the TCK’s
<a href="https://github.com/beanvalidation/beanvalidation-tck/tree/master/tests">tests</a> might be
of interest. <a href="http://beanvalidation.org/2.0/spec/">The Jakarta Bean Validation</a> specification itself
is also a great way to deepen your understanding of Jakarta Bean Validation and Hibernate Validator.</p>
</div>
<div class="paragraph">
<p>If you have any further questions about Hibernate Validator or want to share some of your use cases,
have a look at the <a href="http://community.jboss.org/en/hibernate/validator">Hibernate Validator
Wiki</a>, the <a href="https://discourse.hibernate.org/c/hibernate-validator">Hibernate Validator Forum</a> and the
<a href="https://stackoverflow.com/questions/tagged/hibernate-validator">Hibernate Validator tag on Stack Overflow</a>.</p>
</div>
<div class="paragraph">
<p>In case you would like to report a bug use
<a href="https://hibernate.atlassian.net/projects/HV/">Hibernate’s Jira</a> instance.
Feedback is always welcome!</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-05-06 14:24:20 UTC
</div>
</div>
<!-- Google Analytics -->
<script type="text/javascript" async="" src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/insight.min.js.下载"></script><script type="text/javascript" async="" src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/f.txt"></script><script type="text/javascript" async="" src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/analytics.js.下载"></script><script async="" src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/gtm.js.下载"></script><script type="text/javascript">
	dataLayer = [{'channel' : 'Hibernate', 'additional_tracking_code' : 'UA-45270411-3'}];
	(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NJWS5L');
</script>
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NJWS5L" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- /Google Analytics -->

<!-- HibernateDoc.OutdatedContent -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
<script src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/outdated-content.js.下载" type="text/javascript"></script>
<script type="text/javascript">var jQuery_3_1 = $.noConflict(true); jQuery_3_1(document).ready(function() { HibernateDoc.OutdatedContent.install('validator'); });</script>
<!-- /HibernateDoc.OutdatedContent -->

<!-- Dynamic TOC -->
<!-- Source: https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006 -->
<script src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/tocbot.min.js.下载"></script>
<script>
    /* Tocbot dynamic TOC, works with tocbot 3.0.2 */
    /* Source: https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006 */
    var oldtoc = document.getElementById('toctitle').nextElementSibling;
    var newtoc = document.createElement('div');
    newtoc.setAttribute('id', 'tocbot');
    newtoc.setAttribute('class', 'js-toc');
    oldtoc.parentNode.replaceChild(newtoc, oldtoc);
    tocbot.init({ contentSelector: '#content',
        headingSelector: 'h1, h2, h3, h4',
        smoothScroll: false });
    var handleTocOnResize = function() {
        var width = window.innerWidth
                    || document.documentElement.clientWidth
                    || document.body.clientWidth;
        if (width < 768) {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4',
                collapseDepth: 6,
                activeLinkClass: 'ignoreactive',
                throttleTimeout: 1000,
                smoothScroll: false });
        }
        else {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4',
                smoothScroll: false });
        }
    };
    window.addEventListener('resize', handleTocOnResize);
    handleTocOnResize();
</script>
<!-- /Dynamic TOC -->
<link rel="stylesheet" href="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/prettify.min.css">
<script src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/prettify.min.js.下载"></script>
<script>prettyPrint()</script>

        <script type="text/javascript" id="">_bizo_data_partner_id="6570";</script>
<script type="text/javascript" id="">(function(){var b=document.getElementsByTagName("script")[0],a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===window.location.protocol?"https://sjs":"http://js")+".bizographics.com/insight.min.js";b.parentNode.insertBefore(a,b)})();</script>
<noscript>
  <img height="1" width="1" alt="" style="display:none;" src="//www.bizographics.com/collect/?pid=6570&amp;fmt=gif">
</noscript><script src="./Hibernate Validator 6.1.5.Final - Jakarta Bean Validation Reference Implementation_ Reference Guide_files/f(1).txt"></script></body></html>